function yp(n,r){for(var s=0;s<r.length;s++){const o=r[s];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in n)){const u=Object.getOwnPropertyDescriptor(o,c);u&&Object.defineProperty(n,c,u.get?u:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();function $h(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var al={exports:{}},Sn={},il={exports:{}},ge={};var Wd;function xp(){if(Wd)return ge;Wd=1;var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.iterator;function j(T){return T===null||typeof T!="object"?null:(T=x&&T[x]||T["@@iterator"],typeof T=="function"?T:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,_={};function v(T,M,re){this.props=T,this.context=M,this.refs=_,this.updater=re||k}v.prototype.isReactComponent={},v.prototype.setState=function(T,M){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,M,"setState")},v.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function R(){}R.prototype=v.prototype;function P(T,M,re){this.props=T,this.context=M,this.refs=_,this.updater=re||k}var O=P.prototype=new R;O.constructor=P,C(O,v.prototype),O.isPureReactComponent=!0;var L=Array.isArray,z=Object.prototype.hasOwnProperty,H={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function Z(T,M,re){var pe,xe={},we=null,Ne=null;if(M!=null)for(pe in M.ref!==void 0&&(Ne=M.ref),M.key!==void 0&&(we=""+M.key),M)z.call(M,pe)&&!Y.hasOwnProperty(pe)&&(xe[pe]=M[pe]);var D=arguments.length-2;if(D===1)xe.children=re;else if(1<D){for(var ee=Array(D),ue=0;ue<D;ue++)ee[ue]=arguments[ue+2];xe.children=ee}if(T&&T.defaultProps)for(pe in D=T.defaultProps,D)xe[pe]===void 0&&(xe[pe]=D[pe]);return{$$typeof:n,type:T,key:we,ref:Ne,props:xe,_owner:H.current}}function K(T,M){return{$$typeof:n,type:T.type,key:M,ref:T.ref,props:T.props,_owner:T._owner}}function he(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function ke(T){var M={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(re){return M[re]})}var fe=/\/+/g;function me(T,M){return typeof T=="object"&&T!==null&&T.key!=null?ke(""+T.key):M.toString(36)}function ve(T,M,re,pe,xe){var we=typeof T;(we==="undefined"||we==="boolean")&&(T=null);var Ne=!1;if(T===null)Ne=!0;else switch(we){case"string":case"number":Ne=!0;break;case"object":switch(T.$$typeof){case n:case r:Ne=!0}}if(Ne)return Ne=T,xe=xe(Ne),T=pe===""?"."+me(Ne,0):pe,L(xe)?(re="",T!=null&&(re=T.replace(fe,"$&/")+"/"),ve(xe,M,re,"",function(ue){return ue})):xe!=null&&(he(xe)&&(xe=K(xe,re+(!xe.key||Ne&&Ne.key===xe.key?"":(""+xe.key).replace(fe,"$&/")+"/")+T)),M.push(xe)),1;if(Ne=0,pe=pe===""?".":pe+":",L(T))for(var D=0;D<T.length;D++){we=T[D];var ee=pe+me(we,D);Ne+=ve(we,M,re,ee,xe)}else if(ee=j(T),typeof ee=="function")for(T=ee.call(T),D=0;!(we=T.next()).done;)we=we.value,ee=pe+me(we,D++),Ne+=ve(we,M,re,ee,xe);else if(we==="object")throw M=String(T),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return Ne}function Ae(T,M,re){if(T==null)return T;var pe=[],xe=0;return ve(T,pe,"","",function(we){return M.call(re,we,xe++)}),pe}function Te(T){if(T._status===-1){var M=T._result;M=M(),M.then(function(re){(T._status===0||T._status===-1)&&(T._status=1,T._result=re)},function(re){(T._status===0||T._status===-1)&&(T._status=2,T._result=re)}),T._status===-1&&(T._status=0,T._result=M)}if(T._status===1)return T._result.default;throw T._result}var _e={current:null},W={transition:null},ae={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:W,ReactCurrentOwner:H};function U(){throw Error("act(...) is not supported in production builds of React.")}return ge.Children={map:Ae,forEach:function(T,M,re){Ae(T,function(){M.apply(this,arguments)},re)},count:function(T){var M=0;return Ae(T,function(){M++}),M},toArray:function(T){return Ae(T,function(M){return M})||[]},only:function(T){if(!he(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},ge.Component=v,ge.Fragment=s,ge.Profiler=c,ge.PureComponent=P,ge.StrictMode=o,ge.Suspense=p,ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,ge.act=U,ge.cloneElement=function(T,M,re){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var pe=C({},T.props),xe=T.key,we=T.ref,Ne=T._owner;if(M!=null){if(M.ref!==void 0&&(we=M.ref,Ne=H.current),M.key!==void 0&&(xe=""+M.key),T.type&&T.type.defaultProps)var D=T.type.defaultProps;for(ee in M)z.call(M,ee)&&!Y.hasOwnProperty(ee)&&(pe[ee]=M[ee]===void 0&&D!==void 0?D[ee]:M[ee])}var ee=arguments.length-2;if(ee===1)pe.children=re;else if(1<ee){D=Array(ee);for(var ue=0;ue<ee;ue++)D[ue]=arguments[ue+2];pe.children=D}return{$$typeof:n,type:T.type,key:xe,ref:we,props:pe,_owner:Ne}},ge.createContext=function(T){return T={$$typeof:h,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:u,_context:T},T.Consumer=T},ge.createElement=Z,ge.createFactory=function(T){var M=Z.bind(null,T);return M.type=T,M},ge.createRef=function(){return{current:null}},ge.forwardRef=function(T){return{$$typeof:m,render:T}},ge.isValidElement=he,ge.lazy=function(T){return{$$typeof:w,_payload:{_status:-1,_result:T},_init:Te}},ge.memo=function(T,M){return{$$typeof:y,type:T,compare:M===void 0?null:M}},ge.startTransition=function(T){var M=W.transition;W.transition={};try{T()}finally{W.transition=M}},ge.unstable_act=U,ge.useCallback=function(T,M){return _e.current.useCallback(T,M)},ge.useContext=function(T){return _e.current.useContext(T)},ge.useDebugValue=function(){},ge.useDeferredValue=function(T){return _e.current.useDeferredValue(T)},ge.useEffect=function(T,M){return _e.current.useEffect(T,M)},ge.useId=function(){return _e.current.useId()},ge.useImperativeHandle=function(T,M,re){return _e.current.useImperativeHandle(T,M,re)},ge.useInsertionEffect=function(T,M){return _e.current.useInsertionEffect(T,M)},ge.useLayoutEffect=function(T,M){return _e.current.useLayoutEffect(T,M)},ge.useMemo=function(T,M){return _e.current.useMemo(T,M)},ge.useReducer=function(T,M,re){return _e.current.useReducer(T,M,re)},ge.useRef=function(T){return _e.current.useRef(T)},ge.useState=function(T){return _e.current.useState(T)},ge.useSyncExternalStore=function(T,M,re){return _e.current.useSyncExternalStore(T,M,re)},ge.useTransition=function(){return _e.current.useTransition()},ge.version="18.3.1",ge}var Hd;function Dl(){return Hd||(Hd=1,il.exports=xp()),il.exports}var Kd;function vp(){if(Kd)return Sn;Kd=1;var n=Dl(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,p,y){var w,x={},j=null,k=null;y!==void 0&&(j=""+y),p.key!==void 0&&(j=""+p.key),p.ref!==void 0&&(k=p.ref);for(w in p)o.call(p,w)&&!u.hasOwnProperty(w)&&(x[w]=p[w]);if(m&&m.defaultProps)for(w in p=m.defaultProps,p)x[w]===void 0&&(x[w]=p[w]);return{$$typeof:r,type:m,key:j,ref:k,props:x,_owner:c.current}}return Sn.Fragment=s,Sn.jsx=h,Sn.jsxs=h,Sn}var Gd;function wp(){return Gd||(Gd=1,al.exports=vp()),al.exports}var i=wp(),N=Dl();const Lh=$h(N),bp=yp({__proto__:null,default:Lh},[N]);var Ka={},ol={exports:{}},gt={},ll={exports:{}},cl={};var Jd;function _p(){return Jd||(Jd=1,(function(n){function r(W,ae){var U=W.length;W.push(ae);e:for(;0<U;){var T=U-1>>>1,M=W[T];if(0<c(M,ae))W[T]=ae,W[U]=M,U=T;else break e}}function s(W){return W.length===0?null:W[0]}function o(W){if(W.length===0)return null;var ae=W[0],U=W.pop();if(U!==ae){W[0]=U;e:for(var T=0,M=W.length,re=M>>>1;T<re;){var pe=2*(T+1)-1,xe=W[pe],we=pe+1,Ne=W[we];if(0>c(xe,U))we<M&&0>c(Ne,xe)?(W[T]=Ne,W[we]=U,T=we):(W[T]=xe,W[pe]=U,T=pe);else if(we<M&&0>c(Ne,U))W[T]=Ne,W[we]=U,T=we;else break e}}return ae}function c(W,ae){var U=W.sortIndex-ae.sortIndex;return U!==0?U:W.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();n.unstable_now=function(){return h.now()-m}}var p=[],y=[],w=1,x=null,j=3,k=!1,C=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(W){for(var ae=s(y);ae!==null;){if(ae.callback===null)o(y);else if(ae.startTime<=W)o(y),ae.sortIndex=ae.expirationTime,r(p,ae);else break;ae=s(y)}}function L(W){if(_=!1,O(W),!C)if(s(p)!==null)C=!0,Te(z);else{var ae=s(y);ae!==null&&_e(L,ae.startTime-W)}}function z(W,ae){C=!1,_&&(_=!1,R(Z),Z=-1),k=!0;var U=j;try{for(O(ae),x=s(p);x!==null&&(!(x.expirationTime>ae)||W&&!ke());){var T=x.callback;if(typeof T=="function"){x.callback=null,j=x.priorityLevel;var M=T(x.expirationTime<=ae);ae=n.unstable_now(),typeof M=="function"?x.callback=M:x===s(p)&&o(p),O(ae)}else o(p);x=s(p)}if(x!==null)var re=!0;else{var pe=s(y);pe!==null&&_e(L,pe.startTime-ae),re=!1}return re}finally{x=null,j=U,k=!1}}var H=!1,Y=null,Z=-1,K=5,he=-1;function ke(){return!(n.unstable_now()-he<K)}function fe(){if(Y!==null){var W=n.unstable_now();he=W;var ae=!0;try{ae=Y(!0,W)}finally{ae?me():(H=!1,Y=null)}}else H=!1}var me;if(typeof P=="function")me=function(){P(fe)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Ae=ve.port2;ve.port1.onmessage=fe,me=function(){Ae.postMessage(null)}}else me=function(){v(fe,0)};function Te(W){Y=W,H||(H=!0,me())}function _e(W,ae){Z=v(function(){W(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){C||k||(C=!0,Te(z))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return j},n.unstable_getFirstCallbackNode=function(){return s(p)},n.unstable_next=function(W){switch(j){case 1:case 2:case 3:var ae=3;break;default:ae=j}var U=j;j=ae;try{return W()}finally{j=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,ae){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var U=j;j=W;try{return ae()}finally{j=U}},n.unstable_scheduleCallback=function(W,ae,U){var T=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?T+U:T):U=T,W){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=U+M,W={id:w++,callback:ae,priorityLevel:W,startTime:U,expirationTime:M,sortIndex:-1},U>T?(W.sortIndex=U,r(y,W),s(p)===null&&W===s(y)&&(_?(R(Z),Z=-1):_=!0,_e(L,U-T))):(W.sortIndex=M,r(p,W),C||k||(C=!0,Te(z))),W},n.unstable_shouldYield=ke,n.unstable_wrapCallback=function(W){var ae=j;return function(){var U=j;j=ae;try{return W.apply(this,arguments)}finally{j=U}}}})(cl)),cl}var Qd;function jp(){return Qd||(Qd=1,ll.exports=_p()),ll.exports}var Yd;function Sp(){if(Yd)return gt;Yd=1;var n=Dl(),r=jp();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function u(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(c[e]=t,e=0;e<t.length;e++)o.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},x={};function j(e){return p.call(x,e)?!0:p.call(w,e)?!1:y.test(e)?x[e]=!0:(w[e]=!0,!1)}function k(e,t,a,l){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C(e,t,a,l){if(t===null||typeof t>"u"||k(e,t,a,l))return!0;if(l)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _(e,t,a,l,d,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){v[e]=new _(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];v[t]=new _(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){v[e]=new _(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){v[e]=new _(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){v[e]=new _(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){v[e]=new _(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){v[e]=new _(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){v[e]=new _(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){v[e]=new _(e,5,!1,e.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function P(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(R,P);v[t]=new _(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(R,P);v[t]=new _(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(R,P);v[t]=new _(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){v[e]=new _(e,1,!1,e.toLowerCase(),null,!1,!1)}),v.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){v[e]=new _(e,1,!1,e.toLowerCase(),null,!0,!0)});function O(e,t,a,l){var d=v.hasOwnProperty(t)?v[t]:null;(d!==null?d.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(C(t,a,d,l)&&(a=null),l||d===null?j(t)&&(a===null?e.removeAttribute(t):e.setAttribute(t,""+a)):d.mustUseProperty?e[d.propertyName]=a===null?d.type===3?!1:"":a:(t=d.attributeName,l=d.attributeNamespace,a===null?e.removeAttribute(t):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,l?e.setAttributeNS(l,t,a):e.setAttribute(t,a))))}var L=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),H=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),he=Symbol.for("react.provider"),ke=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),W=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var U=Object.assign,T;function M(e){if(T===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);T=t&&t[1]||""}return`
`+T+e}var re=!1;function pe(e,t){if(!e||re)return"";re=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch($){var l=$}Reflect.construct(e,[],t)}else{try{t.call()}catch($){l=$}e.call(t.prototype)}else{try{throw Error()}catch($){l=$}e()}}catch($){if($&&l&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),f=l.stack.split(`
`),g=d.length-1,b=f.length-1;1<=g&&0<=b&&d[g]!==f[b];)b--;for(;1<=g&&0<=b;g--,b--)if(d[g]!==f[b]){if(g!==1||b!==1)do if(g--,b--,0>b||d[g]!==f[b]){var S=`
`+d[g].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=g&&0<=b);break}}}finally{re=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?M(e):""}function xe(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=pe(e.type,!1),e;case 11:return e=pe(e.type.render,!1),e;case 1:return e=pe(e.type,!0),e;default:return""}}function we(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Y:return"Fragment";case H:return"Portal";case K:return"Profiler";case Z:return"StrictMode";case me:return"Suspense";case ve:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ke:return(e.displayName||"Context")+".Consumer";case he:return(e._context.displayName||"Context")+".Provider";case fe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ae:return t=e.displayName||null,t!==null?t:we(e.type)||"Memo";case Te:t=e._payload,e=e._init;try{return we(e(t))}catch{}}return null}function Ne(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(t);case 8:return t===Z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function D(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ee(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ue(e){var t=ee(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(g){l=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function De(e){e._valueTracker||(e._valueTracker=ue(e))}function Je(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=ee(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function kt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function di(e,t){var a=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function Xl(e,t){var a=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;a=D(t.value!=null?t.value:a),e._wrapperState={initialChecked:l,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zl(e,t){t=t.checked,t!=null&&O(e,"checked",t,!1)}function hi(e,t){Zl(e,t);var a=D(t.value),l=t.type;if(a!=null)l==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fi(e,t.type,a):t.hasOwnProperty("defaultValue")&&fi(e,t.type,D(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ec(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function fi(e,t,a){(t!=="number"||kt(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Ds=Array.isArray;function Yr(e,t,a,l){if(e=e.options,t){t={};for(var d=0;d<a.length;d++)t["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=t.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&l&&(e[a].defaultSelected=!0)}else{for(a=""+D(a),t=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function mi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tc(e,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(s(92));if(Ds(a)){if(1<a.length)throw Error(s(93));a=a[0]}t=a}t==null&&(t=""),a=t}e._wrapperState={initialValue:D(a)}}function rc(e,t){var a=D(t.value),l=D(t.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),t.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),l!=null&&(e.defaultValue=""+l)}function sc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Mn,ac=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,l,d){MSApp.execUnsafeLocalFunction(function(){return e(t,a,l,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Mn=Mn||document.createElement("div"),Mn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Mn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ms(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var zs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bf=["Webkit","ms","Moz","O"];Object.keys(zs).forEach(function(e){bf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zs[t]=zs[e]})});function ic(e,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||zs.hasOwnProperty(e)&&zs[e]?(""+t).trim():t+"px"}function oc(e,t){e=e.style;for(var a in t)if(t.hasOwnProperty(a)){var l=a.indexOf("--")===0,d=ic(a,t[a],l);a==="float"&&(a="cssFloat"),l?e.setProperty(a,d):e[a]=d}}var _f=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gi(e,t){if(t){if(_f[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function yi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xi=null;function vi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wi=null,Xr=null,Zr=null;function lc(e){if(e=cn(e)){if(typeof wi!="function")throw Error(s(280));var t=e.stateNode;t&&(t=la(t),wi(e.stateNode,e.type,t))}}function cc(e){Xr?Zr?Zr.push(e):Zr=[e]:Xr=e}function uc(){if(Xr){var e=Xr,t=Zr;if(Zr=Xr=null,lc(e),t)for(e=0;e<t.length;e++)lc(t[e])}}function dc(e,t){return e(t)}function hc(){}var bi=!1;function fc(e,t,a){if(bi)return e(t,a);bi=!0;try{return dc(e,t,a)}finally{bi=!1,(Xr!==null||Zr!==null)&&(hc(),uc())}}function Fs(e,t){var a=e.stateNode;if(a===null)return null;var l=la(a);if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,t,typeof a));return a}var _i=!1;if(m)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){_i=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{_i=!1}function jf(e,t,a,l,d,f,g,b,S){var $=Array.prototype.slice.call(arguments,3);try{t.apply(a,$)}catch(B){this.onError(B)}}var qs=!1,zn=null,Fn=!1,ji=null,Sf={onError:function(e){qs=!0,zn=e}};function Nf(e,t,a,l,d,f,g,b,S){qs=!1,zn=null,jf.apply(Sf,arguments)}function kf(e,t,a,l,d,f,g,b,S){if(Nf.apply(this,arguments),qs){if(qs){var $=zn;qs=!1,zn=null}else throw Error(s(198));Fn||(Fn=!0,ji=$)}}function Pr(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function mc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pc(e){if(Pr(e)!==e)throw Error(s(188))}function Ef(e){var t=e.alternate;if(!t){if(t=Pr(e),t===null)throw Error(s(188));return t!==e?null:e}for(var a=e,l=t;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return pc(d),e;if(f===l)return pc(d),t;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=d,l=f;else{for(var g=!1,b=d.child;b;){if(b===a){g=!0,a=d,l=f;break}if(b===l){g=!0,l=d,a=f;break}b=b.sibling}if(!g){for(b=f.child;b;){if(b===a){g=!0,a=f,l=d;break}if(b===l){g=!0,l=f,a=d;break}b=b.sibling}if(!g)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:t}function gc(e){return e=Ef(e),e!==null?yc(e):null}function yc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yc(e);if(t!==null)return t;e=e.sibling}return null}var xc=r.unstable_scheduleCallback,vc=r.unstable_cancelCallback,Cf=r.unstable_shouldYield,Tf=r.unstable_requestPaint,Fe=r.unstable_now,Rf=r.unstable_getCurrentPriorityLevel,Si=r.unstable_ImmediatePriority,wc=r.unstable_UserBlockingPriority,Bn=r.unstable_NormalPriority,Pf=r.unstable_LowPriority,bc=r.unstable_IdlePriority,qn=null,qt=null;function Of(e){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(qn,e,void 0,(e.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:Uf,Af=Math.log,If=Math.LN2;function Uf(e){return e>>>=0,e===0?32:31-(Af(e)/If|0)|0}var Vn=64,Wn=4194304;function Vs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hn(e,t){var a=e.pendingLanes;if(a===0)return 0;var l=0,d=e.suspendedLanes,f=e.pingedLanes,g=a&268435455;if(g!==0){var b=g&~d;b!==0?l=Vs(b):(f&=g,f!==0&&(l=Vs(f)))}else g=a&~d,g!==0?l=Vs(g):f!==0&&(l=Vs(f));if(l===0)return 0;if(t!==0&&t!==l&&(t&d)===0&&(d=l&-l,f=t&-t,d>=f||d===16&&(f&4194240)!==0))return t;if((l&4)!==0&&(l|=a&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)a=31-At(t),d=1<<a,l|=e[a],t&=~d;return l}function $f(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lf(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-At(f),b=1<<g,S=d[g];S===-1?((b&a)===0||(b&l)!==0)&&(d[g]=$f(b,t)):S<=t&&(e.expiredLanes|=b),f&=~b}}function Ni(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _c(){var e=Vn;return Vn<<=1,(Vn&4194240)===0&&(Vn=64),e}function ki(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ws(e,t,a){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-At(t),e[t]=a}function Df(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<a;){var d=31-At(a),f=1<<d;t[d]=0,l[d]=-1,e[d]=-1,a&=~f}}function Ei(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-At(a),d=1<<l;d&t|e[l]&t&&(e[l]|=t),a&=~d}}var Se=0;function jc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Sc,Ci,Nc,kc,Ec,Ti=!1,Kn=[],ir=null,or=null,lr=null,Hs=new Map,Ks=new Map,cr=[],Mf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cc(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":Hs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(t.pointerId)}}function Gs(e,t,a,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},t!==null&&(t=cn(t),t!==null&&Ci(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function zf(e,t,a,l,d){switch(t){case"focusin":return ir=Gs(ir,e,t,a,l,d),!0;case"dragenter":return or=Gs(or,e,t,a,l,d),!0;case"mouseover":return lr=Gs(lr,e,t,a,l,d),!0;case"pointerover":var f=d.pointerId;return Hs.set(f,Gs(Hs.get(f)||null,e,t,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Ks.set(f,Gs(Ks.get(f)||null,e,t,a,l,d)),!0}return!1}function Tc(e){var t=Or(e.target);if(t!==null){var a=Pr(t);if(a!==null){if(t=a.tag,t===13){if(t=mc(a),t!==null){e.blockedOn=t,Ec(e.priority,function(){Nc(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Pi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);xi=l,a.target.dispatchEvent(l),xi=null}else return t=cn(a),t!==null&&Ci(t),e.blockedOn=a,!1;t.shift()}return!0}function Rc(e,t,a){Gn(e)&&a.delete(t)}function Ff(){Ti=!1,ir!==null&&Gn(ir)&&(ir=null),or!==null&&Gn(or)&&(or=null),lr!==null&&Gn(lr)&&(lr=null),Hs.forEach(Rc),Ks.forEach(Rc)}function Js(e,t){e.blockedOn===t&&(e.blockedOn=null,Ti||(Ti=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ff)))}function Qs(e){function t(d){return Js(d,e)}if(0<Kn.length){Js(Kn[0],e);for(var a=1;a<Kn.length;a++){var l=Kn[a];l.blockedOn===e&&(l.blockedOn=null)}}for(ir!==null&&Js(ir,e),or!==null&&Js(or,e),lr!==null&&Js(lr,e),Hs.forEach(t),Ks.forEach(t),a=0;a<cr.length;a++)l=cr[a],l.blockedOn===e&&(l.blockedOn=null);for(;0<cr.length&&(a=cr[0],a.blockedOn===null);)Tc(a),a.blockedOn===null&&cr.shift()}var es=L.ReactCurrentBatchConfig,Jn=!0;function Bf(e,t,a,l){var d=Se,f=es.transition;es.transition=null;try{Se=1,Ri(e,t,a,l)}finally{Se=d,es.transition=f}}function qf(e,t,a,l){var d=Se,f=es.transition;es.transition=null;try{Se=4,Ri(e,t,a,l)}finally{Se=d,es.transition=f}}function Ri(e,t,a,l){if(Jn){var d=Pi(e,t,a,l);if(d===null)Gi(e,t,l,Qn,a),Cc(e,l);else if(zf(d,e,t,a,l))l.stopPropagation();else if(Cc(e,l),t&4&&-1<Mf.indexOf(e)){for(;d!==null;){var f=cn(d);if(f!==null&&Sc(f),f=Pi(e,t,a,l),f===null&&Gi(e,t,l,Qn,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else Gi(e,t,l,null,a)}}var Qn=null;function Pi(e,t,a,l){if(Qn=null,e=vi(l),e=Or(e),e!==null)if(t=Pr(e),t===null)e=null;else if(a=t.tag,a===13){if(e=mc(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qn=e,null}function Pc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rf()){case Si:return 1;case wc:return 4;case Bn:case Pf:return 16;case bc:return 536870912;default:return 16}default:return 16}}var ur=null,Oi=null,Yn=null;function Oc(){if(Yn)return Yn;var e,t=Oi,a=t.length,l,d="value"in ur?ur.value:ur.textContent,f=d.length;for(e=0;e<a&&t[e]===d[e];e++);var g=a-e;for(l=1;l<=g&&t[a-l]===d[f-l];l++);return Yn=d.slice(e,1<l?1-l:void 0)}function Xn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zn(){return!0}function Ac(){return!1}function yt(e){function t(a,l,d,f,g){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Zn:Ac,this.isPropagationStopped=Ac,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),t}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=yt(ts),Ys=U({},ts,{view:0,detail:0}),Vf=yt(Ys),Ii,Ui,Xs,ea=U({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xs&&(Xs&&e.type==="mousemove"?(Ii=e.screenX-Xs.screenX,Ui=e.screenY-Xs.screenY):Ui=Ii=0,Xs=e),Ii)},movementY:function(e){return"movementY"in e?e.movementY:Ui}}),Ic=yt(ea),Wf=U({},ea,{dataTransfer:0}),Hf=yt(Wf),Kf=U({},Ys,{relatedTarget:0}),$i=yt(Kf),Gf=U({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Jf=yt(Gf),Qf=U({},ts,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yf=yt(Qf),Xf=U({},ts,{data:0}),Uc=yt(Xf),Zf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},em={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=tm[e])?!!t[e]:!1}function Li(){return rm}var sm=U({},Ys,{key:function(e){if(e.key){var t=Zf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?em[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(e){return e.type==="keypress"?Xn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nm=yt(sm),am=U({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$c=yt(am),im=U({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),om=yt(im),lm=U({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),cm=yt(lm),um=U({},ea,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),dm=yt(um),hm=[9,13,27,32],Di=m&&"CompositionEvent"in window,Zs=null;m&&"documentMode"in document&&(Zs=document.documentMode);var fm=m&&"TextEvent"in window&&!Zs,Lc=m&&(!Di||Zs&&8<Zs&&11>=Zs),Dc=" ",Mc=!1;function zc(e,t){switch(e){case"keyup":return hm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rs=!1;function mm(e,t){switch(e){case"compositionend":return Fc(t);case"keypress":return t.which!==32?null:(Mc=!0,Dc);case"textInput":return e=t.data,e===Dc&&Mc?null:e;default:return null}}function pm(e,t){if(rs)return e==="compositionend"||!Di&&zc(e,t)?(e=Oc(),Yn=Oi=ur=null,rs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lc&&t.locale!=="ko"?null:t.data;default:return null}}var gm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gm[e.type]:t==="textarea"}function qc(e,t,a,l){cc(l),t=aa(t,"onChange"),0<t.length&&(a=new Ai("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var en=null,tn=null;function ym(e){ou(e,0)}function ta(e){var t=os(e);if(Je(t))return e}function xm(e,t){if(e==="change")return t}var Vc=!1;if(m){var Mi;if(m){var zi="oninput"in document;if(!zi){var Wc=document.createElement("div");Wc.setAttribute("oninput","return;"),zi=typeof Wc.oninput=="function"}Mi=zi}else Mi=!1;Vc=Mi&&(!document.documentMode||9<document.documentMode)}function Hc(){en&&(en.detachEvent("onpropertychange",Kc),tn=en=null)}function Kc(e){if(e.propertyName==="value"&&ta(tn)){var t=[];qc(t,tn,e,vi(e)),fc(ym,t)}}function vm(e,t,a){e==="focusin"?(Hc(),en=t,tn=a,en.attachEvent("onpropertychange",Kc)):e==="focusout"&&Hc()}function wm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ta(tn)}function bm(e,t){if(e==="click")return ta(t)}function _m(e,t){if(e==="input"||e==="change")return ta(t)}function jm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var It=typeof Object.is=="function"?Object.is:jm;function rn(e,t){if(It(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!p.call(t,d)||!It(e[d],t[d]))return!1}return!0}function Gc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jc(e,t){var a=Gc(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Gc(a)}}function Qc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Yc(){for(var e=window,t=kt();t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=kt(e.document)}return t}function Fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Sm(e){var t=Yc(),a=e.focusedElem,l=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&Qc(a.ownerDocument.documentElement,a)){if(l!==null&&Fi(a)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if(e=(t=a.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=a.textContent.length,f=Math.min(l.start,d);l=l.end===void 0?f:Math.min(l.end,d),!e.extend&&f>l&&(d=l,l=f,f=d),d=Jc(a,f);var g=Jc(a,l);d&&g&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),f>l?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=a;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)e=t[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Nm=m&&"documentMode"in document&&11>=document.documentMode,ss=null,Bi=null,sn=null,qi=!1;function Xc(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;qi||ss==null||ss!==kt(l)||(l=ss,"selectionStart"in l&&Fi(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),sn&&rn(sn,l)||(sn=l,l=aa(Bi,"onSelect"),0<l.length&&(t=new Ai("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=ss)))}function ra(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var ns={animationend:ra("Animation","AnimationEnd"),animationiteration:ra("Animation","AnimationIteration"),animationstart:ra("Animation","AnimationStart"),transitionend:ra("Transition","TransitionEnd")},Vi={},Zc={};m&&(Zc=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function sa(e){if(Vi[e])return Vi[e];if(!ns[e])return e;var t=ns[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Zc)return Vi[e]=t[a];return e}var eu=sa("animationend"),tu=sa("animationiteration"),ru=sa("animationstart"),su=sa("transitionend"),nu=new Map,au="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(e,t){nu.set(e,t),u(t,[e])}for(var Wi=0;Wi<au.length;Wi++){var Hi=au[Wi],km=Hi.toLowerCase(),Em=Hi[0].toUpperCase()+Hi.slice(1);dr(km,"on"+Em)}dr(eu,"onAnimationEnd"),dr(tu,"onAnimationIteration"),dr(ru,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(su,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cm=new Set("cancel close invalid load scroll toggle".split(" ").concat(nn));function iu(e,t,a){var l=e.type||"unknown-event";e.currentTarget=a,kf(l,t,void 0,e),e.currentTarget=null}function ou(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],d=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var g=l.length-1;0<=g;g--){var b=l[g],S=b.instance,$=b.currentTarget;if(b=b.listener,S!==f&&d.isPropagationStopped())break e;iu(d,b,$),f=S}else for(g=0;g<l.length;g++){if(b=l[g],S=b.instance,$=b.currentTarget,b=b.listener,S!==f&&d.isPropagationStopped())break e;iu(d,b,$),f=S}}}if(Fn)throw e=ji,Fn=!1,ji=null,e}function Re(e,t){var a=t[eo];a===void 0&&(a=t[eo]=new Set);var l=e+"__bubble";a.has(l)||(lu(t,e,2,!1),a.add(l))}function Ki(e,t,a){var l=0;t&&(l|=4),lu(a,e,l,t)}var na="_reactListening"+Math.random().toString(36).slice(2);function an(e){if(!e[na]){e[na]=!0,o.forEach(function(a){a!=="selectionchange"&&(Cm.has(a)||Ki(a,!1,e),Ki(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[na]||(t[na]=!0,Ki("selectionchange",!1,t))}}function lu(e,t,a,l){switch(Pc(t)){case 1:var d=Bf;break;case 4:d=qf;break;default:d=Ri}a=d.bind(null,t,a,e),d=void 0,!_i||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,a,{capture:!0,passive:d}):e.addEventListener(t,a,!0):d!==void 0?e.addEventListener(t,a,{passive:d}):e.addEventListener(t,a,!1)}function Gi(e,t,a,l,d){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var b=l.stateNode.containerInfo;if(b===d||b.nodeType===8&&b.parentNode===d)break;if(g===4)for(g=l.return;g!==null;){var S=g.tag;if((S===3||S===4)&&(S=g.stateNode.containerInfo,S===d||S.nodeType===8&&S.parentNode===d))return;g=g.return}for(;b!==null;){if(g=Or(b),g===null)return;if(S=g.tag,S===5||S===6){l=f=g;continue e}b=b.parentNode}}l=l.return}fc(function(){var $=f,B=vi(a),q=[];e:{var F=nu.get(e);if(F!==void 0){var G=Ai,X=e;switch(e){case"keypress":if(Xn(a)===0)break e;case"keydown":case"keyup":G=nm;break;case"focusin":X="focus",G=$i;break;case"focusout":X="blur",G=$i;break;case"beforeblur":case"afterblur":G=$i;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Hf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=om;break;case eu:case tu:case ru:G=Jf;break;case su:G=cm;break;case"scroll":G=Vf;break;case"wheel":G=dm;break;case"copy":case"cut":case"paste":G=Yf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=$c}var te=(t&4)!==0,Be=!te&&e==="scroll",A=te?F!==null?F+"Capture":null:F;te=[];for(var E=$,I;E!==null;){I=E;var V=I.stateNode;if(I.tag===5&&V!==null&&(I=V,A!==null&&(V=Fs(E,A),V!=null&&te.push(on(E,V,I)))),Be)break;E=E.return}0<te.length&&(F=new G(F,X,null,a,B),q.push({event:F,listeners:te}))}}if((t&7)===0){e:{if(F=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",F&&a!==xi&&(X=a.relatedTarget||a.fromElement)&&(Or(X)||X[Jt]))break e;if((G||F)&&(F=B.window===B?B:(F=B.ownerDocument)?F.defaultView||F.parentWindow:window,G?(X=a.relatedTarget||a.toElement,G=$,X=X?Or(X):null,X!==null&&(Be=Pr(X),X!==Be||X.tag!==5&&X.tag!==6)&&(X=null)):(G=null,X=$),G!==X)){if(te=Ic,V="onMouseLeave",A="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(te=$c,V="onPointerLeave",A="onPointerEnter",E="pointer"),Be=G==null?F:os(G),I=X==null?F:os(X),F=new te(V,E+"leave",G,a,B),F.target=Be,F.relatedTarget=I,V=null,Or(B)===$&&(te=new te(A,E+"enter",X,a,B),te.target=I,te.relatedTarget=Be,V=te),Be=V,G&&X)t:{for(te=G,A=X,E=0,I=te;I;I=as(I))E++;for(I=0,V=A;V;V=as(V))I++;for(;0<E-I;)te=as(te),E--;for(;0<I-E;)A=as(A),I--;for(;E--;){if(te===A||A!==null&&te===A.alternate)break t;te=as(te),A=as(A)}te=null}else te=null;G!==null&&cu(q,F,G,te,!1),X!==null&&Be!==null&&cu(q,Be,X,te,!0)}}e:{if(F=$?os($):window,G=F.nodeName&&F.nodeName.toLowerCase(),G==="select"||G==="input"&&F.type==="file")var se=xm;else if(Bc(F))if(Vc)se=_m;else{se=wm;var ie=vm}else(G=F.nodeName)&&G.toLowerCase()==="input"&&(F.type==="checkbox"||F.type==="radio")&&(se=bm);if(se&&(se=se(e,$))){qc(q,se,a,B);break e}ie&&ie(e,F,$),e==="focusout"&&(ie=F._wrapperState)&&ie.controlled&&F.type==="number"&&fi(F,"number",F.value)}switch(ie=$?os($):window,e){case"focusin":(Bc(ie)||ie.contentEditable==="true")&&(ss=ie,Bi=$,sn=null);break;case"focusout":sn=Bi=ss=null;break;case"mousedown":qi=!0;break;case"contextmenu":case"mouseup":case"dragend":qi=!1,Xc(q,a,B);break;case"selectionchange":if(Nm)break;case"keydown":case"keyup":Xc(q,a,B)}var oe;if(Di)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else rs?zc(e,a)&&(de="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(de="onCompositionStart");de&&(Lc&&a.locale!=="ko"&&(rs||de!=="onCompositionStart"?de==="onCompositionEnd"&&rs&&(oe=Oc()):(ur=B,Oi="value"in ur?ur.value:ur.textContent,rs=!0)),ie=aa($,de),0<ie.length&&(de=new Uc(de,e,null,a,B),q.push({event:de,listeners:ie}),oe?de.data=oe:(oe=Fc(a),oe!==null&&(de.data=oe)))),(oe=fm?mm(e,a):pm(e,a))&&($=aa($,"onBeforeInput"),0<$.length&&(B=new Uc("onBeforeInput","beforeinput",null,a,B),q.push({event:B,listeners:$}),B.data=oe))}ou(q,t)})}function on(e,t,a){return{instance:e,listener:t,currentTarget:a}}function aa(e,t){for(var a=t+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Fs(e,a),f!=null&&l.unshift(on(e,f,d)),f=Fs(e,t),f!=null&&l.push(on(e,f,d))),e=e.return}return l}function as(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cu(e,t,a,l,d){for(var f=t._reactName,g=[];a!==null&&a!==l;){var b=a,S=b.alternate,$=b.stateNode;if(S!==null&&S===l)break;b.tag===5&&$!==null&&(b=$,d?(S=Fs(a,f),S!=null&&g.unshift(on(a,S,b))):d||(S=Fs(a,f),S!=null&&g.push(on(a,S,b)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var Tm=/\r\n?/g,Rm=/\u0000|\uFFFD/g;function uu(e){return(typeof e=="string"?e:""+e).replace(Tm,`
`).replace(Rm,"")}function ia(e,t,a){if(t=uu(t),uu(e)!==t&&a)throw Error(s(425))}function oa(){}var Ji=null,Qi=null;function Yi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xi=typeof setTimeout=="function"?setTimeout:void 0,Pm=typeof clearTimeout=="function"?clearTimeout:void 0,du=typeof Promise=="function"?Promise:void 0,Om=typeof queueMicrotask=="function"?queueMicrotask:typeof du<"u"?function(e){return du.resolve(null).then(e).catch(Am)}:Xi;function Am(e){setTimeout(function(){throw e})}function Zi(e,t){var a=t,l=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(l===0){e.removeChild(d),Qs(t);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=d}while(a);Qs(t)}function hr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}var is=Math.random().toString(36).slice(2),Vt="__reactFiber$"+is,ln="__reactProps$"+is,Jt="__reactContainer$"+is,eo="__reactEvents$"+is,Im="__reactListeners$"+is,Um="__reactHandles$"+is;function Or(e){var t=e[Vt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Jt]||a[Vt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=hu(e);e!==null;){if(a=e[Vt])return a;e=hu(e)}return t}e=a,a=e.parentNode}return null}function cn(e){return e=e[Vt]||e[Jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function os(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function la(e){return e[ln]||null}var to=[],ls=-1;function fr(e){return{current:e}}function Pe(e){0>ls||(e.current=to[ls],to[ls]=null,ls--)}function Ee(e,t){ls++,to[ls]=e.current,e.current=t}var mr={},nt=fr(mr),dt=fr(!1),Ar=mr;function cs(e,t){var a=e.type.contextTypes;if(!a)return mr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in a)d[f]=t[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function ht(e){return e=e.childContextTypes,e!=null}function ca(){Pe(dt),Pe(nt)}function fu(e,t,a){if(nt.current!==mr)throw Error(s(168));Ee(nt,t),Ee(dt,a)}function mu(e,t,a){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return a;l=l.getChildContext();for(var d in l)if(!(d in t))throw Error(s(108,Ne(e)||"Unknown",d));return U({},a,l)}function ua(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mr,Ar=nt.current,Ee(nt,e),Ee(dt,dt.current),!0}function pu(e,t,a){var l=e.stateNode;if(!l)throw Error(s(169));a?(e=mu(e,t,Ar),l.__reactInternalMemoizedMergedChildContext=e,Pe(dt),Pe(nt),Ee(nt,e)):Pe(dt),Ee(dt,a)}var Qt=null,da=!1,ro=!1;function gu(e){Qt===null?Qt=[e]:Qt.push(e)}function $m(e){da=!0,gu(e)}function pr(){if(!ro&&Qt!==null){ro=!0;var e=0,t=Se;try{var a=Qt;for(Se=1;e<a.length;e++){var l=a[e];do l=l(!0);while(l!==null)}Qt=null,da=!1}catch(d){throw Qt!==null&&(Qt=Qt.slice(e+1)),xc(Si,pr),d}finally{Se=t,ro=!1}}return null}var us=[],ds=0,ha=null,fa=0,Et=[],Ct=0,Ir=null,Yt=1,Xt="";function Ur(e,t){us[ds++]=fa,us[ds++]=ha,ha=e,fa=t}function yu(e,t,a){Et[Ct++]=Yt,Et[Ct++]=Xt,Et[Ct++]=Ir,Ir=e;var l=Yt;e=Xt;var d=32-At(l)-1;l&=~(1<<d),a+=1;var f=32-At(t)+d;if(30<f){var g=d-d%5;f=(l&(1<<g)-1).toString(32),l>>=g,d-=g,Yt=1<<32-At(t)+d|a<<d|l,Xt=f+e}else Yt=1<<f|a<<d|l,Xt=e}function so(e){e.return!==null&&(Ur(e,1),yu(e,1,0))}function no(e){for(;e===ha;)ha=us[--ds],us[ds]=null,fa=us[--ds],us[ds]=null;for(;e===Ir;)Ir=Et[--Ct],Et[Ct]=null,Xt=Et[--Ct],Et[Ct]=null,Yt=Et[--Ct],Et[Ct]=null}var xt=null,vt=null,Ie=!1,Ut=null;function xu(e,t){var a=Ot(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,t=e.deletions,t===null?(e.deletions=[a],e.flags|=16):t.push(a)}function vu(e,t){switch(e.tag){case 5:var a=e.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xt=e,vt=hr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xt=e,vt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=Ir!==null?{id:Yt,overflow:Xt}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=Ot(18,null,null,0),a.stateNode=t,a.return=e,e.child=a,xt=e,vt=null,!0):!1;default:return!1}}function ao(e){return(e.mode&1)!==0&&(e.flags&128)===0}function io(e){if(Ie){var t=vt;if(t){var a=t;if(!vu(e,t)){if(ao(e))throw Error(s(418));t=hr(a.nextSibling);var l=xt;t&&vu(e,t)?xu(l,a):(e.flags=e.flags&-4097|2,Ie=!1,xt=e)}}else{if(ao(e))throw Error(s(418));e.flags=e.flags&-4097|2,Ie=!1,xt=e}}}function wu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function ma(e){if(e!==xt)return!1;if(!Ie)return wu(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yi(e.type,e.memoizedProps)),t&&(t=vt)){if(ao(e))throw bu(),Error(s(418));for(;t;)xu(e,t),t=hr(t.nextSibling)}if(wu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(t===0){vt=hr(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}e=e.nextSibling}vt=null}}else vt=xt?hr(e.stateNode.nextSibling):null;return!0}function bu(){for(var e=vt;e;)e=hr(e.nextSibling)}function hs(){vt=xt=null,Ie=!1}function oo(e){Ut===null?Ut=[e]:Ut.push(e)}var Lm=L.ReactCurrentBatchConfig;function un(e,t,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(s(309));var l=a.stateNode}if(!l)throw Error(s(147,e));var d=l,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var b=d.refs;g===null?delete b[f]:b[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(s(284));if(!a._owner)throw Error(s(290,e))}return e}function pa(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _u(e){var t=e._init;return t(e._payload)}function ju(e){function t(A,E){if(e){var I=A.deletions;I===null?(A.deletions=[E],A.flags|=16):I.push(E)}}function a(A,E){if(!e)return null;for(;E!==null;)t(A,E),E=E.sibling;return null}function l(A,E){for(A=new Map;E!==null;)E.key!==null?A.set(E.key,E):A.set(E.index,E),E=E.sibling;return A}function d(A,E){return A=jr(A,E),A.index=0,A.sibling=null,A}function f(A,E,I){return A.index=I,e?(I=A.alternate,I!==null?(I=I.index,I<E?(A.flags|=2,E):I):(A.flags|=2,E)):(A.flags|=1048576,E)}function g(A){return e&&A.alternate===null&&(A.flags|=2),A}function b(A,E,I,V){return E===null||E.tag!==6?(E=Zo(I,A.mode,V),E.return=A,E):(E=d(E,I),E.return=A,E)}function S(A,E,I,V){var se=I.type;return se===Y?B(A,E,I.props.children,V,I.key):E!==null&&(E.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Te&&_u(se)===E.type)?(V=d(E,I.props),V.ref=un(A,E,I),V.return=A,V):(V=Ma(I.type,I.key,I.props,null,A.mode,V),V.ref=un(A,E,I),V.return=A,V)}function $(A,E,I,V){return E===null||E.tag!==4||E.stateNode.containerInfo!==I.containerInfo||E.stateNode.implementation!==I.implementation?(E=el(I,A.mode,V),E.return=A,E):(E=d(E,I.children||[]),E.return=A,E)}function B(A,E,I,V,se){return E===null||E.tag!==7?(E=qr(I,A.mode,V,se),E.return=A,E):(E=d(E,I),E.return=A,E)}function q(A,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Zo(""+E,A.mode,I),E.return=A,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case z:return I=Ma(E.type,E.key,E.props,null,A.mode,I),I.ref=un(A,null,E),I.return=A,I;case H:return E=el(E,A.mode,I),E.return=A,E;case Te:var V=E._init;return q(A,V(E._payload),I)}if(Ds(E)||ae(E))return E=qr(E,A.mode,I,null),E.return=A,E;pa(A,E)}return null}function F(A,E,I,V){var se=E!==null?E.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return se!==null?null:b(A,E,""+I,V);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case z:return I.key===se?S(A,E,I,V):null;case H:return I.key===se?$(A,E,I,V):null;case Te:return se=I._init,F(A,E,se(I._payload),V)}if(Ds(I)||ae(I))return se!==null?null:B(A,E,I,V,null);pa(A,I)}return null}function G(A,E,I,V,se){if(typeof V=="string"&&V!==""||typeof V=="number")return A=A.get(I)||null,b(E,A,""+V,se);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case z:return A=A.get(V.key===null?I:V.key)||null,S(E,A,V,se);case H:return A=A.get(V.key===null?I:V.key)||null,$(E,A,V,se);case Te:var ie=V._init;return G(A,E,I,ie(V._payload),se)}if(Ds(V)||ae(V))return A=A.get(I)||null,B(E,A,V,se,null);pa(E,V)}return null}function X(A,E,I,V){for(var se=null,ie=null,oe=E,de=E=0,Xe=null;oe!==null&&de<I.length;de++){oe.index>de?(Xe=oe,oe=null):Xe=oe.sibling;var je=F(A,oe,I[de],V);if(je===null){oe===null&&(oe=Xe);break}e&&oe&&je.alternate===null&&t(A,oe),E=f(je,E,de),ie===null?se=je:ie.sibling=je,ie=je,oe=Xe}if(de===I.length)return a(A,oe),Ie&&Ur(A,de),se;if(oe===null){for(;de<I.length;de++)oe=q(A,I[de],V),oe!==null&&(E=f(oe,E,de),ie===null?se=oe:ie.sibling=oe,ie=oe);return Ie&&Ur(A,de),se}for(oe=l(A,oe);de<I.length;de++)Xe=G(oe,A,de,I[de],V),Xe!==null&&(e&&Xe.alternate!==null&&oe.delete(Xe.key===null?de:Xe.key),E=f(Xe,E,de),ie===null?se=Xe:ie.sibling=Xe,ie=Xe);return e&&oe.forEach(function(Sr){return t(A,Sr)}),Ie&&Ur(A,de),se}function te(A,E,I,V){var se=ae(I);if(typeof se!="function")throw Error(s(150));if(I=se.call(I),I==null)throw Error(s(151));for(var ie=se=null,oe=E,de=E=0,Xe=null,je=I.next();oe!==null&&!je.done;de++,je=I.next()){oe.index>de?(Xe=oe,oe=null):Xe=oe.sibling;var Sr=F(A,oe,je.value,V);if(Sr===null){oe===null&&(oe=Xe);break}e&&oe&&Sr.alternate===null&&t(A,oe),E=f(Sr,E,de),ie===null?se=Sr:ie.sibling=Sr,ie=Sr,oe=Xe}if(je.done)return a(A,oe),Ie&&Ur(A,de),se;if(oe===null){for(;!je.done;de++,je=I.next())je=q(A,je.value,V),je!==null&&(E=f(je,E,de),ie===null?se=je:ie.sibling=je,ie=je);return Ie&&Ur(A,de),se}for(oe=l(A,oe);!je.done;de++,je=I.next())je=G(oe,A,de,je.value,V),je!==null&&(e&&je.alternate!==null&&oe.delete(je.key===null?de:je.key),E=f(je,E,de),ie===null?se=je:ie.sibling=je,ie=je);return e&&oe.forEach(function(gp){return t(A,gp)}),Ie&&Ur(A,de),se}function Be(A,E,I,V){if(typeof I=="object"&&I!==null&&I.type===Y&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case z:e:{for(var se=I.key,ie=E;ie!==null;){if(ie.key===se){if(se=I.type,se===Y){if(ie.tag===7){a(A,ie.sibling),E=d(ie,I.props.children),E.return=A,A=E;break e}}else if(ie.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Te&&_u(se)===ie.type){a(A,ie.sibling),E=d(ie,I.props),E.ref=un(A,ie,I),E.return=A,A=E;break e}a(A,ie);break}else t(A,ie);ie=ie.sibling}I.type===Y?(E=qr(I.props.children,A.mode,V,I.key),E.return=A,A=E):(V=Ma(I.type,I.key,I.props,null,A.mode,V),V.ref=un(A,E,I),V.return=A,A=V)}return g(A);case H:e:{for(ie=I.key;E!==null;){if(E.key===ie)if(E.tag===4&&E.stateNode.containerInfo===I.containerInfo&&E.stateNode.implementation===I.implementation){a(A,E.sibling),E=d(E,I.children||[]),E.return=A,A=E;break e}else{a(A,E);break}else t(A,E);E=E.sibling}E=el(I,A.mode,V),E.return=A,A=E}return g(A);case Te:return ie=I._init,Be(A,E,ie(I._payload),V)}if(Ds(I))return X(A,E,I,V);if(ae(I))return te(A,E,I,V);pa(A,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,E!==null&&E.tag===6?(a(A,E.sibling),E=d(E,I),E.return=A,A=E):(a(A,E),E=Zo(I,A.mode,V),E.return=A,A=E),g(A)):a(A,E)}return Be}var fs=ju(!0),Su=ju(!1),ga=fr(null),ya=null,ms=null,lo=null;function co(){lo=ms=ya=null}function uo(e){var t=ga.current;Pe(ga),e._currentValue=t}function ho(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function ps(e,t){ya=e,lo=ms=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ft=!0),e.firstContext=null)}function Tt(e){var t=e._currentValue;if(lo!==e)if(e={context:e,memoizedValue:t,next:null},ms===null){if(ya===null)throw Error(s(308));ms=e,ya.dependencies={lanes:0,firstContext:e}}else ms=ms.next=e;return t}var $r=null;function fo(e){$r===null?$r=[e]:$r.push(e)}function Nu(e,t,a,l){var d=t.interleaved;return d===null?(a.next=a,fo(t)):(a.next=d.next,d.next=a),t.interleaved=a,Zt(e,l)}function Zt(e,t){e.lanes|=t;var a=e.alternate;for(a!==null&&(a.lanes|=t),a=e,e=e.return;e!==null;)e.childLanes|=t,a=e.alternate,a!==null&&(a.childLanes|=t),a=e,e=e.return;return a.tag===3?a.stateNode:null}var gr=!1;function mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ku(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function er(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yr(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(be&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,Zt(e,a)}return d=l.interleaved,d===null?(t.next=t,fo(l)):(t.next=d.next,d.next=t),l.interleaved=t,Zt(e,a)}function xa(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Ei(e,a)}}function Eu(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var g={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?d=f=g:f=f.next=g,a=a.next}while(a!==null);f===null?d=f=t:f=f.next=t}else d=f=t;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function va(e,t,a,l){var d=e.updateQueue;gr=!1;var f=d.firstBaseUpdate,g=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var S=b,$=S.next;S.next=null,g===null?f=$:g.next=$,g=S;var B=e.alternate;B!==null&&(B=B.updateQueue,b=B.lastBaseUpdate,b!==g&&(b===null?B.firstBaseUpdate=$:b.next=$,B.lastBaseUpdate=S))}if(f!==null){var q=d.baseState;g=0,B=$=S=null,b=f;do{var F=b.lane,G=b.eventTime;if((l&F)===F){B!==null&&(B=B.next={eventTime:G,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var X=e,te=b;switch(F=t,G=a,te.tag){case 1:if(X=te.payload,typeof X=="function"){q=X.call(G,q,F);break e}q=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=te.payload,F=typeof X=="function"?X.call(G,q,F):X,F==null)break e;q=U({},q,F);break e;case 2:gr=!0}}b.callback!==null&&b.lane!==0&&(e.flags|=64,F=d.effects,F===null?d.effects=[b]:F.push(b))}else G={eventTime:G,lane:F,tag:b.tag,payload:b.payload,callback:b.callback,next:null},B===null?($=B=G,S=q):B=B.next=G,g|=F;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;F=b,b=F.next,F.next=null,d.lastBaseUpdate=F,d.shared.pending=null}}while(!0);if(B===null&&(S=q),d.baseState=S,d.firstBaseUpdate=$,d.lastBaseUpdate=B,t=d.shared.interleaved,t!==null){d=t;do g|=d.lane,d=d.next;while(d!==t)}else f===null&&(d.shared.lanes=0);Mr|=g,e.lanes=g,e.memoizedState=q}}function Cu(e,t,a){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],d=l.callback;if(d!==null){if(l.callback=null,l=a,typeof d!="function")throw Error(s(191,d));d.call(l)}}}var dn={},Wt=fr(dn),hn=fr(dn),fn=fr(dn);function Lr(e){if(e===dn)throw Error(s(174));return e}function po(e,t){switch(Ee(fn,t),Ee(hn,e),Ee(Wt,dn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pi(t,e)}Pe(Wt),Ee(Wt,t)}function gs(){Pe(Wt),Pe(hn),Pe(fn)}function Tu(e){Lr(fn.current);var t=Lr(Wt.current),a=pi(t,e.type);t!==a&&(Ee(hn,e),Ee(Wt,a))}function go(e){hn.current===e&&(Pe(Wt),Pe(hn))}var Ue=fr(0);function wa(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yo=[];function xo(){for(var e=0;e<yo.length;e++)yo[e]._workInProgressVersionPrimary=null;yo.length=0}var ba=L.ReactCurrentDispatcher,vo=L.ReactCurrentBatchConfig,Dr=0,$e=null,He=null,Qe=null,_a=!1,mn=!1,pn=0,Dm=0;function at(){throw Error(s(321))}function wo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!It(e[a],t[a]))return!1;return!0}function bo(e,t,a,l,d,f){if(Dr=f,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ba.current=e===null||e.memoizedState===null?Bm:qm,e=a(l,d),mn){f=0;do{if(mn=!1,pn=0,25<=f)throw Error(s(301));f+=1,Qe=He=null,t.updateQueue=null,ba.current=Vm,e=a(l,d)}while(mn)}if(ba.current=Na,t=He!==null&&He.next!==null,Dr=0,Qe=He=$e=null,_a=!1,t)throw Error(s(300));return e}function _o(){var e=pn!==0;return pn=0,e}function Ht(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?$e.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Rt(){if(He===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Qe===null?$e.memoizedState:Qe.next;if(t!==null)Qe=t,He=e;else{if(e===null)throw Error(s(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Qe===null?$e.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function gn(e,t){return typeof t=="function"?t(e):t}function jo(e){var t=Rt(),a=t.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=He,d=l.baseQueue,f=a.pending;if(f!==null){if(d!==null){var g=d.next;d.next=f.next,f.next=g}l.baseQueue=d=f,a.pending=null}if(d!==null){f=d.next,l=l.baseState;var b=g=null,S=null,$=f;do{var B=$.lane;if((Dr&B)===B)S!==null&&(S=S.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),l=$.hasEagerState?$.eagerState:e(l,$.action);else{var q={lane:B,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};S===null?(b=S=q,g=l):S=S.next=q,$e.lanes|=B,Mr|=B}$=$.next}while($!==null&&$!==f);S===null?g=l:S.next=b,It(l,t.memoizedState)||(ft=!0),t.memoizedState=l,t.baseState=g,t.baseQueue=S,a.lastRenderedState=l}if(e=a.interleaved,e!==null){d=e;do f=d.lane,$e.lanes|=f,Mr|=f,d=d.next;while(d!==e)}else d===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function So(e){var t=Rt(),a=t.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,d=a.pending,f=t.memoizedState;if(d!==null){a.pending=null;var g=d=d.next;do f=e(f,g.action),g=g.next;while(g!==d);It(f,t.memoizedState)||(ft=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),a.lastRenderedState=f}return[f,l]}function Ru(){}function Pu(e,t){var a=$e,l=Rt(),d=t(),f=!It(l.memoizedState,d);if(f&&(l.memoizedState=d,ft=!0),l=l.queue,No(Iu.bind(null,a,l,e),[e]),l.getSnapshot!==t||f||Qe!==null&&Qe.memoizedState.tag&1){if(a.flags|=2048,yn(9,Au.bind(null,a,l,d,t),void 0,null),Ye===null)throw Error(s(349));(Dr&30)!==0||Ou(a,t,d)}return d}function Ou(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Au(e,t,a,l){t.value=a,t.getSnapshot=l,Uu(t)&&$u(e)}function Iu(e,t,a){return a(function(){Uu(t)&&$u(e)})}function Uu(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!It(e,a)}catch{return!0}}function $u(e){var t=Zt(e,1);t!==null&&Mt(t,e,1,-1)}function Lu(e){var t=Ht();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gn,lastRenderedState:e},t.queue=e,e=e.dispatch=Fm.bind(null,$e,e),[t.memoizedState,e]}function yn(e,t,a,l){return e={tag:e,create:t,destroy:a,deps:l,next:null},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.lastEffect=e.next=e):(a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e)),e}function Du(){return Rt().memoizedState}function ja(e,t,a,l){var d=Ht();$e.flags|=e,d.memoizedState=yn(1|t,a,void 0,l===void 0?null:l)}function Sa(e,t,a,l){var d=Rt();l=l===void 0?null:l;var f=void 0;if(He!==null){var g=He.memoizedState;if(f=g.destroy,l!==null&&wo(l,g.deps)){d.memoizedState=yn(t,a,f,l);return}}$e.flags|=e,d.memoizedState=yn(1|t,a,f,l)}function Mu(e,t){return ja(8390656,8,e,t)}function No(e,t){return Sa(2048,8,e,t)}function zu(e,t){return Sa(4,2,e,t)}function Fu(e,t){return Sa(4,4,e,t)}function Bu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qu(e,t,a){return a=a!=null?a.concat([e]):null,Sa(4,4,Bu.bind(null,t,e),a)}function ko(){}function Vu(e,t){var a=Rt();t=t===void 0?null:t;var l=a.memoizedState;return l!==null&&t!==null&&wo(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function Wu(e,t){var a=Rt();t=t===void 0?null:t;var l=a.memoizedState;return l!==null&&t!==null&&wo(t,l[1])?l[0]:(e=e(),a.memoizedState=[e,t],e)}function Hu(e,t,a){return(Dr&21)===0?(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=a):(It(a,t)||(a=_c(),$e.lanes|=a,Mr|=a,e.baseState=!0),t)}function Mm(e,t){var a=Se;Se=a!==0&&4>a?a:4,e(!0);var l=vo.transition;vo.transition={};try{e(!1),t()}finally{Se=a,vo.transition=l}}function Ku(){return Rt().memoizedState}function zm(e,t,a){var l=br(e);if(a={lane:l,action:a,hasEagerState:!1,eagerState:null,next:null},Gu(e))Ju(t,a);else if(a=Nu(e,t,a,l),a!==null){var d=ut();Mt(a,e,l,d),Qu(a,t,l)}}function Fm(e,t,a){var l=br(e),d={lane:l,action:a,hasEagerState:!1,eagerState:null,next:null};if(Gu(e))Ju(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,b=f(g,a);if(d.hasEagerState=!0,d.eagerState=b,It(b,g)){var S=t.interleaved;S===null?(d.next=d,fo(t)):(d.next=S.next,S.next=d),t.interleaved=d;return}}catch{}a=Nu(e,t,d,l),a!==null&&(d=ut(),Mt(a,e,l,d),Qu(a,t,l))}}function Gu(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function Ju(e,t){mn=_a=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Qu(e,t,a){if((a&4194240)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Ei(e,a)}}var Na={readContext:Tt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},Bm={readContext:Tt,useCallback:function(e,t){return Ht().memoizedState=[e,t===void 0?null:t],e},useContext:Tt,useEffect:Mu,useImperativeHandle:function(e,t,a){return a=a!=null?a.concat([e]):null,ja(4194308,4,Bu.bind(null,t,e),a)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var a=Ht();return t=t===void 0?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var l=Ht();return t=a!==void 0?a(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=zm.bind(null,$e,e),[l.memoizedState,e]},useRef:function(e){var t=Ht();return e={current:e},t.memoizedState=e},useState:Lu,useDebugValue:ko,useDeferredValue:function(e){return Ht().memoizedState=e},useTransition:function(){var e=Lu(!1),t=e[0];return e=Mm.bind(null,e[1]),Ht().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var l=$e,d=Ht();if(Ie){if(a===void 0)throw Error(s(407));a=a()}else{if(a=t(),Ye===null)throw Error(s(349));(Dr&30)!==0||Ou(l,t,a)}d.memoizedState=a;var f={value:a,getSnapshot:t};return d.queue=f,Mu(Iu.bind(null,l,f,e),[e]),l.flags|=2048,yn(9,Au.bind(null,l,f,a,t),void 0,null),a},useId:function(){var e=Ht(),t=Ye.identifierPrefix;if(Ie){var a=Xt,l=Yt;a=(l&~(1<<32-At(l)-1)).toString(32)+a,t=":"+t+"R"+a,a=pn++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=Dm++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qm={readContext:Tt,useCallback:Vu,useContext:Tt,useEffect:No,useImperativeHandle:qu,useInsertionEffect:zu,useLayoutEffect:Fu,useMemo:Wu,useReducer:jo,useRef:Du,useState:function(){return jo(gn)},useDebugValue:ko,useDeferredValue:function(e){var t=Rt();return Hu(t,He.memoizedState,e)},useTransition:function(){var e=jo(gn)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:Ru,useSyncExternalStore:Pu,useId:Ku,unstable_isNewReconciler:!1},Vm={readContext:Tt,useCallback:Vu,useContext:Tt,useEffect:No,useImperativeHandle:qu,useInsertionEffect:zu,useLayoutEffect:Fu,useMemo:Wu,useReducer:So,useRef:Du,useState:function(){return So(gn)},useDebugValue:ko,useDeferredValue:function(e){var t=Rt();return He===null?t.memoizedState=e:Hu(t,He.memoizedState,e)},useTransition:function(){var e=So(gn)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:Ru,useSyncExternalStore:Pu,useId:Ku,unstable_isNewReconciler:!1};function $t(e,t){if(e&&e.defaultProps){t=U({},t),e=e.defaultProps;for(var a in e)t[a]===void 0&&(t[a]=e[a]);return t}return t}function Eo(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:U({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ka={isMounted:function(e){return(e=e._reactInternals)?Pr(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var l=ut(),d=br(e),f=er(l,d);f.payload=t,a!=null&&(f.callback=a),t=yr(e,f,d),t!==null&&(Mt(t,e,d,l),xa(t,e,d))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=ut(),d=br(e),f=er(l,d);f.tag=1,f.payload=t,a!=null&&(f.callback=a),t=yr(e,f,d),t!==null&&(Mt(t,e,d,l),xa(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ut(),l=br(e),d=er(a,l);d.tag=2,t!=null&&(d.callback=t),t=yr(e,d,l),t!==null&&(Mt(t,e,l,a),xa(t,e,l))}};function Yu(e,t,a,l,d,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,g):t.prototype&&t.prototype.isPureReactComponent?!rn(a,l)||!rn(d,f):!0}function Xu(e,t,a){var l=!1,d=mr,f=t.contextType;return typeof f=="object"&&f!==null?f=Tt(f):(d=ht(t)?Ar:nt.current,l=t.contextTypes,f=(l=l!=null)?cs(e,d):mr),t=new t(a,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ka,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),t}function Zu(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&ka.enqueueReplaceState(t,t.state,null)}function Co(e,t,a,l){var d=e.stateNode;d.props=a,d.state=e.memoizedState,d.refs={},mo(e);var f=t.contextType;typeof f=="object"&&f!==null?d.context=Tt(f):(f=ht(t)?Ar:nt.current,d.context=cs(e,f)),d.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Eo(e,t,f,a),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&ka.enqueueReplaceState(d,d.state,null),va(e,a,d,l),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function ys(e,t){try{var a="",l=t;do a+=xe(l),l=l.return;while(l);var d=a}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:d,digest:null}}function To(e,t,a){return{value:e,source:null,stack:a??null,digest:t??null}}function Ro(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var Wm=typeof WeakMap=="function"?WeakMap:Map;function ed(e,t,a){a=er(-1,a),a.tag=3,a.payload={element:null};var l=t.value;return a.callback=function(){Aa||(Aa=!0,Wo=l),Ro(e,t)},a}function td(e,t,a){a=er(-1,a),a.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var d=t.value;a.payload=function(){return l(d)},a.callback=function(){Ro(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){Ro(e,t),typeof l!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),a}function rd(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Wm;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(a)||(d.add(a),e=ap.bind(null,e,t,a),t.then(e,e))}function sd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function nd(e,t,a,l,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=er(-1,1),t.tag=2,yr(a,t,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Hm=L.ReactCurrentOwner,ft=!1;function ct(e,t,a,l){t.child=e===null?Su(t,null,a,l):fs(t,e.child,a,l)}function ad(e,t,a,l,d){a=a.render;var f=t.ref;return ps(t,d),l=bo(e,t,a,l,f,d),a=_o(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,tr(e,t,d)):(Ie&&a&&so(t),t.flags|=1,ct(e,t,l,d),t.child)}function id(e,t,a,l,d){if(e===null){var f=a.type;return typeof f=="function"&&!Xo(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=f,od(e,t,f,l,d)):(e=Ma(a.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&d)===0){var g=f.memoizedProps;if(a=a.compare,a=a!==null?a:rn,a(g,l)&&e.ref===t.ref)return tr(e,t,d)}return t.flags|=1,e=jr(f,l),e.ref=t.ref,e.return=t,t.child=e}function od(e,t,a,l,d){if(e!==null){var f=e.memoizedProps;if(rn(f,l)&&e.ref===t.ref)if(ft=!1,t.pendingProps=l=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(ft=!0);else return t.lanes=e.lanes,tr(e,t,d)}return Po(e,t,a,l,d)}function ld(e,t,a){var l=t.pendingProps,d=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(vs,wt),wt|=a;else{if((a&1073741824)===0)return e=f!==null?f.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(vs,wt),wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:a,Ee(vs,wt),wt|=l}else f!==null?(l=f.baseLanes|a,t.memoizedState=null):l=a,Ee(vs,wt),wt|=l;return ct(e,t,d,a),t.child}function cd(e,t){var a=t.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function Po(e,t,a,l,d){var f=ht(a)?Ar:nt.current;return f=cs(t,f),ps(t,d),a=bo(e,t,a,l,f,d),l=_o(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,tr(e,t,d)):(Ie&&l&&so(t),t.flags|=1,ct(e,t,a,d),t.child)}function ud(e,t,a,l,d){if(ht(a)){var f=!0;ua(t)}else f=!1;if(ps(t,d),t.stateNode===null)Ca(e,t),Xu(t,a,l),Co(t,a,l,d),l=!0;else if(e===null){var g=t.stateNode,b=t.memoizedProps;g.props=b;var S=g.context,$=a.contextType;typeof $=="object"&&$!==null?$=Tt($):($=ht(a)?Ar:nt.current,$=cs(t,$));var B=a.getDerivedStateFromProps,q=typeof B=="function"||typeof g.getSnapshotBeforeUpdate=="function";q||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==l||S!==$)&&Zu(t,g,l,$),gr=!1;var F=t.memoizedState;g.state=F,va(t,l,g,d),S=t.memoizedState,b!==l||F!==S||dt.current||gr?(typeof B=="function"&&(Eo(t,a,B,l),S=t.memoizedState),(b=gr||Yu(t,a,b,l,F,S,$))?(q||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=S),g.props=l,g.state=S,g.context=$,l=b):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{g=t.stateNode,ku(e,t),b=t.memoizedProps,$=t.type===t.elementType?b:$t(t.type,b),g.props=$,q=t.pendingProps,F=g.context,S=a.contextType,typeof S=="object"&&S!==null?S=Tt(S):(S=ht(a)?Ar:nt.current,S=cs(t,S));var G=a.getDerivedStateFromProps;(B=typeof G=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==q||F!==S)&&Zu(t,g,l,S),gr=!1,F=t.memoizedState,g.state=F,va(t,l,g,d);var X=t.memoizedState;b!==q||F!==X||dt.current||gr?(typeof G=="function"&&(Eo(t,a,G,l),X=t.memoizedState),($=gr||Yu(t,a,$,l,F,X,S)||!1)?(B||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,X,S),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,X,S)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=X),g.props=l,g.state=X,g.context=S,l=$):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),l=!1)}return Oo(e,t,a,l,f,d)}function Oo(e,t,a,l,d,f){cd(e,t);var g=(t.flags&128)!==0;if(!l&&!g)return d&&pu(t,a,!1),tr(e,t,f);l=t.stateNode,Hm.current=t;var b=g&&typeof a.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&g?(t.child=fs(t,e.child,null,f),t.child=fs(t,null,b,f)):ct(e,t,b,f),t.memoizedState=l.state,d&&pu(t,a,!0),t.child}function dd(e){var t=e.stateNode;t.pendingContext?fu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fu(e,t.context,!1),po(e,t.containerInfo)}function hd(e,t,a,l,d){return hs(),oo(d),t.flags|=256,ct(e,t,a,l),t.child}var Ao={dehydrated:null,treeContext:null,retryLane:0};function Io(e){return{baseLanes:e,cachePool:null,transitions:null}}function fd(e,t,a){var l=t.pendingProps,d=Ue.current,f=!1,g=(t.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(d&2)!==0),b?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Ee(Ue,d&1),e===null)return io(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=l.children,e=l.fallback,f?(l=t.mode,f=t.child,g={mode:"hidden",children:g},(l&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=za(g,l,0,null),e=qr(e,l,a,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Io(a),t.memoizedState=Ao,e):Uo(t,g));if(d=e.memoizedState,d!==null&&(b=d.dehydrated,b!==null))return Km(e,t,g,l,b,d,a);if(f){f=l.fallback,g=t.mode,d=e.child,b=d.sibling;var S={mode:"hidden",children:l.children};return(g&1)===0&&t.child!==d?(l=t.child,l.childLanes=0,l.pendingProps=S,t.deletions=null):(l=jr(d,S),l.subtreeFlags=d.subtreeFlags&14680064),b!==null?f=jr(b,f):(f=qr(f,g,a,null),f.flags|=2),f.return=t,l.return=t,l.sibling=f,t.child=l,l=f,f=t.child,g=e.child.memoizedState,g=g===null?Io(a):{baseLanes:g.baseLanes|a,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~a,t.memoizedState=Ao,l}return f=e.child,e=f.sibling,l=jr(f,{mode:"visible",children:l.children}),(t.mode&1)===0&&(l.lanes=a),l.return=t,l.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=l,t.memoizedState=null,l}function Uo(e,t){return t=za({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ea(e,t,a,l){return l!==null&&oo(l),fs(t,e.child,null,a),e=Uo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Km(e,t,a,l,d,f,g){if(a)return t.flags&256?(t.flags&=-257,l=To(Error(s(422))),Ea(e,t,g,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=l.fallback,d=t.mode,l=za({mode:"visible",children:l.children},d,0,null),f=qr(f,d,g,null),f.flags|=2,l.return=t,f.return=t,l.sibling=f,t.child=l,(t.mode&1)!==0&&fs(t,e.child,null,g),t.child.memoizedState=Io(g),t.memoizedState=Ao,f);if((t.mode&1)===0)return Ea(e,t,g,null);if(d.data==="$!"){if(l=d.nextSibling&&d.nextSibling.dataset,l)var b=l.dgst;return l=b,f=Error(s(419)),l=To(f,l,void 0),Ea(e,t,g,l)}if(b=(g&e.childLanes)!==0,ft||b){if(l=Ye,l!==null){switch(g&-g){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(l.suspendedLanes|g))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Zt(e,d),Mt(l,e,d,-1))}return Yo(),l=To(Error(s(421))),Ea(e,t,g,l)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=ip.bind(null,e),d._reactRetry=t,null):(e=f.treeContext,vt=hr(d.nextSibling),xt=t,Ie=!0,Ut=null,e!==null&&(Et[Ct++]=Yt,Et[Ct++]=Xt,Et[Ct++]=Ir,Yt=e.id,Xt=e.overflow,Ir=t),t=Uo(t,l.children),t.flags|=4096,t)}function md(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),ho(e.return,t,a)}function $o(e,t,a,l,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=d)}function pd(e,t,a){var l=t.pendingProps,d=l.revealOrder,f=l.tail;if(ct(e,t,l.children,a),l=Ue.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&md(e,a,t);else if(e.tag===19)md(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ee(Ue,l),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(a=t.child,d=null;a!==null;)e=a.alternate,e!==null&&wa(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=t.child,t.child=null):(d=a.sibling,a.sibling=null),$o(t,!1,d,a,f);break;case"backwards":for(a=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&wa(e)===null){t.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}$o(t,!0,a,null,f);break;case"together":$o(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ca(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function tr(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Mr|=t.lanes,(a&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,a=jr(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=jr(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Gm(e,t,a){switch(t.tag){case 3:dd(t),hs();break;case 5:Tu(t);break;case 1:ht(t.type)&&ua(t);break;case 4:po(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,d=t.memoizedProps.value;Ee(ga,l._currentValue),l._currentValue=d;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Ee(Ue,Ue.current&1),t.flags|=128,null):(a&t.child.childLanes)!==0?fd(e,t,a):(Ee(Ue,Ue.current&1),e=tr(e,t,a),e!==null?e.sibling:null);Ee(Ue,Ue.current&1);break;case 19:if(l=(a&t.childLanes)!==0,(e.flags&128)!==0){if(l)return pd(e,t,a);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ee(Ue,Ue.current),l)break;return null;case 22:case 23:return t.lanes=0,ld(e,t,a)}return tr(e,t,a)}var gd,Lo,yd,xd;gd=function(e,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Lo=function(){},yd=function(e,t,a,l){var d=e.memoizedProps;if(d!==l){e=t.stateNode,Lr(Wt.current);var f=null;switch(a){case"input":d=di(e,d),l=di(e,l),f=[];break;case"select":d=U({},d,{value:void 0}),l=U({},l,{value:void 0}),f=[];break;case"textarea":d=mi(e,d),l=mi(e,l),f=[];break;default:typeof d.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=oa)}gi(a,l);var g;a=null;for($ in d)if(!l.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var b=d[$];for(g in b)b.hasOwnProperty(g)&&(a||(a={}),a[g]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(c.hasOwnProperty($)?f||(f=[]):(f=f||[]).push($,null));for($ in l){var S=l[$];if(b=d?.[$],l.hasOwnProperty($)&&S!==b&&(S!=null||b!=null))if($==="style")if(b){for(g in b)!b.hasOwnProperty(g)||S&&S.hasOwnProperty(g)||(a||(a={}),a[g]="");for(g in S)S.hasOwnProperty(g)&&b[g]!==S[g]&&(a||(a={}),a[g]=S[g])}else a||(f||(f=[]),f.push($,a)),a=S;else $==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,b=b?b.__html:void 0,S!=null&&b!==S&&(f=f||[]).push($,S)):$==="children"?typeof S!="string"&&typeof S!="number"||(f=f||[]).push($,""+S):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(c.hasOwnProperty($)?(S!=null&&$==="onScroll"&&Re("scroll",e),f||b===S||(f=[])):(f=f||[]).push($,S))}a&&(f=f||[]).push("style",a);var $=f;(t.updateQueue=$)&&(t.flags|=4)}},xd=function(e,t,a,l){a!==l&&(t.flags|=4)};function xn(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&14680064,l|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function Jm(e,t,a){var l=t.pendingProps;switch(no(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return ht(t.type)&&ca(),it(t),null;case 3:return l=t.stateNode,gs(),Pe(dt),Pe(nt),xo(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(ma(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ut!==null&&(Go(Ut),Ut=null))),Lo(e,t),it(t),null;case 5:go(t);var d=Lr(fn.current);if(a=t.type,e!==null&&t.stateNode!=null)yd(e,t,a,l,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(s(166));return it(t),null}if(e=Lr(Wt.current),ma(t)){l=t.stateNode,a=t.type;var f=t.memoizedProps;switch(l[Vt]=t,l[ln]=f,e=(t.mode&1)!==0,a){case"dialog":Re("cancel",l),Re("close",l);break;case"iframe":case"object":case"embed":Re("load",l);break;case"video":case"audio":for(d=0;d<nn.length;d++)Re(nn[d],l);break;case"source":Re("error",l);break;case"img":case"image":case"link":Re("error",l),Re("load",l);break;case"details":Re("toggle",l);break;case"input":Xl(l,f),Re("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},Re("invalid",l);break;case"textarea":tc(l,f),Re("invalid",l)}gi(a,f),d=null;for(var g in f)if(f.hasOwnProperty(g)){var b=f[g];g==="children"?typeof b=="string"?l.textContent!==b&&(f.suppressHydrationWarning!==!0&&ia(l.textContent,b,e),d=["children",b]):typeof b=="number"&&l.textContent!==""+b&&(f.suppressHydrationWarning!==!0&&ia(l.textContent,b,e),d=["children",""+b]):c.hasOwnProperty(g)&&b!=null&&g==="onScroll"&&Re("scroll",l)}switch(a){case"input":De(l),ec(l,f,!0);break;case"textarea":De(l),sc(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=oa)}l=d,t.updateQueue=l,l!==null&&(t.flags|=4)}else{g=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nc(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=g.createElement(a,{is:l.is}):(e=g.createElement(a),a==="select"&&(g=e,l.multiple?g.multiple=!0:l.size&&(g.size=l.size))):e=g.createElementNS(e,a),e[Vt]=t,e[ln]=l,gd(e,t,!1,!1),t.stateNode=e;e:{switch(g=yi(a,l),a){case"dialog":Re("cancel",e),Re("close",e),d=l;break;case"iframe":case"object":case"embed":Re("load",e),d=l;break;case"video":case"audio":for(d=0;d<nn.length;d++)Re(nn[d],e);d=l;break;case"source":Re("error",e),d=l;break;case"img":case"image":case"link":Re("error",e),Re("load",e),d=l;break;case"details":Re("toggle",e),d=l;break;case"input":Xl(e,l),d=di(e,l),Re("invalid",e);break;case"option":d=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},d=U({},l,{value:void 0}),Re("invalid",e);break;case"textarea":tc(e,l),d=mi(e,l),Re("invalid",e);break;default:d=l}gi(a,d),b=d;for(f in b)if(b.hasOwnProperty(f)){var S=b[f];f==="style"?oc(e,S):f==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&ac(e,S)):f==="children"?typeof S=="string"?(a!=="textarea"||S!=="")&&Ms(e,S):typeof S=="number"&&Ms(e,""+S):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(c.hasOwnProperty(f)?S!=null&&f==="onScroll"&&Re("scroll",e):S!=null&&O(e,f,S,g))}switch(a){case"input":De(e),ec(e,l,!1);break;case"textarea":De(e),sc(e);break;case"option":l.value!=null&&e.setAttribute("value",""+D(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?Yr(e,!!l.multiple,f,!1):l.defaultValue!=null&&Yr(e,!!l.multiple,l.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=oa)}switch(a){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return it(t),null;case 6:if(e&&t.stateNode!=null)xd(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(a=Lr(fn.current),Lr(Wt.current),ma(t)){if(l=t.stateNode,a=t.memoizedProps,l[Vt]=t,(f=l.nodeValue!==a)&&(e=xt,e!==null))switch(e.tag){case 3:ia(l.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ia(l.nodeValue,a,(e.mode&1)!==0)}f&&(t.flags|=4)}else l=(a.nodeType===9?a:a.ownerDocument).createTextNode(l),l[Vt]=t,t.stateNode=l}return it(t),null;case 13:if(Pe(Ue),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&vt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)bu(),hs(),t.flags|=98560,f=!1;else if(f=ma(t),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Vt]=t}else hs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;it(t),f=!1}else Ut!==null&&(Go(Ut),Ut=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=a,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ue.current&1)!==0?Ke===0&&(Ke=3):Yo())),t.updateQueue!==null&&(t.flags|=4),it(t),null);case 4:return gs(),Lo(e,t),e===null&&an(t.stateNode.containerInfo),it(t),null;case 10:return uo(t.type._context),it(t),null;case 17:return ht(t.type)&&ca(),it(t),null;case 19:if(Pe(Ue),f=t.memoizedState,f===null)return it(t),null;if(l=(t.flags&128)!==0,g=f.rendering,g===null)if(l)xn(f,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=wa(e),g!==null){for(t.flags|=128,xn(f,!1),l=g.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=a,a=t.child;a!==null;)f=a,e=l,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Ee(Ue,Ue.current&1|2),t.child}e=e.sibling}f.tail!==null&&Fe()>ws&&(t.flags|=128,l=!0,xn(f,!1),t.lanes=4194304)}else{if(!l)if(e=wa(g),e!==null){if(t.flags|=128,l=!0,a=e.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),xn(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ie)return it(t),null}else 2*Fe()-f.renderingStartTime>ws&&a!==1073741824&&(t.flags|=128,l=!0,xn(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(a=f.last,a!==null?a.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Fe(),t.sibling=null,a=Ue.current,Ee(Ue,l?a&1|2:a&1),t):(it(t),null);case 22:case 23:return Qo(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&(t.mode&1)!==0?(wt&1073741824)!==0&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function Qm(e,t){switch(no(t),t.tag){case 1:return ht(t.type)&&ca(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gs(),Pe(dt),Pe(nt),xo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return go(t),null;case 13:if(Pe(Ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));hs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Ue),null;case 4:return gs(),null;case 10:return uo(t.type._context),null;case 22:case 23:return Qo(),null;case 24:return null;default:return null}}var Ta=!1,ot=!1,Ym=typeof WeakSet=="function"?WeakSet:Set,Q=null;function xs(e,t){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(l){Me(e,t,l)}else a.current=null}function Do(e,t,a){try{a()}catch(l){Me(e,t,l)}}var vd=!1;function Xm(e,t){if(Ji=Jn,e=Yc(),Fi(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var g=0,b=-1,S=-1,$=0,B=0,q=e,F=null;t:for(;;){for(var G;q!==a||d!==0&&q.nodeType!==3||(b=g+d),q!==f||l!==0&&q.nodeType!==3||(S=g+l),q.nodeType===3&&(g+=q.nodeValue.length),(G=q.firstChild)!==null;)F=q,q=G;for(;;){if(q===e)break t;if(F===a&&++$===d&&(b=g),F===f&&++B===l&&(S=g),(G=q.nextSibling)!==null)break;q=F,F=q.parentNode}q=G}a=b===-1||S===-1?null:{start:b,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qi={focusedElem:e,selectionRange:a},Jn=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var X=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var te=X.memoizedProps,Be=X.memoizedState,A=t.stateNode,E=A.getSnapshotBeforeUpdate(t.elementType===t.type?te:$t(t.type,te),Be);A.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var I=t.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(V){Me(t,t.return,V)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return X=vd,vd=!1,X}function vn(e,t,a){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&Do(t,a,f)}d=d.next}while(d!==l)}}function Ra(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&e)===e){var l=a.create;a.destroy=l()}a=a.next}while(a!==t)}}function Mo(e){var t=e.ref;if(t!==null){var a=e.stateNode;e.tag,e=a,typeof t=="function"?t(e):t.current=e}}function wd(e){var t=e.alternate;t!==null&&(e.alternate=null,wd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vt],delete t[ln],delete t[eo],delete t[Im],delete t[Um])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bd(e){return e.tag===5||e.tag===3||e.tag===4}function _d(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zo(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(e,a)):(t=a,t.appendChild(e)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=oa));else if(l!==4&&(e=e.child,e!==null))for(zo(e,t,a),e=e.sibling;e!==null;)zo(e,t,a),e=e.sibling}function Fo(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Fo(e,t,a),e=e.sibling;e!==null;)Fo(e,t,a),e=e.sibling}var Ze=null,Lt=!1;function xr(e,t,a){for(a=a.child;a!==null;)jd(e,t,a),a=a.sibling}function jd(e,t,a){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(qn,a)}catch{}switch(a.tag){case 5:ot||xs(a,t);case 6:var l=Ze,d=Lt;Ze=null,xr(e,t,a),Ze=l,Lt=d,Ze!==null&&(Lt?(e=Ze,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):Ze.removeChild(a.stateNode));break;case 18:Ze!==null&&(Lt?(e=Ze,a=a.stateNode,e.nodeType===8?Zi(e.parentNode,a):e.nodeType===1&&Zi(e,a),Qs(e)):Zi(Ze,a.stateNode));break;case 4:l=Ze,d=Lt,Ze=a.stateNode.containerInfo,Lt=!0,xr(e,t,a),Ze=l,Lt=d;break;case 0:case 11:case 14:case 15:if(!ot&&(l=a.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){d=l=l.next;do{var f=d,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&Do(a,t,g),d=d.next}while(d!==l)}xr(e,t,a);break;case 1:if(!ot&&(xs(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=a.memoizedProps,l.state=a.memoizedState,l.componentWillUnmount()}catch(b){Me(a,t,b)}xr(e,t,a);break;case 21:xr(e,t,a);break;case 22:a.mode&1?(ot=(l=ot)||a.memoizedState!==null,xr(e,t,a),ot=l):xr(e,t,a);break;default:xr(e,t,a)}}function Sd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Ym),t.forEach(function(l){var d=op.bind(null,e,l);a.has(l)||(a.add(l),l.then(d,d))})}}function Dt(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];try{var f=e,g=t,b=g;e:for(;b!==null;){switch(b.tag){case 5:Ze=b.stateNode,Lt=!1;break e;case 3:Ze=b.stateNode.containerInfo,Lt=!0;break e;case 4:Ze=b.stateNode.containerInfo,Lt=!0;break e}b=b.return}if(Ze===null)throw Error(s(160));jd(f,g,d),Ze=null,Lt=!1;var S=d.alternate;S!==null&&(S.return=null),d.return=null}catch($){Me(d,t,$)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nd(t,e),t=t.sibling}function Nd(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Dt(t,e),Kt(e),l&4){try{vn(3,e,e.return),Ra(3,e)}catch(te){Me(e,e.return,te)}try{vn(5,e,e.return)}catch(te){Me(e,e.return,te)}}break;case 1:Dt(t,e),Kt(e),l&512&&a!==null&&xs(a,a.return);break;case 5:if(Dt(t,e),Kt(e),l&512&&a!==null&&xs(a,a.return),e.flags&32){var d=e.stateNode;try{Ms(d,"")}catch(te){Me(e,e.return,te)}}if(l&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,g=a!==null?a.memoizedProps:f,b=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{b==="input"&&f.type==="radio"&&f.name!=null&&Zl(d,f),yi(b,g);var $=yi(b,f);for(g=0;g<S.length;g+=2){var B=S[g],q=S[g+1];B==="style"?oc(d,q):B==="dangerouslySetInnerHTML"?ac(d,q):B==="children"?Ms(d,q):O(d,B,q,$)}switch(b){case"input":hi(d,f);break;case"textarea":rc(d,f);break;case"select":var F=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var G=f.value;G!=null?Yr(d,!!f.multiple,G,!1):F!==!!f.multiple&&(f.defaultValue!=null?Yr(d,!!f.multiple,f.defaultValue,!0):Yr(d,!!f.multiple,f.multiple?[]:"",!1))}d[ln]=f}catch(te){Me(e,e.return,te)}}break;case 6:if(Dt(t,e),Kt(e),l&4){if(e.stateNode===null)throw Error(s(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(te){Me(e,e.return,te)}}break;case 3:if(Dt(t,e),Kt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Qs(t.containerInfo)}catch(te){Me(e,e.return,te)}break;case 4:Dt(t,e),Kt(e);break;case 13:Dt(t,e),Kt(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(Vo=Fe())),l&4&&Sd(e);break;case 22:if(B=a!==null&&a.memoizedState!==null,e.mode&1?(ot=($=ot)||B,Dt(t,e),ot=$):Dt(t,e),Kt(e),l&8192){if($=e.memoizedState!==null,(e.stateNode.isHidden=$)&&!B&&(e.mode&1)!==0)for(Q=e,B=e.child;B!==null;){for(q=Q=B;Q!==null;){switch(F=Q,G=F.child,F.tag){case 0:case 11:case 14:case 15:vn(4,F,F.return);break;case 1:xs(F,F.return);var X=F.stateNode;if(typeof X.componentWillUnmount=="function"){l=F,a=F.return;try{t=l,X.props=t.memoizedProps,X.state=t.memoizedState,X.componentWillUnmount()}catch(te){Me(l,a,te)}}break;case 5:xs(F,F.return);break;case 22:if(F.memoizedState!==null){Cd(q);continue}}G!==null?(G.return=F,Q=G):Cd(q)}B=B.sibling}e:for(B=null,q=e;;){if(q.tag===5){if(B===null){B=q;try{d=q.stateNode,$?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(b=q.stateNode,S=q.memoizedProps.style,g=S!=null&&S.hasOwnProperty("display")?S.display:null,b.style.display=ic("display",g))}catch(te){Me(e,e.return,te)}}}else if(q.tag===6){if(B===null)try{q.stateNode.nodeValue=$?"":q.memoizedProps}catch(te){Me(e,e.return,te)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===e)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===e)break e;for(;q.sibling===null;){if(q.return===null||q.return===e)break e;B===q&&(B=null),q=q.return}B===q&&(B=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:Dt(t,e),Kt(e),l&4&&Sd(e);break;case 21:break;default:Dt(t,e),Kt(e)}}function Kt(e){var t=e.flags;if(t&2){try{e:{for(var a=e.return;a!==null;){if(bd(a)){var l=a;break e}a=a.return}throw Error(s(160))}switch(l.tag){case 5:var d=l.stateNode;l.flags&32&&(Ms(d,""),l.flags&=-33);var f=_d(e);Fo(e,f,d);break;case 3:case 4:var g=l.stateNode.containerInfo,b=_d(e);zo(e,b,g);break;default:throw Error(s(161))}}catch(S){Me(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Zm(e,t,a){Q=e,kd(e)}function kd(e,t,a){for(var l=(e.mode&1)!==0;Q!==null;){var d=Q,f=d.child;if(d.tag===22&&l){var g=d.memoizedState!==null||Ta;if(!g){var b=d.alternate,S=b!==null&&b.memoizedState!==null||ot;b=Ta;var $=ot;if(Ta=g,(ot=S)&&!$)for(Q=d;Q!==null;)g=Q,S=g.child,g.tag===22&&g.memoizedState!==null?Td(d):S!==null?(S.return=g,Q=S):Td(d);for(;f!==null;)Q=f,kd(f),f=f.sibling;Q=d,Ta=b,ot=$}Ed(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,Q=f):Ed(e)}}function Ed(e){for(;Q!==null;){var t=Q;if((t.flags&8772)!==0){var a=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ot||Ra(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!ot)if(a===null)l.componentDidMount();else{var d=t.elementType===t.type?a.memoizedProps:$t(t.type,a.memoizedProps);l.componentDidUpdate(d,a.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Cu(t,f,l);break;case 3:var g=t.updateQueue;if(g!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}Cu(t,g,a)}break;case 5:var b=t.stateNode;if(a===null&&t.flags&4){a=b;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&a.focus();break;case"img":S.src&&(a.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var $=t.alternate;if($!==null){var B=$.memoizedState;if(B!==null){var q=B.dehydrated;q!==null&&Qs(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}ot||t.flags&512&&Mo(t)}catch(F){Me(t,t.return,F)}}if(t===e){Q=null;break}if(a=t.sibling,a!==null){a.return=t.return,Q=a;break}Q=t.return}}function Cd(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Q=a;break}Q=t.return}}function Td(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{Ra(4,t)}catch(S){Me(t,a,S)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var d=t.return;try{l.componentDidMount()}catch(S){Me(t,d,S)}}var f=t.return;try{Mo(t)}catch(S){Me(t,f,S)}break;case 5:var g=t.return;try{Mo(t)}catch(S){Me(t,g,S)}}}catch(S){Me(t,t.return,S)}if(t===e){Q=null;break}var b=t.sibling;if(b!==null){b.return=t.return,Q=b;break}Q=t.return}}var ep=Math.ceil,Pa=L.ReactCurrentDispatcher,Bo=L.ReactCurrentOwner,Pt=L.ReactCurrentBatchConfig,be=0,Ye=null,Ve=null,et=0,wt=0,vs=fr(0),Ke=0,wn=null,Mr=0,Oa=0,qo=0,bn=null,mt=null,Vo=0,ws=1/0,rr=null,Aa=!1,Wo=null,vr=null,Ia=!1,wr=null,Ua=0,_n=0,Ho=null,$a=-1,La=0;function ut(){return(be&6)!==0?Fe():$a!==-1?$a:$a=Fe()}function br(e){return(e.mode&1)===0?1:(be&2)!==0&&et!==0?et&-et:Lm.transition!==null?(La===0&&(La=_c()),La):(e=Se,e!==0||(e=window.event,e=e===void 0?16:Pc(e.type)),e)}function Mt(e,t,a,l){if(50<_n)throw _n=0,Ho=null,Error(s(185));Ws(e,a,l),((be&2)===0||e!==Ye)&&(e===Ye&&((be&2)===0&&(Oa|=a),Ke===4&&_r(e,et)),pt(e,l),a===1&&be===0&&(t.mode&1)===0&&(ws=Fe()+500,da&&pr()))}function pt(e,t){var a=e.callbackNode;Lf(e,t);var l=Hn(e,e===Ye?et:0);if(l===0)a!==null&&vc(a),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(a!=null&&vc(a),t===1)e.tag===0?$m(Pd.bind(null,e)):gu(Pd.bind(null,e)),Om(function(){(be&6)===0&&pr()}),a=null;else{switch(jc(l)){case 1:a=Si;break;case 4:a=wc;break;case 16:a=Bn;break;case 536870912:a=bc;break;default:a=Bn}a=Md(a,Rd.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function Rd(e,t){if($a=-1,La=0,(be&6)!==0)throw Error(s(327));var a=e.callbackNode;if(bs()&&e.callbackNode!==a)return null;var l=Hn(e,e===Ye?et:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||t)t=Da(e,l);else{t=l;var d=be;be|=2;var f=Ad();(Ye!==e||et!==t)&&(rr=null,ws=Fe()+500,Fr(e,t));do try{sp();break}catch(b){Od(e,b)}while(!0);co(),Pa.current=f,be=d,Ve!==null?t=0:(Ye=null,et=0,t=Ke)}if(t!==0){if(t===2&&(d=Ni(e),d!==0&&(l=d,t=Ko(e,d))),t===1)throw a=wn,Fr(e,0),_r(e,l),pt(e,Fe()),a;if(t===6)_r(e,l);else{if(d=e.current.alternate,(l&30)===0&&!tp(d)&&(t=Da(e,l),t===2&&(f=Ni(e),f!==0&&(l=f,t=Ko(e,f))),t===1))throw a=wn,Fr(e,0),_r(e,l),pt(e,Fe()),a;switch(e.finishedWork=d,e.finishedLanes=l,t){case 0:case 1:throw Error(s(345));case 2:Br(e,mt,rr);break;case 3:if(_r(e,l),(l&130023424)===l&&(t=Vo+500-Fe(),10<t)){if(Hn(e,0)!==0)break;if(d=e.suspendedLanes,(d&l)!==l){ut(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=Xi(Br.bind(null,e,mt,rr),t);break}Br(e,mt,rr);break;case 4:if(_r(e,l),(l&4194240)===l)break;for(t=e.eventTimes,d=-1;0<l;){var g=31-At(l);f=1<<g,g=t[g],g>d&&(d=g),l&=~f}if(l=d,l=Fe()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*ep(l/1960))-l,10<l){e.timeoutHandle=Xi(Br.bind(null,e,mt,rr),l);break}Br(e,mt,rr);break;case 5:Br(e,mt,rr);break;default:throw Error(s(329))}}}return pt(e,Fe()),e.callbackNode===a?Rd.bind(null,e):null}function Ko(e,t){var a=bn;return e.current.memoizedState.isDehydrated&&(Fr(e,t).flags|=256),e=Da(e,t),e!==2&&(t=mt,mt=a,t!==null&&Go(t)),e}function Go(e){mt===null?mt=e:mt.push.apply(mt,e)}function tp(e){for(var t=e;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!It(f(),d))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _r(e,t){for(t&=~qo,t&=~Oa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-At(t),l=1<<a;e[a]=-1,t&=~l}}function Pd(e){if((be&6)!==0)throw Error(s(327));bs();var t=Hn(e,0);if((t&1)===0)return pt(e,Fe()),null;var a=Da(e,t);if(e.tag!==0&&a===2){var l=Ni(e);l!==0&&(t=l,a=Ko(e,l))}if(a===1)throw a=wn,Fr(e,0),_r(e,t),pt(e,Fe()),a;if(a===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Br(e,mt,rr),pt(e,Fe()),null}function Jo(e,t){var a=be;be|=1;try{return e(t)}finally{be=a,be===0&&(ws=Fe()+500,da&&pr())}}function zr(e){wr!==null&&wr.tag===0&&(be&6)===0&&bs();var t=be;be|=1;var a=Pt.transition,l=Se;try{if(Pt.transition=null,Se=1,e)return e()}finally{Se=l,Pt.transition=a,be=t,(be&6)===0&&pr()}}function Qo(){wt=vs.current,Pe(vs)}function Fr(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,Pm(a)),Ve!==null)for(a=Ve.return;a!==null;){var l=a;switch(no(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ca();break;case 3:gs(),Pe(dt),Pe(nt),xo();break;case 5:go(l);break;case 4:gs();break;case 13:Pe(Ue);break;case 19:Pe(Ue);break;case 10:uo(l.type._context);break;case 22:case 23:Qo()}a=a.return}if(Ye=e,Ve=e=jr(e.current,null),et=wt=t,Ke=0,wn=null,qo=Oa=Mr=0,mt=bn=null,$r!==null){for(t=0;t<$r.length;t++)if(a=$r[t],l=a.interleaved,l!==null){a.interleaved=null;var d=l.next,f=a.pending;if(f!==null){var g=f.next;f.next=d,l.next=g}a.pending=l}$r=null}return e}function Od(e,t){do{var a=Ve;try{if(co(),ba.current=Na,_a){for(var l=$e.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}_a=!1}if(Dr=0,Qe=He=$e=null,mn=!1,pn=0,Bo.current=null,a===null||a.return===null){Ke=1,wn=t,Ve=null;break}e:{var f=e,g=a.return,b=a,S=t;if(t=et,b.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var $=S,B=b,q=B.tag;if((B.mode&1)===0&&(q===0||q===11||q===15)){var F=B.alternate;F?(B.updateQueue=F.updateQueue,B.memoizedState=F.memoizedState,B.lanes=F.lanes):(B.updateQueue=null,B.memoizedState=null)}var G=sd(g);if(G!==null){G.flags&=-257,nd(G,g,b,f,t),G.mode&1&&rd(f,$,t),t=G,S=$;var X=t.updateQueue;if(X===null){var te=new Set;te.add(S),t.updateQueue=te}else X.add(S);break e}else{if((t&1)===0){rd(f,$,t),Yo();break e}S=Error(s(426))}}else if(Ie&&b.mode&1){var Be=sd(g);if(Be!==null){(Be.flags&65536)===0&&(Be.flags|=256),nd(Be,g,b,f,t),oo(ys(S,b));break e}}f=S=ys(S,b),Ke!==4&&(Ke=2),bn===null?bn=[f]:bn.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var A=ed(f,S,t);Eu(f,A);break e;case 1:b=S;var E=f.type,I=f.stateNode;if((f.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(vr===null||!vr.has(I)))){f.flags|=65536,t&=-t,f.lanes|=t;var V=td(f,b,t);Eu(f,V);break e}}f=f.return}while(f!==null)}Ud(a)}catch(se){t=se,Ve===a&&a!==null&&(Ve=a=a.return);continue}break}while(!0)}function Ad(){var e=Pa.current;return Pa.current=Na,e===null?Na:e}function Yo(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ye===null||(Mr&268435455)===0&&(Oa&268435455)===0||_r(Ye,et)}function Da(e,t){var a=be;be|=2;var l=Ad();(Ye!==e||et!==t)&&(rr=null,Fr(e,t));do try{rp();break}catch(d){Od(e,d)}while(!0);if(co(),be=a,Pa.current=l,Ve!==null)throw Error(s(261));return Ye=null,et=0,Ke}function rp(){for(;Ve!==null;)Id(Ve)}function sp(){for(;Ve!==null&&!Cf();)Id(Ve)}function Id(e){var t=Dd(e.alternate,e,wt);e.memoizedProps=e.pendingProps,t===null?Ud(e):Ve=t,Bo.current=null}function Ud(e){var t=e;do{var a=t.alternate;if(e=t.return,(t.flags&32768)===0){if(a=Jm(a,t,wt),a!==null){Ve=a;return}}else{if(a=Qm(a,t),a!==null){a.flags&=32767,Ve=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,Ve=null;return}}if(t=t.sibling,t!==null){Ve=t;return}Ve=t=e}while(t!==null);Ke===0&&(Ke=5)}function Br(e,t,a){var l=Se,d=Pt.transition;try{Pt.transition=null,Se=1,np(e,t,a,l)}finally{Pt.transition=d,Se=l}return null}function np(e,t,a,l){do bs();while(wr!==null);if((be&6)!==0)throw Error(s(327));a=e.finishedWork;var d=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var f=a.lanes|a.childLanes;if(Df(e,f),e===Ye&&(Ve=Ye=null,et=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ia||(Ia=!0,Md(Bn,function(){return bs(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=Pt.transition,Pt.transition=null;var g=Se;Se=1;var b=be;be|=4,Bo.current=null,Xm(e,a),Nd(a,e),Sm(Qi),Jn=!!Ji,Qi=Ji=null,e.current=a,Zm(a),Tf(),be=b,Se=g,Pt.transition=f}else e.current=a;if(Ia&&(Ia=!1,wr=e,Ua=d),f=e.pendingLanes,f===0&&(vr=null),Of(a.stateNode),pt(e,Fe()),t!==null)for(l=e.onRecoverableError,a=0;a<t.length;a++)d=t[a],l(d.value,{componentStack:d.stack,digest:d.digest});if(Aa)throw Aa=!1,e=Wo,Wo=null,e;return(Ua&1)!==0&&e.tag!==0&&bs(),f=e.pendingLanes,(f&1)!==0?e===Ho?_n++:(_n=0,Ho=e):_n=0,pr(),null}function bs(){if(wr!==null){var e=jc(Ua),t=Pt.transition,a=Se;try{if(Pt.transition=null,Se=16>e?16:e,wr===null)var l=!1;else{if(e=wr,wr=null,Ua=0,(be&6)!==0)throw Error(s(331));var d=be;for(be|=4,Q=e.current;Q!==null;){var f=Q,g=f.child;if((Q.flags&16)!==0){var b=f.deletions;if(b!==null){for(var S=0;S<b.length;S++){var $=b[S];for(Q=$;Q!==null;){var B=Q;switch(B.tag){case 0:case 11:case 15:vn(8,B,f)}var q=B.child;if(q!==null)q.return=B,Q=q;else for(;Q!==null;){B=Q;var F=B.sibling,G=B.return;if(wd(B),B===$){Q=null;break}if(F!==null){F.return=G,Q=F;break}Q=G}}}var X=f.alternate;if(X!==null){var te=X.child;if(te!==null){X.child=null;do{var Be=te.sibling;te.sibling=null,te=Be}while(te!==null)}}Q=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,Q=g;else e:for(;Q!==null;){if(f=Q,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:vn(9,f,f.return)}var A=f.sibling;if(A!==null){A.return=f.return,Q=A;break e}Q=f.return}}var E=e.current;for(Q=E;Q!==null;){g=Q;var I=g.child;if((g.subtreeFlags&2064)!==0&&I!==null)I.return=g,Q=I;else e:for(g=E;Q!==null;){if(b=Q,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Ra(9,b)}}catch(se){Me(b,b.return,se)}if(b===g){Q=null;break e}var V=b.sibling;if(V!==null){V.return=b.return,Q=V;break e}Q=b.return}}if(be=d,pr(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(qn,e)}catch{}l=!0}return l}finally{Se=a,Pt.transition=t}}return!1}function $d(e,t,a){t=ys(a,t),t=ed(e,t,1),e=yr(e,t,1),t=ut(),e!==null&&(Ws(e,1,t),pt(e,t))}function Me(e,t,a){if(e.tag===3)$d(e,e,a);else for(;t!==null;){if(t.tag===3){$d(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vr===null||!vr.has(l))){e=ys(a,e),e=td(t,e,1),t=yr(t,e,1),e=ut(),t!==null&&(Ws(t,1,e),pt(t,e));break}}t=t.return}}function ap(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),t=ut(),e.pingedLanes|=e.suspendedLanes&a,Ye===e&&(et&a)===a&&(Ke===4||Ke===3&&(et&130023424)===et&&500>Fe()-Vo?Fr(e,0):qo|=a),pt(e,t)}function Ld(e,t){t===0&&((e.mode&1)===0?t=1:(t=Wn,Wn<<=1,(Wn&130023424)===0&&(Wn=4194304)));var a=ut();e=Zt(e,t),e!==null&&(Ws(e,t,a),pt(e,a))}function ip(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Ld(e,a)}function op(e,t){var a=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(s(314))}l!==null&&l.delete(t),Ld(e,a)}var Dd;Dd=function(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps||dt.current)ft=!0;else{if((e.lanes&a)===0&&(t.flags&128)===0)return ft=!1,Gm(e,t,a);ft=(e.flags&131072)!==0}else ft=!1,Ie&&(t.flags&1048576)!==0&&yu(t,fa,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Ca(e,t),e=t.pendingProps;var d=cs(t,nt.current);ps(t,a),d=bo(null,t,l,e,d,a);var f=_o();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ht(l)?(f=!0,ua(t)):f=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,mo(t),d.updater=ka,t.stateNode=d,d._reactInternals=t,Co(t,l,e,a),t=Oo(null,t,l,!0,f,a)):(t.tag=0,Ie&&f&&so(t),ct(null,t,d,a),t=t.child),t;case 16:l=t.elementType;e:{switch(Ca(e,t),e=t.pendingProps,d=l._init,l=d(l._payload),t.type=l,d=t.tag=cp(l),e=$t(l,e),d){case 0:t=Po(null,t,l,e,a);break e;case 1:t=ud(null,t,l,e,a);break e;case 11:t=ad(null,t,l,e,a);break e;case 14:t=id(null,t,l,$t(l.type,e),a);break e}throw Error(s(306,l,""))}return t;case 0:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:$t(l,d),Po(e,t,l,d,a);case 1:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:$t(l,d),ud(e,t,l,d,a);case 3:e:{if(dd(t),e===null)throw Error(s(387));l=t.pendingProps,f=t.memoizedState,d=f.element,ku(e,t),va(t,l,null,a);var g=t.memoizedState;if(l=g.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){d=ys(Error(s(423)),t),t=hd(e,t,l,a,d);break e}else if(l!==d){d=ys(Error(s(424)),t),t=hd(e,t,l,a,d);break e}else for(vt=hr(t.stateNode.containerInfo.firstChild),xt=t,Ie=!0,Ut=null,a=Su(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(hs(),l===d){t=tr(e,t,a);break e}ct(e,t,l,a)}t=t.child}return t;case 5:return Tu(t),e===null&&io(t),l=t.type,d=t.pendingProps,f=e!==null?e.memoizedProps:null,g=d.children,Yi(l,d)?g=null:f!==null&&Yi(l,f)&&(t.flags|=32),cd(e,t),ct(e,t,g,a),t.child;case 6:return e===null&&io(t),null;case 13:return fd(e,t,a);case 4:return po(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=fs(t,null,l,a):ct(e,t,l,a),t.child;case 11:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:$t(l,d),ad(e,t,l,d,a);case 7:return ct(e,t,t.pendingProps,a),t.child;case 8:return ct(e,t,t.pendingProps.children,a),t.child;case 12:return ct(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(l=t.type._context,d=t.pendingProps,f=t.memoizedProps,g=d.value,Ee(ga,l._currentValue),l._currentValue=g,f!==null)if(It(f.value,g)){if(f.children===d.children&&!dt.current){t=tr(e,t,a);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var b=f.dependencies;if(b!==null){g=f.child;for(var S=b.firstContext;S!==null;){if(S.context===l){if(f.tag===1){S=er(-1,a&-a),S.tag=2;var $=f.updateQueue;if($!==null){$=$.shared;var B=$.pending;B===null?S.next=S:(S.next=B.next,B.next=S),$.pending=S}}f.lanes|=a,S=f.alternate,S!==null&&(S.lanes|=a),ho(f.return,a,t),b.lanes|=a;break}S=S.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(s(341));g.lanes|=a,b=g.alternate,b!==null&&(b.lanes|=a),ho(g,a,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}ct(e,t,d.children,a),t=t.child}return t;case 9:return d=t.type,l=t.pendingProps.children,ps(t,a),d=Tt(d),l=l(d),t.flags|=1,ct(e,t,l,a),t.child;case 14:return l=t.type,d=$t(l,t.pendingProps),d=$t(l.type,d),id(e,t,l,d,a);case 15:return od(e,t,t.type,t.pendingProps,a);case 17:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:$t(l,d),Ca(e,t),t.tag=1,ht(l)?(e=!0,ua(t)):e=!1,ps(t,a),Xu(t,l,d),Co(t,l,d,a),Oo(null,t,l,!0,e,a);case 19:return pd(e,t,a);case 22:return ld(e,t,a)}throw Error(s(156,t.tag))};function Md(e,t){return xc(e,t)}function lp(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,a,l){return new lp(e,t,a,l)}function Xo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cp(e){if(typeof e=="function")return Xo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fe)return 11;if(e===Ae)return 14}return 2}function jr(e,t){var a=e.alternate;return a===null?(a=Ot(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Ma(e,t,a,l,d,f){var g=2;if(l=e,typeof e=="function")Xo(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Y:return qr(a.children,d,f,t);case Z:g=8,d|=8;break;case K:return e=Ot(12,a,t,d|2),e.elementType=K,e.lanes=f,e;case me:return e=Ot(13,a,t,d),e.elementType=me,e.lanes=f,e;case ve:return e=Ot(19,a,t,d),e.elementType=ve,e.lanes=f,e;case _e:return za(a,d,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case he:g=10;break e;case ke:g=9;break e;case fe:g=11;break e;case Ae:g=14;break e;case Te:g=16,l=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=Ot(g,a,t,d),t.elementType=e,t.type=l,t.lanes=f,t}function qr(e,t,a,l){return e=Ot(7,e,l,t),e.lanes=a,e}function za(e,t,a,l){return e=Ot(22,e,l,t),e.elementType=_e,e.lanes=a,e.stateNode={isHidden:!1},e}function Zo(e,t,a){return e=Ot(6,e,null,t),e.lanes=a,e}function el(e,t,a){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function up(e,t,a,l,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ki(0),this.expirationTimes=ki(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ki(0),this.identifierPrefix=l,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function tl(e,t,a,l,d,f,g,b,S){return e=new up(e,t,a,b,S),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Ot(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},mo(f),e}function dp(e,t,a){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:l==null?null:""+l,children:e,containerInfo:t,implementation:a}}function zd(e){if(!e)return mr;e=e._reactInternals;e:{if(Pr(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var a=e.type;if(ht(a))return mu(e,a,t)}return t}function Fd(e,t,a,l,d,f,g,b,S){return e=tl(a,l,!0,e,d,f,g,b,S),e.context=zd(null),a=e.current,l=ut(),d=br(a),f=er(l,d),f.callback=t??null,yr(a,f,d),e.current.lanes=d,Ws(e,d,l),pt(e,l),e}function Fa(e,t,a,l){var d=t.current,f=ut(),g=br(d);return a=zd(a),t.context===null?t.context=a:t.pendingContext=a,t=er(f,g),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=yr(d,t,g),e!==null&&(Mt(e,d,g,f),xa(e,d,g)),g}function Ba(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function Bd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function rl(e,t){Bd(e,t),(e=e.alternate)&&Bd(e,t)}function hp(){return null}var qd=typeof reportError=="function"?reportError:function(e){console.error(e)};function sl(e){this._internalRoot=e}qa.prototype.render=sl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));Fa(e,t,null,null)},qa.prototype.unmount=sl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zr(function(){Fa(null,e,null,null)}),t[Jt]=null}};function qa(e){this._internalRoot=e}qa.prototype.unstable_scheduleHydration=function(e){if(e){var t=kc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<cr.length&&t!==0&&t<cr[a].priority;a++);cr.splice(a,0,e),a===0&&Tc(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Va(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vd(){}function fp(e,t,a,l,d){if(d){if(typeof l=="function"){var f=l;l=function(){var $=Ba(g);f.call($)}}var g=Fd(t,l,e,0,null,!1,!1,"",Vd);return e._reactRootContainer=g,e[Jt]=g.current,an(e.nodeType===8?e.parentNode:e),zr(),g}for(;d=e.lastChild;)e.removeChild(d);if(typeof l=="function"){var b=l;l=function(){var $=Ba(S);b.call($)}}var S=tl(e,0,!1,null,null,!1,!1,"",Vd);return e._reactRootContainer=S,e[Jt]=S.current,an(e.nodeType===8?e.parentNode:e),zr(function(){Fa(t,S,a,l)}),S}function Wa(e,t,a,l,d){var f=a._reactRootContainer;if(f){var g=f;if(typeof d=="function"){var b=d;d=function(){var S=Ba(g);b.call(S)}}Fa(t,g,e,d)}else g=fp(a,t,e,d,l);return Ba(g)}Sc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=Vs(t.pendingLanes);a!==0&&(Ei(t,a|1),pt(t,Fe()),(be&6)===0&&(ws=Fe()+500,pr()))}break;case 13:zr(function(){var l=Zt(e,1);if(l!==null){var d=ut();Mt(l,e,1,d)}}),rl(e,1)}},Ci=function(e){if(e.tag===13){var t=Zt(e,134217728);if(t!==null){var a=ut();Mt(t,e,134217728,a)}rl(e,134217728)}},Nc=function(e){if(e.tag===13){var t=br(e),a=Zt(e,t);if(a!==null){var l=ut();Mt(a,e,t,l)}rl(e,t)}},kc=function(){return Se},Ec=function(e,t){var a=Se;try{return Se=e,t()}finally{Se=a}},wi=function(e,t,a){switch(t){case"input":if(hi(e,a),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var d=la(l);if(!d)throw Error(s(90));Je(l),hi(l,d)}}}break;case"textarea":rc(e,a);break;case"select":t=a.value,t!=null&&Yr(e,!!a.multiple,t,!1)}},dc=Jo,hc=zr;var mp={usingClientEntryPoint:!1,Events:[cn,os,la,cc,uc,Jo]},jn={findFiberByHostInstance:Or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pp={bundleType:jn.bundleType,version:jn.version,rendererPackageName:jn.rendererPackageName,rendererConfig:jn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gc(e),e===null?null:e.stateNode},findFiberByHostInstance:jn.findFiberByHostInstance||hp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ha.isDisabled&&Ha.supportsFiber)try{qn=Ha.inject(pp),qt=Ha}catch{}}return gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mp,gt.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(t))throw Error(s(200));return dp(e,t,null,a)},gt.createRoot=function(e,t){if(!nl(e))throw Error(s(299));var a=!1,l="",d=qd;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=tl(e,1,!1,null,null,a,!1,l,d),e[Jt]=t.current,an(e.nodeType===8?e.parentNode:e),new sl(t)},gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=gc(t),e=e===null?null:e.stateNode,e},gt.flushSync=function(e){return zr(e)},gt.hydrate=function(e,t,a){if(!Va(t))throw Error(s(200));return Wa(null,e,t,!0,a)},gt.hydrateRoot=function(e,t,a){if(!nl(e))throw Error(s(405));var l=a!=null&&a.hydratedSources||null,d=!1,f="",g=qd;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),t=Fd(t,null,e,1,a??null,d,!1,f,g),e[Jt]=t.current,an(e),l)for(e=0;e<l.length;e++)a=l[e],d=a._getVersion,d=d(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,d]:t.mutableSourceEagerHydrationData.push(a,d);return new qa(t)},gt.render=function(e,t,a){if(!Va(t))throw Error(s(200));return Wa(null,e,t,!1,a)},gt.unmountComponentAtNode=function(e){if(!Va(e))throw Error(s(40));return e._reactRootContainer?(zr(function(){Wa(null,null,e,!1,function(){e._reactRootContainer=null,e[Jt]=null})}),!0):!1},gt.unstable_batchedUpdates=Jo,gt.unstable_renderSubtreeIntoContainer=function(e,t,a,l){if(!Va(a))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Wa(e,t,a,!1,l)},gt.version="18.3.1-next-f1338f8080-20240426",gt}var Xd;function Dh(){if(Xd)return ol.exports;Xd=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),ol.exports=Sp(),ol.exports}var Zd;function Np(){if(Zd)return Ka;Zd=1;var n=Dh();return Ka.createRoot=n.createRoot,Ka.hydrateRoot=n.hydrateRoot,Ka}var kp=Np();const Ep=$h(kp);Dh();function Cn(){return Cn=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},Cn.apply(this,arguments)}var Er;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Er||(Er={}));const eh="popstate";function Cp(n){n===void 0&&(n={});function r(o,c){let{pathname:u,search:h,hash:m}=o.location;return _l("",{pathname:u,search:h,hash:m},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(o,c){return typeof c=="string"?c:Za(c)}return Rp(r,s,null,n)}function qe(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function Ml(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Tp(){return Math.random().toString(36).substr(2,8)}function th(n,r){return{usr:n.state,key:n.key,idx:r}}function _l(n,r,s,o){return s===void 0&&(s=null),Cn({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof r=="string"?Us(r):r,{state:s,key:r&&r.key||o||Tp()})}function Za(n){let{pathname:r="/",search:s="",hash:o=""}=n;return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),o&&o!=="#"&&(r+=o.charAt(0)==="#"?o:"#"+o),r}function Us(n){let r={};if(n){let s=n.indexOf("#");s>=0&&(r.hash=n.substr(s),n=n.substr(0,s));let o=n.indexOf("?");o>=0&&(r.search=n.substr(o),n=n.substr(0,o)),n&&(r.pathname=n)}return r}function Rp(n,r,s,o){o===void 0&&(o={});let{window:c=document.defaultView,v5Compat:u=!1}=o,h=c.history,m=Er.Pop,p=null,y=w();y==null&&(y=0,h.replaceState(Cn({},h.state,{idx:y}),""));function w(){return(h.state||{idx:null}).idx}function x(){m=Er.Pop;let v=w(),R=v==null?null:v-y;y=v,p&&p({action:m,location:_.location,delta:R})}function j(v,R){m=Er.Push;let P=_l(_.location,v,R);y=w()+1;let O=th(P,y),L=_.createHref(P);try{h.pushState(O,"",L)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;c.location.assign(L)}u&&p&&p({action:m,location:_.location,delta:1})}function k(v,R){m=Er.Replace;let P=_l(_.location,v,R);y=w();let O=th(P,y),L=_.createHref(P);h.replaceState(O,"",L),u&&p&&p({action:m,location:_.location,delta:0})}function C(v){let R=c.location.origin!=="null"?c.location.origin:c.location.href,P=typeof v=="string"?v:Za(v);return P=P.replace(/ $/,"%20"),qe(R,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,R)}let _={get action(){return m},get location(){return n(c,h)},listen(v){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(eh,x),p=v,()=>{c.removeEventListener(eh,x),p=null}},createHref(v){return r(c,v)},createURL:C,encodeLocation(v){let R=C(v);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:j,replace:k,go(v){return h.go(v)}};return _}var rh;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(rh||(rh={}));function Pp(n,r,s){return s===void 0&&(s="/"),Op(n,r,s)}function Op(n,r,s,o){let c=typeof r=="string"?Us(r):r,u=zl(c.pathname||"/",s);if(u==null)return null;let h=Mh(n);Ap(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let y=Wp(u);m=Bp(h[p],y)}return m}function Mh(n,r,s,o){r===void 0&&(r=[]),s===void 0&&(s=[]),o===void 0&&(o="");let c=(u,h,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};p.relativePath.startsWith("/")&&(qe(p.relativePath.startsWith(o),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(o.length));let y=Cr([o,p.relativePath]),w=s.concat(p);u.children&&u.children.length>0&&(qe(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Mh(u.children,r,w,y)),!(u.path==null&&!u.index)&&r.push({path:y,score:zp(y,u.index),routesMeta:w})};return n.forEach((u,h)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))c(u,h);else for(let p of zh(u.path))c(u,h,p)}),r}function zh(n){let r=n.split("/");if(r.length===0)return[];let[s,...o]=r,c=s.endsWith("?"),u=s.replace(/\?$/,"");if(o.length===0)return c?[u,""]:[u];let h=zh(o.join("/")),m=[];return m.push(...h.map(p=>p===""?u:[u,p].join("/"))),c&&m.push(...h),m.map(p=>n.startsWith("/")&&p===""?"/":p)}function Ap(n){n.sort((r,s)=>r.score!==s.score?s.score-r.score:Fp(r.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}const Ip=/^:[\w-]+$/,Up=3,$p=2,Lp=1,Dp=10,Mp=-2,sh=n=>n==="*";function zp(n,r){let s=n.split("/"),o=s.length;return s.some(sh)&&(o+=Mp),r&&(o+=$p),s.filter(c=>!sh(c)).reduce((c,u)=>c+(Ip.test(u)?Up:u===""?Lp:Dp),o)}function Fp(n,r){return n.length===r.length&&n.slice(0,-1).every((o,c)=>o===r[c])?n[n.length-1]-r[r.length-1]:0}function Bp(n,r,s){let{routesMeta:o}=n,c={},u="/",h=[];for(let m=0;m<o.length;++m){let p=o[m],y=m===o.length-1,w=u==="/"?r:r.slice(u.length)||"/",x=qp({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},w),j=p.route;if(!x)return null;Object.assign(c,x.params),h.push({params:c,pathname:Cr([u,x.pathname]),pathnameBase:Qp(Cr([u,x.pathnameBase])),route:j}),x.pathnameBase!=="/"&&(u=Cr([u,x.pathnameBase]))}return h}function qp(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[s,o]=Vp(n.path,n.caseSensitive,n.end),c=r.match(s);if(!c)return null;let u=c[0],h=u.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:o.reduce((y,w,x)=>{let{paramName:j,isOptional:k}=w;if(j==="*"){let _=m[x]||"";h=u.slice(0,u.length-_.length).replace(/(.)\/+$/,"$1")}const C=m[x];return k&&!C?y[j]=void 0:y[j]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:n}}function Vp(n,r,s){r===void 0&&(r=!1),s===void 0&&(s=!0),Ml(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let o=[],c="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(o.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(o.push({paramName:"*"}),c+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":n!==""&&n!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,r?void 0:"i"),o]}function Wp(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Ml(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),n}}function zl(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,o=n.charAt(s);return o&&o!=="/"?null:n.slice(s)||"/"}const Hp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kp=n=>Hp.test(n);function Gp(n,r){r===void 0&&(r="/");let{pathname:s,search:o="",hash:c=""}=typeof n=="string"?Us(n):n,u;if(s)if(Kp(s))u=s;else{if(s.includes("//")){let h=s;s=s.replace(/\/\/+/g,"/"),Ml(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+s))}s.startsWith("/")?u=nh(s.substring(1),"/"):u=nh(s,r)}else u=r;return{pathname:u,search:Yp(o),hash:Xp(c)}}function nh(n,r){let s=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function ul(n,r,s,o){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Jp(n){return n.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function Fl(n,r){let s=Jp(n);return r?s.map((o,c)=>c===s.length-1?o.pathname:o.pathnameBase):s.map(o=>o.pathnameBase)}function Bl(n,r,s,o){o===void 0&&(o=!1);let c;typeof n=="string"?c=Us(n):(c=Cn({},n),qe(!c.pathname||!c.pathname.includes("?"),ul("?","pathname","search",c)),qe(!c.pathname||!c.pathname.includes("#"),ul("#","pathname","hash",c)),qe(!c.search||!c.search.includes("#"),ul("#","search","hash",c)));let u=n===""||c.pathname==="",h=u?"/":c.pathname,m;if(h==null)m=s;else{let x=r.length-1;if(!o&&h.startsWith("..")){let j=h.split("/");for(;j[0]==="..";)j.shift(),x-=1;c.pathname=j.join("/")}m=x>=0?r[x]:"/"}let p=Gp(c,m),y=h&&h!=="/"&&h.endsWith("/"),w=(u||h===".")&&s.endsWith("/");return!p.pathname.endsWith("/")&&(y||w)&&(p.pathname+="/"),p}const Cr=n=>n.join("/").replace(/\/\/+/g,"/"),Qp=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Yp=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Xp=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Zp(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Fh=["post","put","patch","delete"];new Set(Fh);const eg=["get",...Fh];new Set(eg);function Tn(){return Tn=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},Tn.apply(this,arguments)}const ql=N.createContext(null),tg=N.createContext(null),Rr=N.createContext(null),ai=N.createContext(null),nr=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Bh=N.createContext(null);function rg(n,r){let{relative:s}=r===void 0?{}:r;$s()||qe(!1);let{basename:o,navigator:c}=N.useContext(Rr),{hash:u,pathname:h,search:m}=Wh(n,{relative:s}),p=h;return o!=="/"&&(p=h==="/"?o:Cr([o,h])),c.createHref({pathname:p,search:m,hash:u})}function $s(){return N.useContext(ai)!=null}function Ls(){return $s()||qe(!1),N.useContext(ai).location}function qh(n){N.useContext(Rr).static||N.useLayoutEffect(n)}function Nt(){let{isDataRoute:n}=N.useContext(nr);return n?pg():sg()}function sg(){$s()||qe(!1);let n=N.useContext(ql),{basename:r,future:s,navigator:o}=N.useContext(Rr),{matches:c}=N.useContext(nr),{pathname:u}=Ls(),h=JSON.stringify(Fl(c,s.v7_relativeSplatPath)),m=N.useRef(!1);return qh(()=>{m.current=!0}),N.useCallback(function(y,w){if(w===void 0&&(w={}),!m.current)return;if(typeof y=="number"){o.go(y);return}let x=Bl(y,JSON.parse(h),u,w.relative==="path");n==null&&r!=="/"&&(x.pathname=x.pathname==="/"?r:Cr([r,x.pathname])),(w.replace?o.replace:o.push)(x,w.state,w)},[r,o,h,u,n])}function Vh(){let{matches:n}=N.useContext(nr),r=n[n.length-1];return r?r.params:{}}function Wh(n,r){let{relative:s}=r===void 0?{}:r,{future:o}=N.useContext(Rr),{matches:c}=N.useContext(nr),{pathname:u}=Ls(),h=JSON.stringify(Fl(c,o.v7_relativeSplatPath));return N.useMemo(()=>Bl(n,JSON.parse(h),u,s==="path"),[n,h,u,s])}function ng(n,r){return ag(n,r)}function ag(n,r,s,o){$s()||qe(!1);let{navigator:c}=N.useContext(Rr),{matches:u}=N.useContext(nr),h=u[u.length-1],m=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let y=Ls(),w;if(r){var x;let v=typeof r=="string"?Us(r):r;p==="/"||(x=v.pathname)!=null&&x.startsWith(p)||qe(!1),w=v}else w=y;let j=w.pathname||"/",k=j;if(p!=="/"){let v=p.replace(/^\//,"").split("/");k="/"+j.replace(/^\//,"").split("/").slice(v.length).join("/")}let C=Pp(n,{pathname:k}),_=ug(C&&C.map(v=>Object.assign({},v,{params:Object.assign({},m,v.params),pathname:Cr([p,c.encodeLocation?c.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?p:Cr([p,c.encodeLocation?c.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),u,s,o);return r&&_?N.createElement(ai.Provider,{value:{location:Tn({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Er.Pop}},_):_}function ig(){let n=mg(),r=Zp(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),s=n instanceof Error?n.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},r),s?N.createElement("pre",{style:c},s):null,null)}const og=N.createElement(ig,null);class lg extends N.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){console.error("React Router caught the following error during render",r,s)}render(){return this.state.error!==void 0?N.createElement(nr.Provider,{value:this.props.routeContext},N.createElement(Bh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cg(n){let{routeContext:r,match:s,children:o}=n,c=N.useContext(ql);return c&&c.static&&c.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=s.route.id),N.createElement(nr.Provider,{value:r},o)}function ug(n,r,s,o){var c;if(r===void 0&&(r=[]),s===void 0&&(s=null),o===void 0&&(o=null),n==null){var u;if(!s)return null;if(s.errors)n=s.matches;else if((u=o)!=null&&u.v7_partialHydration&&r.length===0&&!s.initialized&&s.matches.length>0)n=s.matches;else return null}let h=n,m=(c=s)==null?void 0:c.errors;if(m!=null){let w=h.findIndex(x=>x.route.id&&m?.[x.route.id]!==void 0);w>=0||qe(!1),h=h.slice(0,Math.min(h.length,w+1))}let p=!1,y=-1;if(s&&o&&o.v7_partialHydration)for(let w=0;w<h.length;w++){let x=h[w];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(y=w),x.route.id){let{loaderData:j,errors:k}=s,C=x.route.loader&&j[x.route.id]===void 0&&(!k||k[x.route.id]===void 0);if(x.route.lazy||C){p=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((w,x,j)=>{let k,C=!1,_=null,v=null;s&&(k=m&&x.route.id?m[x.route.id]:void 0,_=x.route.errorElement||og,p&&(y<0&&j===0?(gg("route-fallback"),C=!0,v=null):y===j&&(C=!0,v=x.route.hydrateFallbackElement||null)));let R=r.concat(h.slice(0,j+1)),P=()=>{let O;return k?O=_:C?O=v:x.route.Component?O=N.createElement(x.route.Component,null):x.route.element?O=x.route.element:O=w,N.createElement(cg,{match:x,routeContext:{outlet:w,matches:R,isDataRoute:s!=null},children:O})};return s&&(x.route.ErrorBoundary||x.route.errorElement||j===0)?N.createElement(lg,{location:s.location,revalidation:s.revalidation,component:_,error:k,children:P(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):P()},null)}var Hh=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Hh||{}),Kh=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Kh||{});function dg(n){let r=N.useContext(ql);return r||qe(!1),r}function hg(n){let r=N.useContext(tg);return r||qe(!1),r}function fg(n){let r=N.useContext(nr);return r||qe(!1),r}function Gh(n){let r=fg(),s=r.matches[r.matches.length-1];return s.route.id||qe(!1),s.route.id}function mg(){var n;let r=N.useContext(Bh),s=hg(),o=Gh();return r!==void 0?r:(n=s.errors)==null?void 0:n[o]}function pg(){let{router:n}=dg(Hh.UseNavigateStable),r=Gh(Kh.UseNavigateStable),s=N.useRef(!1);return qh(()=>{s.current=!0}),N.useCallback(function(c,u){u===void 0&&(u={}),s.current&&(typeof c=="number"?n.navigate(c):n.navigate(c,Tn({fromRouteId:r},u)))},[n,r])}const ah={};function gg(n,r,s){ah[n]||(ah[n]=!0)}function yg(n,r){n?.v7_startTransition,n?.v7_relativeSplatPath}function lt(n){let{to:r,replace:s,state:o,relative:c}=n;$s()||qe(!1);let{future:u,static:h}=N.useContext(Rr),{matches:m}=N.useContext(nr),{pathname:p}=Ls(),y=Nt(),w=Bl(r,Fl(m,u.v7_relativeSplatPath),p,c==="path"),x=JSON.stringify(w);return N.useEffect(()=>y(JSON.parse(x),{replace:s,state:o,relative:c}),[y,x,c,s,o]),null}function rt(n){qe(!1)}function xg(n){let{basename:r="/",children:s=null,location:o,navigationType:c=Er.Pop,navigator:u,static:h=!1,future:m}=n;$s()&&qe(!1);let p=r.replace(/^\/*/,"/"),y=N.useMemo(()=>({basename:p,navigator:u,static:h,future:Tn({v7_relativeSplatPath:!1},m)}),[p,m,u,h]);typeof o=="string"&&(o=Us(o));let{pathname:w="/",search:x="",hash:j="",state:k=null,key:C="default"}=o,_=N.useMemo(()=>{let v=zl(w,p);return v==null?null:{location:{pathname:v,search:x,hash:j,state:k,key:C},navigationType:c}},[p,w,x,j,k,C,c]);return _==null?null:N.createElement(Rr.Provider,{value:y},N.createElement(ai.Provider,{children:s,value:_}))}function vg(n){let{children:r,location:s}=n;return ng(jl(r),s)}new Promise(()=>{});function jl(n,r){r===void 0&&(r=[]);let s=[];return N.Children.forEach(n,(o,c)=>{if(!N.isValidElement(o))return;let u=[...r,c];if(o.type===N.Fragment){s.push.apply(s,jl(o.props.children,u));return}o.type!==rt&&qe(!1),!o.props.index||!o.props.children||qe(!1);let h={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=jl(o.props.children,u)),s.push(h)}),s}function Sl(){return Sl=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},Sl.apply(this,arguments)}function wg(n,r){if(n==null)return{};var s={},o=Object.keys(n),c,u;for(u=0;u<o.length;u++)c=o[u],!(r.indexOf(c)>=0)&&(s[c]=n[c]);return s}function bg(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function _g(n,r){return n.button===0&&(!r||r==="_self")&&!bg(n)}const jg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Sg="6";try{window.__reactRouterVersion=Sg}catch{}const Ng="startTransition",ih=bp[Ng];function kg(n){let{basename:r,children:s,future:o,window:c}=n,u=N.useRef();u.current==null&&(u.current=Cp({window:c,v5Compat:!0}));let h=u.current,[m,p]=N.useState({action:h.action,location:h.location}),{v7_startTransition:y}=o||{},w=N.useCallback(x=>{y&&ih?ih(()=>p(x)):p(x)},[p,y]);return N.useLayoutEffect(()=>h.listen(w),[h,w]),N.useEffect(()=>yg(o),[o]),N.createElement(xg,{basename:r,children:s,location:m.location,navigationType:m.action,navigator:h,future:o})}const Eg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Cg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bt=N.forwardRef(function(r,s){let{onClick:o,relative:c,reloadDocument:u,replace:h,state:m,target:p,to:y,preventScrollReset:w,viewTransition:x}=r,j=wg(r,jg),{basename:k}=N.useContext(Rr),C,_=!1;if(typeof y=="string"&&Cg.test(y)&&(C=y,Eg))try{let O=new URL(window.location.href),L=y.startsWith("//")?new URL(O.protocol+y):new URL(y),z=zl(L.pathname,k);L.origin===O.origin&&z!=null?y=z+L.search+L.hash:_=!0}catch{}let v=rg(y,{relative:c}),R=Tg(y,{replace:h,state:m,target:p,preventScrollReset:w,relative:c,viewTransition:x});function P(O){o&&o(O),O.defaultPrevented||R(O)}return N.createElement("a",Sl({},j,{href:C||v,onClick:_||u?o:P,ref:s,target:p}))});var oh;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(oh||(oh={}));var lh;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(lh||(lh={}));function Tg(n,r){let{target:s,replace:o,state:c,preventScrollReset:u,relative:h,viewTransition:m}=r===void 0?{}:r,p=Nt(),y=Ls(),w=Wh(n,{relative:h});return N.useCallback(x=>{if(_g(x,s)){x.preventDefault();let j=o!==void 0?o:Za(y)===Za(w);p(n,{replace:j,state:c,preventScrollReset:u,relative:h,viewTransition:m})}},[y,p,w,o,c,s,n,u,h,m])}function ii(n,r){var s={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.indexOf(o)<0&&(s[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(n);c<o.length;c++)r.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(n,o[c])&&(s[o[c]]=n[o[c]]);return s}function Rg(n,r,s,o){function c(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function m(w){try{y(o.next(w))}catch(x){h(x)}}function p(w){try{y(o.throw(w))}catch(x){h(x)}}function y(w){w.done?u(w.value):c(w.value).then(m,p)}y((o=o.apply(n,r||[])).next())})}const Pg=n=>n?(...r)=>n(...r):(...r)=>fetch(...r);class Vl extends Error{constructor(r,s="FunctionsError",o){super(r),this.name=s,this.context=o}}class Og extends Vl{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class ch extends Vl{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class uh extends Vl{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Nl;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Nl||(Nl={}));class Ag{constructor(r,{headers:s={},customFetch:o,region:c=Nl.Any}={}){this.url=r,this.headers=s,this.region=c,this.fetch=Pg(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return Rg(this,arguments,void 0,function*(s,o={}){var c;let u,h;try{const{headers:m,method:p,body:y,signal:w,timeout:x}=o;let j={},{region:k}=o;k||(k=this.region);const C=new URL(`${this.url}/${s}`);k&&k!=="any"&&(j["x-region"]=k,C.searchParams.set("forceFunctionRegion",k));let _;y&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(j["Content-Type"]="application/octet-stream",_=y):typeof y=="string"?(j["Content-Type"]="text/plain",_=y):typeof FormData<"u"&&y instanceof FormData?_=y:(j["Content-Type"]="application/json",_=JSON.stringify(y)):_=y;let v=w;x&&(h=new AbortController,u=setTimeout(()=>h.abort(),x),w?(v=h.signal,w.addEventListener("abort",()=>h.abort())):v=h.signal);const R=yield this.fetch(C.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},j),this.headers),m),body:_,signal:v}).catch(z=>{throw new Og(z)}),P=R.headers.get("x-relay-error");if(P&&P==="true")throw new ch(R);if(!R.ok)throw new uh(R);let O=((c=R.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),L;return O==="application/json"?L=yield R.json():O==="application/octet-stream"||O==="application/pdf"?L=yield R.blob():O==="text/event-stream"?L=R:O==="multipart/form-data"?L=yield R.formData():L=yield R.text(),{data:L,error:null,response:R}}catch(m){return{data:null,error:m,response:m instanceof uh||m instanceof ch?m.context:void 0}}finally{u&&clearTimeout(u)}})}}var Ig=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},Ug=class{constructor(n){var r,s;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(r=n.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=n.signal,this.isMaybeSingle=(s=n.isMaybeSingle)!==null&&s!==void 0?s:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,r){return this.headers=new Headers(this.headers),this.headers.set(n,r),this}then(n,r){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let c=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let h=null,m=null,p=null,y=u.status,w=u.statusText;if(u.ok){var x,j;if(s.method!=="HEAD"){var k;const R=await u.text();R===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((k=s.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?m=R:m=JSON.parse(R))}const _=(x=s.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),v=(j=u.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");_&&v&&v.length>1&&(p=parseInt(v[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(m)&&(m.length>1?(h={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,p=null,y=406,w="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var C;const _=await u.text();try{h=JSON.parse(_),Array.isArray(h)&&u.status===404&&(m=[],h=null,y=200,w="OK")}catch{u.status===404&&_===""?(y=204,w="No Content"):h={message:_}}if(h&&s.isMaybeSingle&&(!(h==null||(C=h.details)===null||C===void 0)&&C.includes("0 rows"))&&(h=null,y=200,w="OK"),h&&s.shouldThrowOnError)throw new Ig(h)}return{error:h,data:m,count:p,status:y,statusText:w}});return this.shouldThrowOnError||(c=c.catch(u=>{var h;let m="";const p=u?.cause;if(p){var y,w,x,j;const C=(y=p?.message)!==null&&y!==void 0?y:"",_=(w=p?.code)!==null&&w!==void 0?w:"";m=`${(x=u?.name)!==null&&x!==void 0?x:"FetchError"}: ${u?.message}`,m+=`

Caused by: ${(j=p?.name)!==null&&j!==void 0?j:"Error"}: ${C}`,_&&(m+=` (${_})`),p?.stack&&(m+=`
${p.stack}`)}else{var k;m=(k=u?.stack)!==null&&k!==void 0?k:""}return{error:{message:`${(h=u?.name)!==null&&h!==void 0?h:"FetchError"}: ${u?.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(n,r)}returns(){return this}overrideTypes(){return this}},$g=class extends Ug{select(n){let r=!1;const s=(n??"*").split("").map(o=>/\s/.test(o)&&!r?"":(o==='"'&&(r=!r),o)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:r=!0,nullsFirst:s,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${n}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:r,referencedTable:s=r}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${n}`),this}range(n,r,{foreignTable:s,referencedTable:o=s}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(u,`${r-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:r=!1,settings:s=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var h;const m=[n?"analyze":null,r?"verbose":null,s?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${m};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const dh=new RegExp("[,()]");var Cs=class extends $g{eq(n,r){return this.url.searchParams.append(n,`eq.${r}`),this}neq(n,r){return this.url.searchParams.append(n,`neq.${r}`),this}gt(n,r){return this.url.searchParams.append(n,`gt.${r}`),this}gte(n,r){return this.url.searchParams.append(n,`gte.${r}`),this}lt(n,r){return this.url.searchParams.append(n,`lt.${r}`),this}lte(n,r){return this.url.searchParams.append(n,`lte.${r}`),this}like(n,r){return this.url.searchParams.append(n,`like.${r}`),this}likeAllOf(n,r){return this.url.searchParams.append(n,`like(all).{${r.join(",")}}`),this}likeAnyOf(n,r){return this.url.searchParams.append(n,`like(any).{${r.join(",")}}`),this}ilike(n,r){return this.url.searchParams.append(n,`ilike.${r}`),this}ilikeAllOf(n,r){return this.url.searchParams.append(n,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(n,r){return this.url.searchParams.append(n,`ilike(any).{${r.join(",")}}`),this}regexMatch(n,r){return this.url.searchParams.append(n,`match.${r}`),this}regexIMatch(n,r){return this.url.searchParams.append(n,`imatch.${r}`),this}is(n,r){return this.url.searchParams.append(n,`is.${r}`),this}isDistinct(n,r){return this.url.searchParams.append(n,`isdistinct.${r}`),this}in(n,r){const s=Array.from(new Set(r)).map(o=>typeof o=="string"&&dh.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`in.(${s})`),this}notIn(n,r){const s=Array.from(new Set(r)).map(o=>typeof o=="string"&&dh.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`not.in.(${s})`),this}contains(n,r){return typeof r=="string"?this.url.searchParams.append(n,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(n,`cs.{${r.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(r)}`),this}containedBy(n,r){return typeof r=="string"?this.url.searchParams.append(n,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(n,`cd.{${r.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(r)}`),this}rangeGt(n,r){return this.url.searchParams.append(n,`sr.${r}`),this}rangeGte(n,r){return this.url.searchParams.append(n,`nxl.${r}`),this}rangeLt(n,r){return this.url.searchParams.append(n,`sl.${r}`),this}rangeLte(n,r){return this.url.searchParams.append(n,`nxr.${r}`),this}rangeAdjacent(n,r){return this.url.searchParams.append(n,`adj.${r}`),this}overlaps(n,r){return typeof r=="string"?this.url.searchParams.append(n,`ov.${r}`):this.url.searchParams.append(n,`ov.{${r.join(",")}}`),this}textSearch(n,r,{config:s,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const u=s===void 0?"":`(${s})`;return this.url.searchParams.append(n,`${c}fts${u}.${r}`),this}match(n){return Object.entries(n).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(n,r,s){return this.url.searchParams.append(n,`not.${r}.${s}`),this}or(n,{foreignTable:r,referencedTable:s=r}={}){const o=s?`${s}.or`:"or";return this.url.searchParams.append(o,`(${n})`),this}filter(n,r,s){return this.url.searchParams.append(n,`${r}.${s}`),this}},Lg=class{constructor(n,{headers:r={},schema:s,fetch:o}){this.url=n,this.headers=new Headers(r),this.schema=s,this.fetch=o}select(n,r){const{head:s=!1,count:o}=r??{},c=s?"HEAD":"GET";let u=!1;const h=(n??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",h),o&&this.headers.append("Prefer",`count=${o}`),new Cs({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:r,defaultToNull:s=!0}={}){var o;const c="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const u=n.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(u.length>0){const h=[...new Set(u)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new Cs({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(n,{onConflict:r,ignoreDuplicates:s=!1,count:o,defaultToNull:c=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const m=n.reduce((p,y)=>p.concat(Object.keys(y)),[]);if(m.length>0){const p=[...new Set(m)].map(y=>`"${y}"`);this.url.searchParams.set("columns",p.join(","))}}return new Cs({method:h,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(n,{count:r}={}){var s;const o="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Cs({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:n}={}){var r;const s="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new Cs({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},Dg=class Jh{constructor(r,{headers:s={},schema:o,fetch:c}={}){this.url=r,this.headers=new Headers(s),this.schemaName=o,this.fetch=c}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Lg(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new Jh(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,s={},{head:o=!1,get:c=!1,count:u}={}){var h;let m;const p=new URL(`${this.url}/rpc/${r}`);let y;o||c?(m=o?"HEAD":"GET",Object.entries(s).filter(([x,j])=>j!==void 0).map(([x,j])=>[x,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([x,j])=>{p.searchParams.append(x,j)})):(m="POST",y=s);const w=new Headers(this.headers);return u&&w.set("Prefer",`count=${u}`),new Cs({method:m,url:p,headers:w,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};class Mg{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const o=s.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let s=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(s+=`

Suggested solution: ${r.workaround}`),new Error(s)}static createWebSocket(r,s){const o=this.getWebSocketConstructor();return new o(r,s)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const zg="2.88.0",Fg=`realtime-js/${zg}`,Qh="1.0.0",Bg="2.0.0",hh=Qh,kl=1e4,qg=1e3,Vg=100;var Nr;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Nr||(Nr={}));var Ge;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ge||(Ge={}));var Bt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Bt||(Bt={}));var El;(function(n){n.websocket="websocket"})(El||(El={}));var Kr;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Kr||(Kr={}));class Wg{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,s){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return s(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var s;return this._isArrayBuffer((s=r.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var s,o;const c=(o=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(r){var s,o;const c=(o=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&o!==void 0?o:{},h=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(r,s,o){var c,u;const h=r.topic,m=(c=r.ref)!==null&&c!==void 0?c:"",p=(u=r.join_ref)!==null&&u!==void 0?u:"",y=r.payload.event,w=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},x=Object.keys(w).length===0?"":JSON.stringify(w);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const j=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+m.length+h.length+y.length+x.length,k=new ArrayBuffer(this.HEADER_LENGTH+j);let C=new DataView(k),_=0;C.setUint8(_++,this.KINDS.userBroadcastPush),C.setUint8(_++,p.length),C.setUint8(_++,m.length),C.setUint8(_++,h.length),C.setUint8(_++,y.length),C.setUint8(_++,x.length),C.setUint8(_++,s),Array.from(p,R=>C.setUint8(_++,R.charCodeAt(0))),Array.from(m,R=>C.setUint8(_++,R.charCodeAt(0))),Array.from(h,R=>C.setUint8(_++,R.charCodeAt(0))),Array.from(y,R=>C.setUint8(_++,R.charCodeAt(0))),Array.from(x,R=>C.setUint8(_++,R.charCodeAt(0)));var v=new Uint8Array(k.byteLength+o.byteLength);return v.set(new Uint8Array(k),0),v.set(new Uint8Array(o),k.byteLength),v.buffer}decode(r,s){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return s(o)}if(typeof r=="string"){const o=JSON.parse(r),[c,u,h,m,p]=o;return s({join_ref:c,ref:u,topic:h,event:m,payload:p})}return s({})}_binaryDecode(r){const s=new DataView(r),o=s.getUint8(0),c=new TextDecoder;if(o===this.KINDS.userBroadcast)return this._decodeUserBroadcast(r,s,c)}_decodeUserBroadcast(r,s,o){const c=s.getUint8(1),u=s.getUint8(2),h=s.getUint8(3),m=s.getUint8(4);let p=this.HEADER_LENGTH+4;const y=o.decode(r.slice(p,p+c));p=p+c;const w=o.decode(r.slice(p,p+u));p=p+u;const x=o.decode(r.slice(p,p+h));p=p+h;const j=r.slice(p,r.byteLength),k=m===this.JSON_ENCODING?JSON.parse(o.decode(j)):j,C={type:this.BROADCAST_EVENT,event:w,payload:k};return h>0&&(C.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:C}}_isArrayBuffer(r){var s;return r instanceof ArrayBuffer||((s=r?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(r,s){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([o])=>s.includes(o)))}}class Yh{constructor(r,s){this.callback=r,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ce;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ce||(Ce={}));const fh=(n,r,s={})=>{var o;const c=(o=s.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((u,h)=>(u[h]=Hg(h,n,r,c),u),{}):{}},Hg=(n,r,s,o)=>{const c=r.find(m=>m.name===n),u=c?.type,h=s[n];return u&&!o.includes(u)?Xh(u,h):Cl(h)},Xh=(n,r)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return Qg(r,s)}switch(n){case Ce.bool:return Kg(r);case Ce.float4:case Ce.float8:case Ce.int2:case Ce.int4:case Ce.int8:case Ce.numeric:case Ce.oid:return Gg(r);case Ce.json:case Ce.jsonb:return Jg(r);case Ce.timestamp:return Yg(r);case Ce.abstime:case Ce.date:case Ce.daterange:case Ce.int4range:case Ce.int8range:case Ce.money:case Ce.reltime:case Ce.text:case Ce.time:case Ce.timestamptz:case Ce.timetz:case Ce.tsrange:case Ce.tstzrange:return Cl(r);default:return Cl(r)}},Cl=n=>n,Kg=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Gg=n=>{if(typeof n=="string"){const r=parseFloat(n);if(!Number.isNaN(r))return r}return n},Jg=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},Qg=(n,r)=>{if(typeof n!="string")return n;const s=n.length-1,o=n[s];if(n[0]==="{"&&o==="}"){let u;const h=n.slice(1,s);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(m=>Xh(r,m))}return n},Yg=n=>typeof n=="string"?n.replace(" ","T"):n,Zh=n=>{const r=new URL(n);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class dl{constructor(r,s,o={},c=kl){this.channel=r,this.event=s,this.payload=o,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,s){var o;return this._hasReceived(r)&&s((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:s}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(s))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var mh;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(mh||(mh={}));class kn{constructor(r,s){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},c=>{const{onJoin:u,onLeave:h,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kn.syncState(this.state,c,u,h),this.pendingDiffs.forEach(p=>{this.state=kn.syncDiff(this.state,p,u,h)}),this.pendingDiffs=[],m()}),this.channel._on(o.diff,{},c=>{const{onJoin:u,onLeave:h,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=kn.syncDiff(this.state,c,u,h),m())}),this.onJoin((c,u,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:h})}),this.onLeave((c,u,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,s,o,c){const u=this.cloneDeep(r),h=this.transformState(s),m={},p={};return this.map(u,(y,w)=>{h[y]||(p[y]=w)}),this.map(h,(y,w)=>{const x=u[y];if(x){const j=w.map(v=>v.presence_ref),k=x.map(v=>v.presence_ref),C=w.filter(v=>k.indexOf(v.presence_ref)<0),_=x.filter(v=>j.indexOf(v.presence_ref)<0);C.length>0&&(m[y]=C),_.length>0&&(p[y]=_)}else m[y]=w}),this.syncDiff(u,{joins:m,leaves:p},o,c)}static syncDiff(r,s,o,c){const{joins:u,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return o||(o=()=>{}),c||(c=()=>{}),this.map(u,(m,p)=>{var y;const w=(y=r[m])!==null&&y!==void 0?y:[];if(r[m]=this.cloneDeep(p),w.length>0){const x=r[m].map(k=>k.presence_ref),j=w.filter(k=>x.indexOf(k.presence_ref)<0);r[m].unshift(...j)}o(m,w,p)}),this.map(h,(m,p)=>{let y=r[m];if(!y)return;const w=p.map(x=>x.presence_ref);y=y.filter(x=>w.indexOf(x.presence_ref)<0),r[m]=y,c(m,y,p),y.length===0&&delete r[m]}),r}static map(r,s){return Object.getOwnPropertyNames(r).map(o=>s(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((s,o)=>{const c=r[o];return"metas"in c?s[o]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[o]=c,s},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ph;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(ph||(ph={}));var En;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(En||(En={}));var sr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(sr||(sr={}));class Ps{constructor(r,s={config:{}},o){var c,u;if(this.topic=r,this.params=s,this.socket=o,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new dl(this,Bt.join,this.params,this.timeout),this.rejoinTimer=new Yh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bt.reply,{},(h,m)=>{this._trigger(this._replyEventName(m),h)}),this.presence=new kn(this),this.broadcastEndpointURL=Zh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,s=this.timeout){var o,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Ge.closed){const{config:{broadcast:h,presence:m,private:p}}=this.params,y=(c=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(k=>k.filter))!==null&&c!==void 0?c:[],w=!!this.bindings[En.PRESENCE]&&this.bindings[En.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,x={},j={broadcast:h,presence:Object.assign(Object.assign({},m),{enabled:w}),postgres_changes:y,private:p};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(k=>r?.(sr.CHANNEL_ERROR,k)),this._onClose(()=>r?.(sr.CLOSED)),this.updateJoinPayload(Object.assign({config:j},x)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:k})=>{var C;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){r?.(sr.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,v=(C=_?.length)!==null&&C!==void 0?C:0,R=[];for(let P=0;P<v;P++){const O=_[P],{filter:{event:L,schema:z,table:H,filter:Y}}=O,Z=k&&k[P];if(Z&&Z.event===L&&Ps.isFilterValueEqual(Z.schema,z)&&Ps.isFilterValueEqual(Z.table,H)&&Ps.isFilterValueEqual(Z.filter,Y))R.push(Object.assign(Object.assign({},O),{id:Z.id}));else{this.unsubscribe(),this.state=Ge.errored,r?.(sr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,r&&r(sr.SUBSCRIBED);return}}).receive("error",k=>{this.state=Ge.errored,r?.(sr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{r?.(sr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,s={}){return await this.send({type:"presence",event:"track",payload:r},s.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,s,o){return this.state===Ge.joined&&r===En.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,s,o)}async httpSend(r,s,o={}){var c;if(s==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:s,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(c=o.timeout)!==null&&c!==void 0?c:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const y=await m.json();p=y.error||y.message||p}catch{}return Promise.reject(new Error(p))}async send(r,s={}){var o,c;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:h}=r,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);return await((c=y.body)===null||c===void 0?void 0:c.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,m,p;const y=this._push(r.type,r,s.timeout||this.timeout);r.type==="broadcast"&&!(!((p=(m=(h=this.params)===null||h===void 0?void 0:h.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),y.receive("ok",()=>u("ok")),y.receive("error",()=>u("error")),y.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Ge.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bt.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(c=>{o=new dl(this,Bt.leave,{},r),o.receive("ok",()=>{s(),c("ok")}).receive("timeout",()=>{s(),c("timed out")}).receive("error",()=>{c("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ge.closed,this.bindings={}}async _fetchWithTimeout(r,s,o){const c=new AbortController,u=setTimeout(()=>c.abort(),o),h=await this.socket.fetch(r,Object.assign(Object.assign({},s),{signal:c.signal}));return clearTimeout(u),h}_push(r,s,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new dl(this,r,s,o);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Vg){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(r,s,o){return s}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,s,o){var c,u;const h=r.toLocaleLowerCase(),{close:m,error:p,leave:y,join:w}=Bt;if(o&&[m,p,y,w].indexOf(h)>=0&&o!==this._joinRef())return;let j=this._onMessage(h,s,o);if(s&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(k=>{var C,_,v;return((C=k.filter)===null||C===void 0?void 0:C.event)==="*"||((v=(_=k.filter)===null||_===void 0?void 0:_.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===h}).map(k=>k.callback(j,o)):(u=this.bindings[h])===null||u===void 0||u.filter(k=>{var C,_,v,R,P,O;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in k){const L=k.id,z=(C=k.filter)===null||C===void 0?void 0:C.event;return L&&((_=s.ids)===null||_===void 0?void 0:_.includes(L))&&(z==="*"||z?.toLocaleLowerCase()===((v=s.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const L=(P=(R=k?.filter)===null||R===void 0?void 0:R.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return L==="*"||L===((O=s?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===h}).map(k=>{if(typeof j=="object"&&"ids"in j){const C=j.data,{schema:_,table:v,commit_timestamp:R,type:P,errors:O}=C;j=Object.assign(Object.assign({},{schema:_,table:v,commit_timestamp:R,eventType:P,new:{},old:{},errors:O}),this._getPayloadRecords(C))}k.callback(j,o)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,s,o){const c=r.toLocaleLowerCase(),u={type:c,filter:s,callback:o};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(r,s){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&Ps.isEqual(c.filter,s))})),this}static isEqual(r,s){if(Object.keys(r).length!==Object.keys(s).length)return!1;for(const o in r)if(r[o]!==s[o])return!1;return!0}static isFilterValueEqual(r,s){return(r??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Bt.close,{},r)}_onError(r){this._on(Bt.error,{},s=>r(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const s={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(s.new=fh(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(s.old=fh(r.columns,r.old_record)),s}}const hl=()=>{},Ga={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Xg=[1e3,2e3,5e3,1e4],Zg=1e4,e0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class t0{constructor(r,s){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=kl,this.transport=null,this.heartbeatIntervalMs=Ga.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hl,this.ref=0,this.reconnectTimer=null,this.vsn=hh,this.logger=hl,this.conn=null,this.sendBuffer=[],this.serializer=new Wg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((o=s?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${r}/${El.websocket}`,this.httpEndpoint=Zh(r),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Mg.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const s=r.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const s=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const r=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,s,o){this.logger(r,s,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Nr.connecting:return Kr.Connecting;case Nr.open:return Kr.Open;case Nr.closing:return Kr.Closing;default:return Kr.Closed}}isConnected(){return this.connectionState()===Kr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,s={config:{}}){const o=`realtime:${r}`,c=this.getChannels().find(u=>u.topic===o);if(c)return c;{const u=new Ps(`realtime:${r}`,s,this);return this.channels.push(u),u}}push(r){const{topic:s,event:o,payload:c,ref:u}=r,h=()=>{this.encode(r,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${s} ${o} (${u})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(qg,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Ga.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let s=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${r}"`),s.unsubscribe())}_remove(r){this.channels=this.channels.filter(s=>s.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:c,payload:u,ref:h}=s,m=h?`(${h})`:"",p=u.status||"";this.log("receive",`${p} ${o} ${c} ${m}`.trim(),u),this.channels.filter(y=>y._isMember(o)).forEach(y=>y._trigger(c,u,h)),this._triggerStateCallbacks("message",s)})}_clearTimer(r){var s;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===Nr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Nr.open||this.conn.readyState===Nr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var s;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(Bt.error))}_appendParams(r,s){if(Object.keys(s).length===0)return r;const o=r.match(/\?/)?"&":"?",c=new URLSearchParams(s);return`${r}${o}${c}`}_workerObjectUrl(r){let s;if(r)s=r;else{const o=new Blob([e0],{type:"application/javascript"});s=URL.createObjectURL(o)}return s}_setConnectionState(r,s=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(r=null){let s,o=!1;if(r)s=r,o=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),s=this.accessTokenValue}else s=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(c=>{const u={access_token:s,version:Fg};s&&c.updateJoinPayload(u),c.joinedOnce&&c._isJoined()&&c._push(Bt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${r}`,s)})}_triggerStateCallbacks(r,s){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(s)}catch(c){this.log("error",`error in ${r} callback`,c)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Yh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ga.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var s,o,c,u,h,m,p,y,w,x,j,k;switch(this.transport=(s=r?.transport)!==null&&s!==void 0?s:null,this.timeout=(o=r?.timeout)!==null&&o!==void 0?o:kl,this.heartbeatIntervalMs=(c=r?.heartbeatIntervalMs)!==null&&c!==void 0?c:Ga.HEARTBEAT_INTERVAL,this.worker=(u=r?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=r?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(m=r?.heartbeatCallback)!==null&&m!==void 0?m:hl,this.vsn=(p=r?.vsn)!==null&&p!==void 0?p:hh,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=r?.reconnectAfterMs)!==null&&y!==void 0?y:(C=>Xg[C-1]||Zg),this.vsn){case Qh:this.encode=(w=r?.encode)!==null&&w!==void 0?w:((C,_)=>_(JSON.stringify(C))),this.decode=(x=r?.decode)!==null&&x!==void 0?x:((C,_)=>_(JSON.parse(C)));break;case Bg:this.encode=(j=r?.encode)!==null&&j!==void 0?j:this.serializer.encode.bind(this.serializer),this.decode=(k=r?.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var Rn=class extends Error{constructor(n,r){super(n),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function r0(n,r,s){const o=new URL(r,n);if(s)for(const[c,u]of Object.entries(s))u!==void 0&&o.searchParams.set(c,u);return o.toString()}async function s0(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function n0(n){const r=n.fetchImpl??globalThis.fetch;return{async request({method:s,path:o,query:c,body:u,headers:h}){const m=r0(n.baseUrl,o,c),p=await s0(n.auth),y=await r(m,{method:s,headers:{...u?{"Content-Type":"application/json"}:{},...p,...h},body:u?JSON.stringify(u):void 0}),w=await y.text(),x=(y.headers.get("content-type")||"").includes("application/json"),j=x&&w?JSON.parse(w):w;if(!y.ok){const k=x?j:void 0,C=k?.error;throw new Rn(C?.message??`Request failed with status ${y.status}`,{status:y.status,icebergType:C?.type,icebergCode:C?.code,details:k})}return{status:y.status,headers:y.headers,data:j}}}}function Ja(n){return n.join("")}var a0=class{constructor(n,r=""){this.client=n,this.prefix=r}async listNamespaces(n){const r=n?{parent:Ja(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(n,r){const s={namespace:n.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ja(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ja(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ja(n.namespace)}`}),!0}catch(r){if(r instanceof Rn&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(n,r){try{return await this.createNamespace(n,r)}catch(s){if(s instanceof Rn&&s.status===409)return;throw s}}};function _s(n){return n.join("")}var i0=class{constructor(n,r="",s){this.client=n,this.prefix=r,this.accessDelegation=s}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_s(n.namespace)}/tables`})).data.identifiers}async createTable(n,r){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_s(n.namespace)}/tables`,body:r,headers:s})).data.metadata}async updateTable(n,r){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_s(n.namespace)}/tables/${n.name}`,body:r});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(n,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_s(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_s(n.namespace)}/tables/${n.name}`,headers:r})).data.metadata}async tableExists(n){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_s(n.namespace)}/tables/${n.name}`,headers:r}),!0}catch(s){if(s instanceof Rn&&s.status===404)return!1;throw s}}async createTableIfNotExists(n,r){try{return await this.createTable(n,r)}catch(s){if(s instanceof Rn&&s.status===409)return await this.loadTable({namespace:n.namespace,name:r.name});throw s}}},o0=class{constructor(n){let r="v1";n.catalogName&&(r+=`/${n.catalogName}`);const s=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=n0({baseUrl:s,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new a0(this.client,r),this.tableOps=new i0(this.client,r,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,r){return this.namespaceOps.createNamespace(n,r)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,r){return this.tableOps.createTable(n,r)}async updateTable(n,r){return this.tableOps.updateTable(n,r)}async dropTable(n,r){await this.tableOps.dropTable(n,r)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,r){return this.namespaceOps.createNamespaceIfNotExists(n,r)}async createTableIfNotExists(n,r){return this.tableOps.createTableIfNotExists(n,r)}},oi=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function Le(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var l0=class extends oi{constructor(n,r,s){super(n),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Tl=class extends oi{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}};const Wl=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),c0=()=>Response,Rl=n=>{if(Array.isArray(n))return n.map(s=>Rl(s));if(typeof n=="function"||n!==Object(n))return n;const r={};return Object.entries(n).forEach(([s,o])=>{const c=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[c]=Rl(o)}),r},u0=n=>{if(typeof n!="object"||n===null)return!1;const r=Object.getPrototypeOf(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},d0=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Pn(n){"@babel/helpers - typeof";return Pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pn(n)}function h0(n,r){if(Pn(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var o=s.call(n,r);if(Pn(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function f0(n){var r=h0(n,"string");return Pn(r)=="symbol"?r:r+""}function m0(n,r,s){return(r=f0(r))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,n}function gh(n,r){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);r&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable})),s.push.apply(s,o)}return s}function ce(n){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?gh(Object(s),!0).forEach(function(o){m0(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):gh(Object(s)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(s,o))})}return n}const fl=n=>{var r;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(r=n.error)===null||r===void 0?void 0:r.message)||JSON.stringify(n)},p0=async(n,r,s)=>{n instanceof await c0()&&!s?.noResolveJson?n.json().then(o=>{const c=n.status||500,u=o?.statusCode||c+"";r(new l0(fl(o),c,u))}).catch(o=>{r(new Tl(fl(o),o))}):r(new Tl(fl(n),n))},g0=(n,r,s,o)=>{const c={method:n,headers:r?.headers||{}};return n==="GET"||!o?c:(u0(o)?(c.headers=ce({"Content-Type":"application/json"},r?.headers),c.body=JSON.stringify(o)):c.body=o,r?.duplex&&(c.duplex=r.duplex),ce(ce({},c),s))};async function Dn(n,r,s,o,c,u){return new Promise((h,m)=>{n(s,g0(r,o,c,u)).then(p=>{if(!p.ok)throw p;return o?.noResolveJson?p:p.json()}).then(p=>h(p)).catch(p=>p0(p,m,o))})}async function On(n,r,s,o){return Dn(n,"GET",r,s,o)}async function Ft(n,r,s,o,c){return Dn(n,"POST",r,o,c,s)}async function Pl(n,r,s,o,c){return Dn(n,"PUT",r,o,c,s)}async function y0(n,r,s,o){return Dn(n,"HEAD",r,ce(ce({},s),{},{noResolveJson:!0}),o)}async function Hl(n,r,s,o,c){return Dn(n,"DELETE",r,o,c,s)}var x0=class{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}then(n,r){return this.execute().then(n,r)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}}};let ef;ef=Symbol.toStringTag;var v0=class{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r,this[ef]="BlobDownloadBuilder",this.promise=null}asStream(){return new x0(this.downloadFn,this.shouldThrowOnError)}then(n,r){return this.getPromise().then(n,r)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}}};const w0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var b0=class{constructor(n,r={},s,o){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.bucketId=s,this.fetch=Wl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,r,s,o){var c=this;try{let u;const h=ce(ce({},yh),o);let m=ce(ce({},c.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const p=h.metadata;typeof Blob<"u"&&s instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),p&&u.append("metadata",c.encodeMetadata(p)),u.append("",s)):typeof FormData<"u"&&s instanceof FormData?(u=s,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),p&&!u.has("metadata")&&u.append("metadata",c.encodeMetadata(p))):(u=s,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType,p&&(m["x-metadata"]=c.toBase64(c.encodeMetadata(p))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),o?.headers&&(m=ce(ce({},m),o.headers));const y=c._removeEmptyFolders(r),w=c._getFinalPath(y),x=await(n=="PUT"?Pl:Ft)(c.fetch,`${c.url}/object/${w}`,u,ce({headers:m},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:y,id:x.Id,fullPath:x.Key},error:null}}catch(u){if(c.shouldThrowOnError)throw u;if(Le(u))return{data:null,error:u};throw u}}async upload(n,r,s){return this.uploadOrUpdate("POST",n,r,s)}async uploadToSignedUrl(n,r,s,o){var c=this;const u=c._removeEmptyFolders(n),h=c._getFinalPath(u),m=new URL(c.url+`/object/upload/sign/${h}`);m.searchParams.set("token",r);try{let p;const y=ce({upsert:yh.upsert},o),w=ce(ce({},c.headers),{"x-upsert":String(y.upsert)});return typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",y.cacheControl),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.append("cacheControl",y.cacheControl)):(p=s,w["cache-control"]=`max-age=${y.cacheControl}`,w["content-type"]=y.contentType),{data:{path:u,fullPath:(await Pl(c.fetch,m.toString(),p,{headers:w})).Key},error:null}}catch(p){if(c.shouldThrowOnError)throw p;if(Le(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(n,r){var s=this;try{let o=s._getFinalPath(n);const c=ce({},s.headers);r?.upsert&&(c["x-upsert"]="true");const u=await Ft(s.fetch,`${s.url}/object/upload/sign/${o}`,{},{headers:c}),h=new URL(s.url+u.url),m=h.searchParams.get("token");if(!m)throw new oi("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:m},error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}}async update(n,r,s){return this.uploadOrUpdate("PUT",n,r,s)}async move(n,r,s){var o=this;try{return{data:await Ft(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:o.headers}),error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(Le(c))return{data:null,error:c};throw c}}async copy(n,r,s){var o=this;try{return{data:{path:(await Ft(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:o.headers})).Key},error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(Le(c))return{data:null,error:c};throw c}}async createSignedUrl(n,r,s){var o=this;try{let c=o._getFinalPath(n),u=await Ft(o.fetch,`${o.url}/object/sign/${c}`,ce({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:o.headers});const h=s?.download?`&download=${s.download===!0?"":s.download}`:"";return u={signedUrl:encodeURI(`${o.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(Le(c))return{data:null,error:c};throw c}}async createSignedUrls(n,r,s){var o=this;try{const c=await Ft(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:r,paths:n},{headers:o.headers}),u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:c.map(h=>ce(ce({},h),{},{signedUrl:h.signedURL?encodeURI(`${o.url}${h.signedURL}${u}`):null})),error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(Le(c))return{data:null,error:c};throw c}}download(n,r){const s=typeof r?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(r?.transform||{}),c=o?`?${o}`:"",u=this._getFinalPath(n),h=()=>On(this.fetch,`${this.url}/${s}/${u}${c}`,{headers:this.headers,noResolveJson:!0});return new v0(h,this.shouldThrowOnError)}async info(n){var r=this;const s=r._getFinalPath(n);try{return{data:Rl(await On(r.fetch,`${r.url}/object/info/${s}`,{headers:r.headers})),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}}async exists(n){var r=this;const s=r._getFinalPath(n);try{return await y0(r.fetch,`${r.url}/object/${s}`,{headers:r.headers}),{data:!0,error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(Le(o)&&o instanceof Tl){const c=o.originalError;if([400,404].includes(c?.status))return{data:!1,error:o}}throw o}}getPublicUrl(n,r){const s=this._getFinalPath(n),o=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&o.push(c);const u=typeof r?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(r?.transform||{});h!==""&&o.push(h);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${s}${m}`)}}}async remove(n){var r=this;try{return{data:await Hl(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:n},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}}async list(n,r,s){var o=this;try{const c=ce(ce(ce({},w0),r),{},{prefix:n||""});return{data:await Ft(o.fetch,`${o.url}/object/list/${o.bucketId}`,c,{headers:o.headers},s),error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(Le(c))return{data:null,error:c};throw c}}async listV2(n,r){var s=this;try{const o=ce({},n);return{data:await Ft(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,o,{headers:s.headers},r),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}};const tf="2.88.0",rf={"X-Client-Info":`storage-js/${tf}`};var _0=class{constructor(n,r={},s,o){this.shouldThrowOnError=!1;const c=new URL(n);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=ce(ce({},rf),r),this.fetch=Wl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var r=this;try{const s=r.listBucketOptionsToQueryString(n);return{data:await On(r.fetch,`${r.url}/bucket${s}`,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}}async getBucket(n){var r=this;try{return{data:await On(r.fetch,`${r.url}/bucket/${n}`,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}}async createBucket(n,r={public:!1}){var s=this;try{return{data:await Ft(s.fetch,`${s.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}}async updateBucket(n,r){var s=this;try{return{data:await Pl(s.fetch,`${s.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}}async emptyBucket(n){var r=this;try{return{data:await Ft(r.fetch,`${r.url}/bucket/${n}/empty`,{},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}}async deleteBucket(n){var r=this;try{return{data:await Hl(r.fetch,`${r.url}/bucket/${n}`,{},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(n){const r={};return n&&("limit"in n&&(r.limit=String(n.limit)),"offset"in n&&(r.offset=String(n.offset)),n.search&&(r.search=n.search),n.sortColumn&&(r.sortColumn=n.sortColumn),n.sortOrder&&(r.sortOrder=n.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},j0=class{constructor(n,r={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ce(ce({},rf),r),this.fetch=Wl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var r=this;try{return{data:await Ft(r.fetch,`${r.url}/bucket`,{name:n},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}}async listBuckets(n){var r=this;try{const s=new URLSearchParams;n?.limit!==void 0&&s.set("limit",n.limit.toString()),n?.offset!==void 0&&s.set("offset",n.offset.toString()),n?.sortColumn&&s.set("sortColumn",n.sortColumn),n?.sortOrder&&s.set("sortOrder",n.sortOrder),n?.search&&s.set("search",n.search);const o=s.toString(),c=o?`${r.url}/bucket?${o}`:`${r.url}/bucket`;return{data:await On(r.fetch,c,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}}async deleteBucket(n){var r=this;try{return{data:await Hl(r.fetch,`${r.url}/bucket/${n}`,{},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}}from(n){var r=this;if(!d0(n))throw new oi("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new o0({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(s,{get(c,u){const h=c[u];return typeof h!="function"?h:async(...m)=>{try{return{data:await h.apply(c,m),error:null}}catch(p){if(o)throw p;return{data:null,error:p}}}}})}};const Kl={"X-Client-Info":`storage-js/${tf}`,"Content-Type":"application/json"};var sf=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function jt(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var ml=class extends sf{constructor(n,r,s){super(n),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},S0=class extends sf{constructor(n,r){super(n),this.name="StorageVectorsUnknownError",this.originalError=r}};const Gl=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),N0=n=>{if(typeof n!="object"||n===null)return!1;const r=Object.getPrototypeOf(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},xh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),k0=async(n,r,s)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!s?.noResolveJson){const o=n.status||500,c=n;if(typeof c.json=="function")c.json().then(u=>{const h=u?.statusCode||u?.code||o+"";r(new ml(xh(u),o,h))}).catch(()=>{const u=o+"";r(new ml(c.statusText||`HTTP ${o} error`,o,u))});else{const u=o+"";r(new ml(c.statusText||`HTTP ${o} error`,o,u))}}else r(new S0(xh(n),n))},E0=(n,r,s,o)=>{const c={method:n,headers:r?.headers||{}};return o?(N0(o)?(c.headers=ce({"Content-Type":"application/json"},r?.headers),c.body=JSON.stringify(o)):c.body=o,ce(ce({},c),s)):c};async function C0(n,r,s,o,c,u){return new Promise((h,m)=>{n(s,E0(r,o,c,u)).then(p=>{if(!p.ok)throw p;if(o?.noResolveJson)return p;const y=p.headers.get("content-type");return!y||!y.includes("application/json")?{}:p.json()}).then(p=>h(p)).catch(p=>k0(p,m,o))})}async function St(n,r,s,o,c){return C0(n,"POST",r,o,c,s)}var T0=class{constructor(n,r={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ce(ce({},Kl),r),this.fetch=Gl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var r=this;try{return{data:await St(r.fetch,`${r.url}/CreateIndex`,n,{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async getIndex(n,r){var s=this;try{return{data:await St(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:n,indexName:r},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(jt(o))return{data:null,error:o};throw o}}async listIndexes(n){var r=this;try{return{data:await St(r.fetch,`${r.url}/ListIndexes`,n,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async deleteIndex(n,r){var s=this;try{return{data:await St(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:n,indexName:r},{headers:s.headers})||{},error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(jt(o))return{data:null,error:o};throw o}}},R0=class{constructor(n,r={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ce(ce({},Kl),r),this.fetch=Gl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var r=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await St(r.fetch,`${r.url}/PutVectors`,n,{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async getVectors(n){var r=this;try{return{data:await St(r.fetch,`${r.url}/GetVectors`,n,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async listVectors(n){var r=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await St(r.fetch,`${r.url}/ListVectors`,n,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async queryVectors(n){var r=this;try{return{data:await St(r.fetch,`${r.url}/QueryVectors`,n,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async deleteVectors(n){var r=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await St(r.fetch,`${r.url}/DeleteVectors`,n,{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}},P0=class{constructor(n,r={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ce(ce({},Kl),r),this.fetch=Gl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var r=this;try{return{data:await St(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async getBucket(n){var r=this;try{return{data:await St(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:n},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async listBuckets(n={}){var r=this;try{return{data:await St(r.fetch,`${r.url}/ListVectorBuckets`,n,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async deleteBucket(n){var r=this;try{return{data:await St(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}},O0=class extends P0{constructor(n,r={}){super(n,r.headers||{},r.fetch)}from(n){return new A0(this.url,this.headers,n,this.fetch)}async createBucket(n){var r=()=>super.createBucket,s=this;return r().call(s,n)}async getBucket(n){var r=()=>super.getBucket,s=this;return r().call(s,n)}async listBuckets(n={}){var r=()=>super.listBuckets,s=this;return r().call(s,n)}async deleteBucket(n){var r=()=>super.deleteBucket,s=this;return r().call(s,n)}},A0=class extends T0{constructor(n,r,s,o){super(n,r,o),this.vectorBucketName=s}async createIndex(n){var r=()=>super.createIndex,s=this;return r().call(s,ce(ce({},n),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(n={}){var r=()=>super.listIndexes,s=this;return r().call(s,ce(ce({},n),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(n){var r=()=>super.getIndex,s=this;return r().call(s,s.vectorBucketName,n)}async deleteIndex(n){var r=()=>super.deleteIndex,s=this;return r().call(s,s.vectorBucketName,n)}index(n){return new I0(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},I0=class extends R0{constructor(n,r,s,o,c){super(n,r,c),this.vectorBucketName=s,this.indexName=o}async putVectors(n){var r=()=>super.putVectors,s=this;return r().call(s,ce(ce({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(n){var r=()=>super.getVectors,s=this;return r().call(s,ce(ce({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(n={}){var r=()=>super.listVectors,s=this;return r().call(s,ce(ce({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(n){var r=()=>super.queryVectors,s=this;return r().call(s,ce(ce({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(n){var r=()=>super.deleteVectors,s=this;return r().call(s,ce(ce({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},U0=class extends _0{constructor(n,r={},s,o){super(n,r,s,o)}from(n){return new b0(this.url,this.headers,n,this.fetch)}get vectors(){return new O0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new j0(this.url+"/iceberg",this.headers,this.fetch)}};const nf="2.88.0",Ts=30*1e3,Ol=3,pl=Ol*Ts,$0="http://localhost:9999",L0="supabase.auth.token",D0={"X-Client-Info":`gotrue-js/${nf}`},Al="X-Supabase-Api-Version",af={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},M0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,z0=600*1e3;class An extends Error{constructor(r,s,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=o}}function ne(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class F0 extends An{constructor(r,s,o){super(r,s,o),this.name="AuthApiError",this.status=s,this.code=o}}function B0(n){return ne(n)&&n.name==="AuthApiError"}class Gr extends An{constructor(r,s){super(r),this.name="AuthUnknownError",this.originalError=s}}class ar extends An{constructor(r,s,o,c){super(r,o,c),this.name=s,this.status=o}}class _t extends ar{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function q0(n){return ne(n)&&n.name==="AuthSessionMissingError"}class js extends ar{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Qa extends ar{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Ya extends ar{constructor(r,s=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function V0(n){return ne(n)&&n.name==="AuthImplicitGrantRedirectError"}class vh extends ar{constructor(r,s=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class W0 extends ar{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Il extends ar{constructor(r,s){super(r,"AuthRetryableFetchError",s,void 0)}}function gl(n){return ne(n)&&n.name==="AuthRetryableFetchError"}class wh extends ar{constructor(r,s,o){super(r,"AuthWeakPasswordError",s,"weak_password"),this.reasons=o}}class Ul extends ar{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const ei="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bh=` 	
\r=`.split(""),H0=(()=>{const n=new Array(128);for(let r=0;r<n.length;r+=1)n[r]=-1;for(let r=0;r<bh.length;r+=1)n[bh[r].charCodeAt(0)]=-2;for(let r=0;r<ei.length;r+=1)n[ei[r].charCodeAt(0)]=r;return n})();function _h(n,r,s){if(n!==null)for(r.queue=r.queue<<8|n,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;s(ei[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;s(ei[o]),r.queuedBits-=6}}function of(n,r,s){const o=H0[n];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)s(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function jh(n){const r=[],s=h=>{r.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=h=>{J0(h,o,s)};for(let h=0;h<n.length;h+=1)of(n.charCodeAt(h),c,u);return r.join("")}function K0(n,r){if(n<=127){r(n);return}else if(n<=2047){r(192|n>>6),r(128|n&63);return}else if(n<=65535){r(224|n>>12),r(128|n>>6&63),r(128|n&63);return}else if(n<=1114111){r(240|n>>18),r(128|n>>12&63),r(128|n>>6&63),r(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function G0(n,r){for(let s=0;s<n.length;s+=1){let o=n.charCodeAt(s);if(o>55295&&o<=56319){const c=(o-55296)*1024&65535;o=(n.charCodeAt(s+1)-56320&65535|c)+65536,s+=1}K0(o,r)}}function J0(n,r,s){if(r.utf8seq===0){if(n<=127){s(n);return}for(let o=1;o<6;o+=1)if((n>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=n&31;else if(r.utf8seq===3)r.codepoint=n&15;else if(r.utf8seq===4)r.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|n&63,r.utf8seq-=1,r.utf8seq===0&&s(r.codepoint)}}function Os(n){const r=[],s={queue:0,queuedBits:0},o=c=>{r.push(c)};for(let c=0;c<n.length;c+=1)of(n.charCodeAt(c),s,o);return new Uint8Array(r)}function Q0(n){const r=[];return G0(n,s=>r.push(s)),new Uint8Array(r)}function Jr(n){const r=[],s={queue:0,queuedBits:0},o=c=>{r.push(c)};return n.forEach(c=>_h(c,s,o)),_h(null,s,o),r.join("")}function Y0(n){return Math.round(Date.now()/1e3)+n}function X0(){return Symbol("auth-callback")}const st=()=>typeof window<"u"&&typeof document<"u",Vr={tested:!1,writable:!1},lf=()=>{if(!st())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vr.tested)return Vr.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Vr.tested=!0,Vr.writable=!0}catch{Vr.tested=!0,Vr.writable=!1}return Vr.writable};function Z0(n){const r={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((c,u)=>{r[u]=c})}catch{}return s.searchParams.forEach((o,c)=>{r[c]=o}),r}const cf=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),ey=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Rs=async(n,r,s)=>{await n.setItem(r,JSON.stringify(s))},Wr=async(n,r)=>{const s=await n.getItem(r);if(!s)return null;try{return JSON.parse(s)}catch{return s}},tt=async(n,r)=>{await n.removeItem(r)};class li{constructor(){this.promise=new li.promiseConstructor((r,s)=>{this.resolve=r,this.reject=s})}}li.promiseConstructor=Promise;function yl(n){const r=n.split(".");if(r.length!==3)throw new Ul("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!M0.test(r[o]))throw new Ul("JWT not in base64url format");return{header:JSON.parse(jh(r[0])),payload:JSON.parse(jh(r[1])),signature:Os(r[2]),raw:{header:r[0],payload:r[1]}}}async function ty(n){return await new Promise(r=>{setTimeout(()=>r(null),n)})}function ry(n,r){return new Promise((o,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await n(u);if(!r(u,null,h)){o(h);return}}catch(h){if(!r(u,h)){c(h);return}}})()})}function sy(n){return("0"+n.toString(16)).substr(-2)}function ny(){const r=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=s.length;let c="";for(let u=0;u<56;u++)c+=s.charAt(Math.floor(Math.random()*o));return c}return crypto.getRandomValues(r),Array.from(r,sy).join("")}async function ay(n){const s=new TextEncoder().encode(n),o=await crypto.subtle.digest("SHA-256",s),c=new Uint8Array(o);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function iy(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=await ay(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ss(n,r,s=!1){const o=ny();let c=o;s&&(c+="/PASSWORD_RECOVERY"),await Rs(n,`${r}-code-verifier`,c);const u=await iy(o);return[u,o===u?"plain":"s256"]}const oy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ly(n){const r=n.headers.get(Al);if(!r||!r.match(oy))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function cy(n){if(!n)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(n<=r)throw new Error("JWT has expired")}function uy(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ns(n){if(!dy.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xl(){const n={};return new Proxy(n,{get:(r,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hy(n,r){return new Proxy(n,{get:(s,o,c)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const u=o.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,o,c)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(s,o,c)}})}function Sh(n){return JSON.parse(JSON.stringify(n))}const Hr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),fy=[502,503,504];async function Nh(n){var r;if(!ey(n))throw new Il(Hr(n),0);if(fy.includes(n.status))throw new Il(Hr(n),n.status);let s;try{s=await n.json()}catch(u){throw new Gr(Hr(u),u)}let o;const c=ly(n);if(c&&c.getTime()>=af["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?o=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(o=s.error_code),o){if(o==="weak_password")throw new wh(Hr(s),n.status,((r=s.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new _t}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new wh(Hr(s),n.status,s.weak_password.reasons);throw new F0(Hr(s),n.status||500,o)}const my=(n,r,s,o)=>{const c={method:n,headers:r?.headers||{}};return n==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),c.body=JSON.stringify(o),Object.assign(Object.assign({},c),s))};async function le(n,r,s,o){var c;const u=Object.assign({},o?.headers);u[Al]||(u[Al]=af["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const h=(c=o?.query)!==null&&c!==void 0?c:{};o?.redirectTo&&(h.redirect_to=o.redirectTo);const m=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",p=await py(n,r,s+m,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(p):{data:Object.assign({},p),error:null}}async function py(n,r,s,o,c,u){const h=my(r,o,c,u);let m;try{m=await n(s,Object.assign({},h))}catch(p){throw console.error(p),new Il(Hr(p),0)}if(m.ok||await Nh(m),o?.noResolveJson)return m;try{return await m.json()}catch(p){await Nh(p)}}function zt(n){var r;let s=null;xy(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=Y0(n.expires_in)));const o=(r=n.user)!==null&&r!==void 0?r:n;return{data:{session:s,user:o},error:null}}function kh(n){const r=zt(n);return!r.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0)&&(r.data.weak_password=n.weak_password),r}function kr(n){var r;return{data:{user:(r=n.user)!==null&&r!==void 0?r:n},error:null}}function gy(n){return{data:n,error:null}}function yy(n){const{action_link:r,email_otp:s,hashed_token:o,redirect_to:c,verification_type:u}=n,h=ii(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:r,email_otp:s,hashed_token:o,redirect_to:c,verification_type:u},p=Object.assign({},h);return{data:{properties:m,user:p},error:null}}function Eh(n){return n}function xy(n){return n.access_token&&n.refresh_token&&n.expires_in}const vl=["global","local","others"];class vy{constructor({url:r="",headers:s={},fetch:o}){this.url=r,this.headers=s,this.fetch=cf(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,s=vl[0]){if(vl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vl.join(", ")}`);try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(ne(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,s={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:kr})}catch(o){if(ne(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:s}=r,o=ii(r,["options"]),c=Object.assign(Object.assign({},o),s);return"newEmail"in o&&(c.new_email=o?.newEmail,delete c.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:yy,redirectTo:s?.redirectTo})}catch(s){if(ne(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(r){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:kr})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async listUsers(r){var s,o,c,u,h,m,p;try{const y={nextPage:null,lastPage:0,total:0},w=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(u=(c=r?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:Eh});if(w.error)throw w.error;const x=await w.json(),j=(h=w.headers.get("x-total-count"))!==null&&h!==void 0?h:0,k=(p=(m=w.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return k.length>0&&(k.forEach(C=>{const _=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(C.split(";")[1].split("=")[1]);y[`${v}Page`]=_}),y.total=parseInt(j)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(ne(y))return{data:{users:[]},error:y};throw y}}async getUserById(r){Ns(r);try{return await le(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:kr})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async updateUserById(r,s){Ns(r);try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:s,headers:this.headers,xform:kr})}catch(o){if(ne(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,s=!1){Ns(r);try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:s},xform:kr})}catch(o){if(ne(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){Ns(r.userId);try{const{data:s,error:o}=await le(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:s,error:o}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _deleteFactor(r){Ns(r.userId),Ns(r.id);try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _listOAuthClients(r){var s,o,c,u,h,m,p;try{const y={nextPage:null,lastPage:0,total:0},w=await le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(u=(c=r?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:Eh});if(w.error)throw w.error;const x=await w.json(),j=(h=w.headers.get("x-total-count"))!==null&&h!==void 0?h:0,k=(p=(m=w.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return k.length>0&&(k.forEach(C=>{const _=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(C.split(";")[1].split("=")[1]);y[`${v}Page`]=_}),y.total=parseInt(j)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(ne(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(r){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _getOAuthClient(r){try{return await le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _updateOAuthClient(r,s){try{return await le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:s,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(ne(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(r){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}}function Ch(n={}){return{getItem:r=>n[r]||null,setItem:(r,s)=>{n[r]=s},removeItem:r=>{delete n[r]}}}const ks={debug:!!(globalThis&&lf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uf extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class wy extends uf{}async function by(n,r,s){ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),ks.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async c=>{if(c){ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,c.name);try{return await s()}finally{ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,c.name)}}else{if(r===0)throw ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new wy(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ks.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function _y(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function df(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function jy(n){return parseInt(n,16)}function Sy(n){const r=new TextEncoder().encode(n);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function Ny(n){var r;const{chainId:s,domain:o,expirationTime:c,issuedAt:u=new Date,nonce:h,notBefore:m,requestId:p,resources:y,scheme:w,uri:x,version:j}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(j!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${j}`);if(!((r=n.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const k=df(n.address),C=w?`${w}://${o}`:o,_=n.statement?`${n.statement}
`:"",v=`${C} wants you to sign in with your Ethereum account:
${k}

${_}`;let R=`URI: ${x}
Version: ${j}
Chain ID: ${s}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(c&&(R+=`
Expiration Time: ${c.toISOString()}`),m&&(R+=`
Not Before: ${m.toISOString()}`),p&&(R+=`
Request ID: ${p}`),y){let P=`
Resources:`;for(const O of y){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);P+=`
- ${O}`}R+=P}return`${v}
${R}`}class We extends Error{constructor({message:r,code:s,cause:o,name:c}){var u;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(u=c??(o instanceof Error?o.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=s}}class ti extends We{constructor(r,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:r}),this.name="WebAuthnUnknownError",this.originalError=s}}function ky({error:n,options:r}){var s,o,c;const{publicKey:u}=r;if(!u)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(r.signal instanceof AbortSignal)return new We({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=u.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new We({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(r.mediation==="conditional"&&((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new We({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new We({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new We({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new We({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return u.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new We({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new We({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const h=window.location.hostname;if(hf(h)){if(u.rp.id!==h)return new We({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new We({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Ey({error:n,options:r}){const{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(r.signal instanceof AbortSignal)return new We({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new We({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(hf(o)){if(s.rpId!==o)return new We({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Cy{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const Ty=new Cy;function Ry(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:r,user:s,excludeCredentials:o}=n,c=ii(n,["challenge","user","excludeCredentials"]),u=Os(r).buffer,h=Object.assign(Object.assign({},s),{id:Os(s.id).buffer}),m=Object.assign(Object.assign({},c),{challenge:u,user:h});if(o&&o.length>0){m.excludeCredentials=new Array(o.length);for(let p=0;p<o.length;p++){const y=o[p];m.excludeCredentials[p]=Object.assign(Object.assign({},y),{id:Os(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return m}function Py(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:r,allowCredentials:s}=n,o=ii(n,["challenge","allowCredentials"]),c=Os(r).buffer,u=Object.assign(Object.assign({},o),{challenge:c});if(s&&s.length>0){u.allowCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const m=s[h];u.allowCredentials[h]=Object.assign(Object.assign({},m),{id:Os(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function Oy(n){var r;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:Jr(new Uint8Array(n.response.attestationObject)),clientDataJSON:Jr(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Ay(n){var r;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,o=n.getClientExtensionResults(),c=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Jr(new Uint8Array(c.authenticatorData)),clientDataJSON:Jr(new Uint8Array(c.clientDataJSON)),signature:Jr(new Uint8Array(c.signature)),userHandle:c.userHandle?Jr(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function hf(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Th(){var n,r;return!!(st()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function Iy(n){try{const r=await navigator.credentials.create(n);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new ti("Browser returned unexpected credential type",r)}:{data:null,error:new ti("Empty credential response",r)}}catch(r){return{data:null,error:ky({error:r,options:n})}}}async function Uy(n){try{const r=await navigator.credentials.get(n);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new ti("Browser returned unexpected credential type",r)}:{data:null,error:new ti("Empty credential response",r)}}catch(r){return{data:null,error:Ey({error:r,options:n})}}}const $y={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ly={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ri(...n){const r=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),s=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),o={};for(const c of n)if(c)for(const u in c){const h=c[u];if(h!==void 0)if(Array.isArray(h))o[u]=h;else if(s(h))o[u]=h;else if(r(h)){const m=o[u];r(m)?o[u]=ri(m,h):o[u]=ri(h)}else o[u]=h}return o}function Dy(n,r){return ri($y,n,r||{})}function My(n,r){return ri(Ly,n,r||{})}class zy{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:s,friendlyName:o,signal:c},u){try{const{data:h,error:m}=await this.client.mfa.challenge({factorId:r,webauthn:s});if(!h)return{data:null,error:m};const p=c??Ty.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:y}=h.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${o}`),y.displayName||(y.displayName=y.name)}switch(h.webauthn.type){case"create":{const y=Dy(h.webauthn.credential_options.publicKey,u?.create),{data:w,error:x}=await Iy({publicKey:y,signal:p});return w?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:w}},error:null}:{data:null,error:x}}case"request":{const y=My(h.webauthn.credential_options.publicKey,u?.request),{data:w,error:x}=await Uy(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:y,signal:p}));return w?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:w}},error:null}:{data:null,error:x}}}}catch(h){return ne(h)?{data:null,error:h}:{data:null,error:new Gr("Unexpected error in challenge",h)}}}async _verify({challengeId:r,factorId:s,webauthn:o}){return this.client.mfa.verify({factorId:s,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!s)return{data:null,error:new An("rpId is required for WebAuthn authentication")};try{if(!Th())return{data:null,error:new Gr("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this.challenge({factorId:r,webauthn:{rpId:s,rpOrigins:o},signal:c},{request:u});if(!h)return{data:null,error:m};const{webauthn:p}=h;return this._verify({factorId:r,challengeId:h.challengeId,webauthn:{type:p.type,rpId:s,rpOrigins:o,credential_response:p.credential_response}})}catch(h){return ne(h)?{data:null,error:h}:{data:null,error:new Gr("Unexpected error in authenticate",h)}}}async _register({friendlyName:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!s)return{data:null,error:new An("rpId is required for WebAuthn registration")};try{if(!Th())return{data:null,error:new Gr("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this._enroll({friendlyName:r});if(!h)return await this.client.mfa.listFactors().then(w=>{var x;return(x=w.data)===null||x===void 0?void 0:x.all.find(j=>j.factor_type==="webauthn"&&j.friendly_name===r&&j.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w?.id}):void 0),{data:null,error:m};const{data:p,error:y}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:s,rpOrigins:o},signal:c},{create:u});return p?this._verify({factorId:h.id,challengeId:p.challengeId,webauthn:{rpId:s,rpOrigins:o,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:y}}catch(h){return ne(h)?{data:null,error:h}:{data:null,error:new Gr("Unexpected error in register",h)}}}}_y();const Fy={url:$0,storageKey:L0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:D0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Rh(n,r,s){return await s()}const Es={};class In{get jwks(){var r,s;return(s=(r=Es[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(r){Es[this.storageKey]=Object.assign(Object.assign({},Es[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,s;return(s=(r=Es[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Es[this.storageKey]=Object.assign(Object.assign({},Es[this.storageKey]),{cachedAt:r})}constructor(r){var s,o,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},Fy),r);if(this.storageKey=u.storageKey,this.instanceID=(s=In.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,In.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&st()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new vy({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=cf(u.fetch),this.lock=u.lock||Rh,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&st()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=by:this.lock=Rh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new zy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:lf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ch(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Ch(this.memoryStorage)),st()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${nf}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let s={},o="none";if(st()&&(s=Z0(window.location.href),this._isImplicitGrantCallback(s)?o="implicit":await this._isPKCECallback(s)&&(o="pkce")),st()&&this.detectSessionInUrl&&o!=="none"){const{data:c,error:u}=await this._getSessionFromURL(s,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),V0(u)){const p=(r=u.details)===null||r===void 0?void 0:r.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",m),await this._saveSession(h),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ne(s)?this._returnResult({error:s}):this._returnResult({error:new Gr("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var s,o,c;try{const u=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(s=r?.options)===null||s===void 0?void 0:s.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(c=r?.options)===null||c===void 0?void 0:c.captchaToken}},xform:zt}),{data:h,error:m}=u;if(m||!h)return this._returnResult({data:{user:null,session:null},error:m});const p=h.session,y=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:y,session:p},error:null})}catch(u){if(ne(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(r){var s,o,c;try{let u;if("email"in r){const{email:w,password:x,options:j}=r;let k=null,C=null;this.flowType==="pkce"&&([k,C]=await Ss(this.storage,this.storageKey)),u=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j?.emailRedirectTo,body:{email:w,password:x,data:(s=j?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:j?.captchaToken},code_challenge:k,code_challenge_method:C},xform:zt})}else if("phone"in r){const{phone:w,password:x,options:j}=r;u=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:x,data:(o=j?.data)!==null&&o!==void 0?o:{},channel:(c=j?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:j?.captchaToken}},xform:zt})}else throw new Qa("You must provide either an email or phone number and a password");const{data:h,error:m}=u;if(m||!h)return await tt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const p=h.session,y=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:y,session:p},error:null})}catch(u){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ne(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(r){try{let s;if("email"in r){const{email:u,password:h,options:m}=r;s=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:kh})}else if("phone"in r){const{phone:u,password:h,options:m}=r;s=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:kh})}else throw new Qa("You must provide either an email or phone number and a password");const{data:o,error:c}=s;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o||!o.session||!o.user){const u=new js;return this._returnResult({data:{user:null,session:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:c})}catch(s){if(ne(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(r){var s,o,c,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(s=r.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=r.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:s}=r;switch(s){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(r){var s,o,c,u,h,m,p,y,w,x,j;let k,C;if("message"in r)k=r.message,C=r.signature;else{const{chain:_,wallet:v,statement:R,options:P}=r;let O;if(st())if(typeof v=="object")O=v;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")O=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=v}const L=new URL((s=P?.url)!==null&&s!==void 0?s:window.location.href),z=await O.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!z||z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const H=df(z[0]);let Y=(o=P?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!Y){const K=await O.request({method:"eth_chainId"});Y=jy(K)}const Z={domain:L.host,address:H,statement:R,uri:L.href,version:"1",chainId:Y,nonce:(c=P?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(h=(u=P?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(m=P?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=P?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(y=P?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(w=P?.signInWithEthereum)===null||w===void 0?void 0:w.resources};k=Ny(Z),C=await O.request({method:"personal_sign",params:[Sy(k),H]})}try{const{data:_,error:v}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:C},!((x=r.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(j=r.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:zt});if(v)throw v;if(!_||!_.session||!_.user){const R=new js;return this._returnResult({data:{user:null,session:null},error:R})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:v})}catch(_){if(ne(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(r){var s,o,c,u,h,m,p,y,w,x,j,k;let C,_;if("message"in r)C=r.message,_=r.signature;else{const{chain:v,wallet:R,statement:P,options:O}=r;let L;if(st())if(typeof R=="object")L=R;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))L=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=R}const z=new URL((s=O?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in L&&L.signIn){const H=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),P?{statement:P}:null));let Y;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")Y=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)Y=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)C=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),_=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${z.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(c=(o=O?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=O?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((h=O?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((m=O?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((p=O?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((y=O?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((x=(w=O?.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||x===void 0)&&x.length?["Resources",...O.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const H=await L.signMessage(new TextEncoder().encode(C),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=H}}try{const{data:v,error:R}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Jr(_)},!((j=r.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(k=r.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:zt});if(R)throw R;if(!v||!v.session||!v.user){const P=new js;return this._returnResult({data:{user:null,session:null},error:P})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:R})}catch(v){if(ne(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(r){const s=await Wr(this.storage,`${this.storageKey}-code-verifier`),[o,c]=(s??"").split("/");try{if(!o&&this.flowType==="pkce")throw new W0;const{data:u,error:h}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:zt});if(await tt(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const m=new js;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:h})}catch(u){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ne(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(r){try{const{options:s,provider:o,token:c,access_token:u,nonce:h}=r,m=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:c,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:zt}),{data:p,error:y}=m;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!p||!p.session||!p.user){const w=new js;return this._returnResult({data:{user:null,session:null},error:w})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:y})}catch(s){if(ne(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(r){var s,o,c,u,h;try{if("email"in r){const{email:m,options:p}=r;let y=null,w=null;this.flowType==="pkce"&&([y,w]=await Ss(this.storage,this.storageKey));const{error:x}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(s=p?.data)!==null&&s!==void 0?s:{},create_user:(o=p?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:y,code_challenge_method:w},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in r){const{phone:m,options:p}=r,{data:y,error:w}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=p?.data)!==null&&c!==void 0?c:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(h=p?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:w})}throw new Qa("You must provide either an email or phone number.")}catch(m){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ne(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(r){var s,o;try{let c,u;"options"in r&&(c=(s=r.options)===null||s===void 0?void 0:s.redirectTo,u=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:m}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:zt});if(m)throw m;if(!h)throw new Error("An error occurred on token verification.");const p=h.session,y=h.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:y,session:p},error:null})}catch(c){if(ne(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(r){var s,o,c,u,h;try{let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Ss(this.storage,this.storageKey));const y=await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(s=r.options)===null||s===void 0?void 0:s.redirectTo)!==null&&o!==void 0?o:void 0}),!((c=r?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:p}),headers:this.headers,xform:gy});return!((u=y.data)===null||u===void 0)&&u.url&&st()&&!(!((h=r.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(m){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ne(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)throw o;if(!s)throw new _t;const{error:c}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(r){if(ne(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const s=`${this.url}/resend`;if("email"in r){const{email:o,type:c,options:u}=r,{error:h}=await le(this.fetch,"POST",s,{headers:this.headers,body:{email:o,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in r){const{phone:o,type:c,options:u}=r,{data:h,error:m}=await le(this.fetch,"POST",s,{headers:this.headers,body:{phone:o,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:m})}throw new Qa("You must provide either an email or phone number and a type")}catch(s){if(ne(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(r,s){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await o,await s()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=s();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await r(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const s=await Wr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?r=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<pl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const h=await Wr(this.userStorage,this.storageKey+"-user");h?.user?r.user=h.user:r.user=xl()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};r.user=hy(r.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:c,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const s=await this._acquireLock(-1,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(r){try{return r?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:kr}):await this._useSession(async s=>{var o,c,u;const{data:h,error:m}=s;if(m)throw m;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _t}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:kr})})}catch(s){if(ne(s))return q0(s)&&(await this._removeSession(),await tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(r,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,s))}async _updateUser(r,s={}){try{return await this._useSession(async o=>{const{data:c,error:u}=o;if(u)throw u;if(!c.session)throw new _t;const h=c.session;let m=null,p=null;this.flowType==="pkce"&&r.email!=null&&([m,p]=await Ss(this.storage,this.storageKey));const{data:y,error:w}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:m,code_challenge_method:p}),jwt:h.access_token,xform:kr});if(w)throw w;return h.user=y.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(o){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ne(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new _t;const s=Date.now()/1e3;let o=s,c=!0,u=null;const{payload:h}=yl(r.access_token);if(h.exp&&(o=h.exp,c=o<=s),c){const{data:m,error:p}=await this._callRefreshToken(r.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:p}=await this._getUser(r.access_token);if(p)throw p;u={access_token:r.access_token,refresh_token:r.refresh_token,user:m.user,token_type:"bearer",expires_in:o-s,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(s){if(ne(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async s=>{var o;if(!r){const{data:h,error:m}=s;if(m)throw m;r=(o=h.session)!==null&&o!==void 0?o:void 0}if(!r?.refresh_token)throw new _t;const{data:c,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(ne(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(r,s){try{if(!st())throw new Ya("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Ya(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new vh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ya("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new vh("No code detected.");const{data:P,error:O}=await this._exchangeCodeForSession(r.code);if(O)throw O;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:c,access_token:u,refresh_token:h,expires_in:m,expires_at:p,token_type:y}=r;if(!u||!m||!h||!y)throw new Ya("No session defined in URL");const w=Math.round(Date.now()/1e3),x=parseInt(m);let j=w+x;p&&(j=parseInt(p));const k=j-w;k*1e3<=Ts&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${x}s`);const C=j-x;w-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,j,w):w-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,j,w);const{data:_,error:v}=await this._getUser(u);if(v)throw v;const R={provider_token:o,provider_refresh_token:c,access_token:u,expires_in:x,expires_at:j,refresh_token:h,token_type:y,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:R,redirectType:r.type},error:null})}catch(o){if(ne(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const s=await Wr(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&s)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async s=>{var o;const{data:c,error:u}=s;if(u)return this._returnResult({error:u});const h=(o=c.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:m}=await this.admin.signOut(h,r);if(m&&!(B0(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return r!=="others"&&(await this._removeSession(),await tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const s=X0(),o={id:s,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async s=>{var o,c;try{const{data:{session:u},error:h}=s;if(h)throw h;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(r))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,s={}){let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Ss(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:c,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ne(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var r;try{const{data:s,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=s.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var s;try{const{data:o,error:c}=await this._useSession(async u=>{var h,m,p,y,w;const{data:x,error:j}=u;if(j)throw j;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(h=r.options)===null||h===void 0?void 0:h.redirectTo,scopes:(m=r.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",k,{headers:this.headers,jwt:(w=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&w!==void 0?w:void 0})});if(c)throw c;return st()&&!(!((s=r.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:r.provider,url:o?.url},error:null})}catch(o){if(ne(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async s=>{var o;try{const{error:c,data:{session:u}}=s;if(c)throw c;const{options:h,provider:m,token:p,access_token:y,nonce:w}=r,x=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=u?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:m,id_token:p,access_token:y,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:zt}),{data:j,error:k}=x;return k?this._returnResult({data:{user:null,session:null},error:k}):!j||!j.session||!j.user?this._returnResult({data:{user:null,session:null},error:new js}):(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("USER_UPDATED",j.session)),this._returnResult({data:j,error:k}))}catch(c){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ne(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(r){try{return await this._useSession(async s=>{var o,c;const{data:u,error:h}=s;if(h)throw h;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0})})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(r){const s=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(s,"begin");try{const o=Date.now();return await ry(async c=>(c>0&&await ty(200*Math.pow(2,c-1)),this._debug(s,"refreshing attempt",c),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:zt})),(c,u)=>{const h=200*Math.pow(2,c);return u&&gl(u)&&Date.now()+h-o<Ts})}catch(o){if(this._debug(s,"error",o),ne(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(s,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,s){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",s,"url",o),st()&&!s.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,s;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const c=await Wr(this.storage,this.storageKey);if(c&&this.userStorage){let h=await Wr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await Rs(this.userStorage,this.storageKey+"-user",h)),c.user=(r=h?.user)!==null&&r!==void 0?r:xl()}else if(c&&!c.user&&!c.user){const h=await Wr(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await tt(this.storage,this.storageKey+"-user"),await Rs(this.storage,this.storageKey,c)):c.user=xl()}if(this._debug(o,"session from storage",c),!this._isValidSession(c)){this._debug(o,"session is not valid"),c!==null&&await this._removeSession();return}const u=((s=c.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<pl;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${pl}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),gl(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:m}=await this._getUser(c.access_token);!m&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(o,"error",c),console.error(c);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var s,o;if(!r)throw new _t;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new li;const{data:u,error:h}=await this._refreshAccessToken(r);if(h)throw h;if(!u.session)throw new _t;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={data:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(c,"error",u),ne(u)){const h={data:null,error:u};return gl(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(r,s,o=!0){const c=`#_notifyAllSubscribers(${r})`;this._debug(c,"begin",s,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:s});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(r,s)}catch(p){u.push(p)}});if(await Promise.all(h),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await tt(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},r),o=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&s.user&&await Rs(this.userStorage,this.storageKey+"-user",{user:s.user});const c=Object.assign({},s);delete c.user;const u=Sh(c);await Rs(this.storage,this.storageKey,u)}else{const c=Sh(s);await Rs(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await tt(this.storage,this.storageKey),await tt(this.storage,this.storageKey+"-code-verifier"),await tt(this.storage,this.storageKey+"-user"),this.userStorage&&await tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&st()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Ts);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async s=>{const{data:{session:o}}=s;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((o.expires_at*1e3-r)/Ts);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Ts}ms, refresh threshold is ${Ol} ticks`),c<=Ol&&await this._callRefreshToken(o.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof uf)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!st()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const s=`#_onVisibilityChanged(${r})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,s,o){const c=[`provider=${encodeURIComponent(s)}`];if(o?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&c.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,h]=await Ss(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(m.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);c.push(u.toString())}return o?.skipBrowserRedirect&&c.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${c.join("&")}`}async _unenroll(r){try{return await this._useSession(async s=>{var o;const{data:c,error:u}=s;return u?this._returnResult({data:null,error:u}):await le(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(r){try{return await this._useSession(async s=>{var o,c;const{data:u,error:h}=s;if(h)return this._returnResult({data:null,error:h});const m=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:p,error:y}=await le(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return y?this._returnResult({data:null,error:y}):(r.factorType==="totp"&&p.type==="totp"&&(!((c=p?.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:c,error:u}=s;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?Oy(r.webauthn.credential_response):Ay(r.webauthn.credential_response)})}:{code:r.code}),{data:m,error:p}=await le(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:h,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:c,error:u}=s;if(u)return this._returnResult({data:null,error:u});const h=await le(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});if(h.error)return h;const{data:m}=h;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Ry(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Py(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(r){const{data:s,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:s.id,code:r.code})}async _listFactors(){var r;const{data:{user:s},error:o}=await this.getUser();if(o)return{data:null,error:o};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(r=s?.factors)!==null&&r!==void 0?r:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var r,s;const{data:{session:o},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=yl(o.access_token);let h=null;u.aal&&(h=u.aal);let m=h;((s=(r=o.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(m="aal2");const y=u.amr||[];return{data:{currentLevel:h,nextLevel:m,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;return c?this._returnResult({data:null,error:c}):o?await le(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new _t})})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(r,s){try{return await this._useSession(async o=>{const{data:{session:c},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new _t});const h=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return h.data&&h.data.redirect_url&&st()&&!s?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(o){if(ne(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,s){try{return await this._useSession(async o=>{const{data:{session:c},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new _t});const h=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return h.data&&h.data.redirect_url&&st()&&!s?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(o){if(ne(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;return o?this._returnResult({data:null,error:o}):s?await le(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new _t})})}catch(r){if(ne(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;return c?this._returnResult({data:null,error:c}):o?(await le(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new _t})})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(r,s={keys:[]}){let o=s.keys.find(m=>m.kid===r);if(o)return o;const c=Date.now();if(o=this.jwks.keys.find(m=>m.kid===r),o&&this.jwks_cached_at+z0>c)return o;const{data:u,error:h}=await le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,o=u.keys.find(m=>m.kid===r),!o)?null:o}async getClaims(r,s={}){try{let o=r;if(!o){const{data:k,error:C}=await this.getSession();if(C||!k.session)return this._returnResult({data:null,error:C});o=k.session.access_token}const{header:c,payload:u,signature:h,raw:{header:m,payload:p}}=yl(o);s?.allowExpired||cy(u.exp);const y=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!y){const{error:k}=await this.getUser(o);if(k)throw k;return{data:{claims:u,header:c,signature:h},error:null}}const w=uy(c.alg),x=await crypto.subtle.importKey("jwk",y,w,!0,["verify"]);if(!await crypto.subtle.verify(w,x,h,Q0(`${m}.${p}`)))throw new Ul("Invalid JWT signature");return{data:{claims:u,header:c,signature:h},error:null}}catch(o){if(ne(o))return this._returnResult({data:null,error:o});throw o}}}In.nextInstanceID={};const By=In,qy="2.88.0";let Nn="";typeof Deno<"u"?Nn="deno":typeof document<"u"?Nn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nn="react-native":Nn="node";const Vy={"X-Client-Info":`supabase-js-${Nn}/${qy}`},Wy={headers:Vy},Hy={schema:"public"},Ky={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Gy={};function Un(n){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Un(n)}function Jy(n,r){if(Un(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var o=s.call(n,r);if(Un(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function Qy(n){var r=Jy(n,"string");return Un(r)=="symbol"?r:r+""}function Yy(n,r,s){return(r=Qy(r))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,n}function Ph(n,r){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);r&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable})),s.push.apply(s,o)}return s}function ze(n){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Ph(Object(s),!0).forEach(function(o){Yy(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Ph(Object(s)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(s,o))})}return n}const Xy=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),Zy=()=>Headers,ex=(n,r,s)=>{const o=Xy(s),c=Zy();return async(u,h)=>{var m;const p=(m=await r())!==null&&m!==void 0?m:n;let y=new c(h?.headers);return y.has("apikey")||y.set("apikey",n),y.has("Authorization")||y.set("Authorization",`Bearer ${p}`),o(u,ze(ze({},h),{},{headers:y}))}};function tx(n){return n.endsWith("/")?n:n+"/"}function rx(n,r){var s,o;const{db:c,auth:u,realtime:h,global:m}=n,{db:p,auth:y,realtime:w,global:x}=r,j={db:ze(ze({},p),c),auth:ze(ze({},y),u),realtime:ze(ze({},w),h),storage:{},global:ze(ze(ze({},x),m),{},{headers:ze(ze({},(s=x?.headers)!==null&&s!==void 0?s:{}),(o=m?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return n.accessToken?j.accessToken=n.accessToken:delete j.accessToken,j}function sx(n){const r=n?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tx(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var nx=class extends By{constructor(n){super(n)}},ax=class{constructor(n,r,s){var o,c;this.supabaseUrl=n,this.supabaseKey=r;const u=sx(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:Hy,realtime:Gy,auth:ze(ze({},Ky),{},{storageKey:h}),global:Wy},p=rx(s??{},m);if(this.storageKey=(o=p.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=p.global.headers)!==null&&c!==void 0?c:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(w,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var y;this.auth=this._initSupabaseAuthClient((y=p.auth)!==null&&y!==void 0?y:{},this.headers,p.global.fetch)}this.fetch=ex(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(ze({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new Dg(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new U0(this.storageUrl.href,this.headers,this.fetch,s?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new Ag(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,r,s)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,r,s;if(n.accessToken)return await n.accessToken();const{data:o}=await n.auth.getSession();return(r=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:o,userStorage:c,storageKey:u,flowType:h,lock:m,debug:p,throwOnError:y},w,x){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nx({url:this.authUrl.href,headers:ze(ze({},j),w),storageKey:u,autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:o,userStorage:c,flowType:h,lock:m,debug:p,throwOnError:y,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new t0(this.realtimeUrl.href,ze(ze({},n),{},{params:ze(ze({},{apikey:this.supabaseKey}),n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(n,r,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ff=(n,r,s)=>new ax(n,r,s);function ix(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}ix()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mf="https://aqhnxwzrtrwbqzirwkls.supabase.co",ox="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFxaG54d3pydHJ3YnF6aXJ3a2xzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5ODU2MDIsImV4cCI6MjA4MTU2MTYwMn0.WgaxYf6Sn5g25hFjlEAl4RkwdkPrKTS1c38YOGR_Lwc",lx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFxaG54d3pydHJ3YnF6aXJ3a2xzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NTk4NTYwMiwiZXhwIjoyMDgxNTYxNjAyfQ.9JavlmrHgp3-1zRvQD6kH3ksf6r8qWNZA85j6Icw0ng",J=ff(mf,ox);ff(mf,lx,{auth:{autoRefreshToken:!1,persistSession:!1}});const cx=async(n,r,s,o="student")=>{try{console.log(" Starting signup for:",n);const{data:c,error:u}=await J.auth.signUp({email:n,password:r,options:{data:{full_name:s,role:o}}});if(u)throw console.error(" Auth signup error:",u),new Error(`Auth signup failed: ${u.message}`);if(!c.user)throw new Error("No auth user created");const h=c.user.id;console.log(" Auth user created:",h);const{error:m}=await J.from("users").insert({id:h,full_name:s,email:n,role:o});if(m)throw console.error(" Users table error:",m),new Error(`Users insert failed: ${m.message}`);console.log(" User record created");const{error:p}=await J.from("user_profiles").insert({id:h,full_name:s,email:n,role:o,is_active:!0,is_blocked:!1});if(p)throw console.error(" User profiles error:",p),new Error(`Profile insert failed: ${p.message}`);return console.log(" User profile created"),{success:!0,message:"Signup successful! Please check your email to confirm your account.",user:c.user}}catch(c){return console.error(" Signup failed:",c),{success:!1,error:c instanceof Error?c.message:"Unknown signup error"}}},ux=async(n,r)=>{try{console.log(" Starting login for:",n);const{data:s,error:o}=await J.auth.signInWithPassword({email:n,password:r});if(o)throw console.error(" Auth login error:",o),o.message==="Invalid login credentials"?new Error("Invalid email or password"):new Error(o.message||"Login failed");if(!s.user)throw new Error("No user returned from auth");console.log(" Auth login successful:",s.user.id);const{data:c,error:u}=await J.from("user_profiles").select("id, email, full_name, role, is_blocked, is_active, created_at").eq("id",s.user.id).single();if(u)return console.warn(" Profile not found, using auth user data:",u.message),console.log(" Login successful (auth user only)"),{user:s.user,profile:{id:s.user.id,email:s.user.email||"",full_name:s.user.user_metadata?.full_name||"",role:s.user.user_metadata?.role||"student",is_blocked:!1,is_active:!0}};if(c&&c.is_blocked)throw console.warn(" User is blocked"),await J.auth.signOut(),new Error("Your account has been blocked. Please contact support.");if(c&&!c.is_active)throw console.warn(" User is inactive"),await J.auth.signOut(),new Error("Your account is inactive. Please contact support.");return console.log(" Login successful:",c),{user:s.user,profile:c}}catch(s){console.error(" Login failed:",s);const o=s instanceof Error?s.message:"Login failed. Please try again.";throw new Error(o)}},dx=async()=>{try{console.log(" Signing out...");const{error:n}=await J.auth.signOut();if(n)throw console.error(" Signout error:",n),n;return console.log(" Signed out successfully"),{success:!0}}catch(n){return console.error(" Signout failed:",n),{success:!1,error:n instanceof Error?n.message:"Unknown signout error"}}},hx=async()=>{try{const{data:{user:n},error:r}=await J.auth.getUser();if(r||!n)return console.log(" No authenticated user"),null;const{data:s,error:o}=await J.from("user_profiles").select("id, email, full_name, role, is_blocked, is_active, created_at").eq("id",n.id).single();return o?(console.warn(" Could not fetch user profile:",o),{id:n.id,email:n.email||"",full_name:n.user_metadata?.full_name||"",role:n.user_metadata?.role||"student",is_blocked:!1,is_active:!0}):s}catch(n){return console.error(" Error getting current user:",n),null}},fx="/assets/smartVerg-Du_eA8oO.jpeg",mx="/assets/onlylogo-CnOSBb8B.jpeg",px=({onLogin:n})=>{const[r,s]=N.useState(!1),[o,c]=N.useState(""),[u,h]=N.useState(""),[m,p]=N.useState(""),[y,w]=N.useState("student"),[x,j]=N.useState(""),[k,C]=N.useState(!1),_=async v=>{v.preventDefault(),j(""),C(!0);try{r?(await cx(o,u,m,y),alert("Account created! Please check your email to verify your account."),s(!1),c(""),h(""),p(""),w("student")):(await ux(o,u),n())}catch(R){j(R.message||"An error occurred")}finally{C(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center p-4",children:i.jsxs("div",{className:"relative bg-gray-50 rounded-3xl shadow-2xl w-full max-w-md p-10 overflow-hidden",children:[i.jsx("img",{src:mx,alt:"EduVerge watermark",className:"pointer-events-none select-none absolute -top-10 -right-16 w-80 opacity-15 blur-[1px]"}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.jsx("div",{className:"bg-primary-100 p-3 rectangle-full mb-4 shadow-sm",children:i.jsx("img",{src:fx,alt:"EduVerge logo",className:"w-16 h-16 object-contain"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"EduVerge"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Smart Learning & Assessment"})]}),i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),i.jsx("input",{type:"text",value:m,onChange:v=>p(v.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900",required:!0,placeholder:"Enter your full name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:o,onChange:v=>c(v.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),i.jsx("input",{type:"password",value:u,onChange:v=>h(v.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900",required:!0,minLength:6})]}),r&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),i.jsxs("select",{value:y,onChange:v=>w(v.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900",children:[i.jsx("option",{value:"student",children:"Student"}),i.jsx("option",{value:"faculty",children:"Faculty"})]})]}),x&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:x}),i.jsx("button",{type:"submit",disabled:k,className:"w-full bg-primary-600 hover:bg-primary-700 text-blue-500 font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Loading...":r?"Sign Up":"Sign In"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("button",{onClick:()=>{s(!r),j(""),p(""),c(""),h("")},className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:r?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]})]})})};var gx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yx=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ye=(n,r)=>{const s=N.forwardRef(({color:o="currentColor",size:c=24,strokeWidth:u=2,absoluteStrokeWidth:h,className:m="",children:p,...y},w)=>N.createElement("svg",{ref:w,...gx,width:c,height:c,stroke:o,strokeWidth:h?Number(u)*24/Number(c):u,className:["lucide",`lucide-${yx(n)}`,m].join(" "),...y},[...r.map(([x,j])=>N.createElement(x,j)),...Array.isArray(p)?p:[p]]));return s.displayName=`${n}`,s};const Tr=ye("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Jl=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const si=ye("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Gt=ye("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);const pf=ye("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const xx=ye("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const vx=ye("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const gf=ye("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const As=ye("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Oh=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const wx=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const bx=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const $n=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const ci=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const wl=ye("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const bl=ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Qr=ye("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);const $l=ye("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const Ln=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const _x=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const jx=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Sx=ye("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);const Ll=ye("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const yf=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Nx=ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const xf=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const vf=ye("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const kx=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const ni=ye("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const Ex=ye("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);const ui=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const wf=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Ah=ye("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);const Ih=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Ql=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Is=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Cx=ye("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Yl=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Oe=({user:n})=>{const r=Nt(),s=Ls(),o=async()=>{try{await dx(),r("/login"),window.location.reload()}catch(u){console.error("Error signing out:",u)}},c=u=>s.pathname===u;return i.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col shadow-sm",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:i.jsx(Gt,{className:"w-5 h-5 text-white"})}),i.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"EduVerge"})]}),i.jsx("p",{className:"text-sm font-medium text-gray-800",children:n.full_name}),i.jsx("p",{className:"text-xs text-gray-500 capitalize mt-1",children:n.role==="admin"?" Admin":n.role==="faculty"?" Faculty":" Student"})]}),i.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[n.role==="admin"&&i.jsxs(i.Fragment,{children:[i.jsxs(bt,{to:"/admin/dashboard",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/admin/dashboard")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[i.jsx(si,{className:"w-5 h-5"}),i.jsx("span",{children:"Admin Dashboard"})]}),i.jsxs(bt,{to:"/admin/users",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/admin/users")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[i.jsx(Is,{className:"w-5 h-5"}),i.jsx("span",{children:"User Management"})]}),i.jsxs(bt,{to:"/admin/submissions",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/admin/submissions")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[i.jsx(Qr,{className:"w-5 h-5"}),i.jsx("span",{children:"View Submissions"})]}),i.jsxs(bt,{to:"/admin/analytics",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/admin/analytics")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[i.jsx(si,{className:"w-5 h-5"}),i.jsx("span",{children:"Analytics"})]})]}),n.role==="faculty"&&i.jsxs(i.Fragment,{children:[i.jsxs(bt,{to:"/",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/faculty/dashboard")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[i.jsx($l,{className:"w-5 h-5"}),i.jsx("span",{children:"Dashboar"})]}),i.jsxs(bt,{to:"/create-assessment",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/create-assessment")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[i.jsx(Ll,{className:"w-5 h-5"}),i.jsx("span",{children:"Create Assessment"})]}),i.jsxs(bt,{to:"/course-materials",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/course-materials")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[i.jsx(Qr,{className:"w-5 h-5"}),i.jsx("span",{children:"Course Materials"})]})]}),n.role==="student"&&i.jsxs(i.Fragment,{children:[i.jsxs(bt,{to:"/",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/faculty/dashboard")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[i.jsx($l,{className:"w-5 h-5"}),i.jsx("span",{children:"Dashboar"})]}),i.jsxs(bt,{to:"/courses",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/courses")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[i.jsx(Gt,{className:"w-5 h-5"}),i.jsx("span",{children:"Course Materials"})]}),i.jsxs(bt,{to:"/score-calculator",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/score-calculator")?"bg-purple-100 text-purple-700":"text-gray-700 hover:bg-purple-50 hover:text-purple-700"}`,children:[i.jsx(vx,{className:"w-5 h-5"}),i.jsx("span",{children:"Score Calculator"})]}),i.jsxs(bt,{to:"/ai-assistant",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/ai-assistant")?"bg-gradient-to-r from-purple-100 to-blue-100 text-purple-700":"text-gray-700 hover:bg-purple-50 hover:text-purple-700"}`,children:[i.jsx(ni,{className:"w-5 h-5"}),i.jsx("span",{children:"AI Assistant"})]})]}),i.jsx("div",{className:"my-4 h-px bg-gray-200"}),i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 py-2",children:"Settings"}),i.jsxs(bt,{to:"/profile",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/profile")?"bg-green-100 text-green-700":"text-gray-700 hover:bg-green-50 hover:text-green-700"}`,children:[i.jsx(Ql,{className:"w-5 h-5"}),i.jsx("span",{children:"My Profile"})]}),i.jsxs(bt,{to:"/change-password",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${c("/change-password")?"bg-orange-100 text-orange-700":"text-gray-700 hover:bg-orange-50 hover:text-orange-700"}`,children:[i.jsx(Ln,{className:"w-5 h-5"}),i.jsx("span",{children:"Change Password"})]})]}),i.jsx("div",{className:"mx-4 h-px bg-gray-200"}),i.jsx("div",{className:"p-4",children:i.jsxs("button",{onClick:o,className:"flex items-center gap-3 px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors w-full font-medium",children:[i.jsx(_x,{className:"w-5 h-5"}),i.jsx("span",{children:"Sign Out"})]})})]})},Tx=({assessmentId:n,onClose:r})=>{const[s,o]=N.useState([]),[c,u]=N.useState([]),[h,m]=N.useState(!0),[p,y]=N.useState({});N.useEffect(()=>{w()},[n]);const w=async()=>{m(!0);const{data:v,error:R}=await J.from("submissions").select("*").eq("assessment_id",n);if(R){console.error("Error fetching submissions:",R),m(!1);return}const P=[];if(v)for(const L of v){const{data:z}=await J.from("users").select("full_name, email").eq("id",L.student_id).single();P.push({...L,student_name:z?.full_name||"Student",student_email:z?.email||"-"})}o(P);const{data:O}=await J.from("questions").select("*").eq("assessment_id",n);u(O||[]),m(!1)},x=(v,R)=>{y(P=>({...P,[v]:R}))},j=async v=>{const R=Number(p[v]);if(isNaN(R)){alert("Please enter a valid number");return}const{error:P}=await J.from("submissions").update({theory_score:R}).eq("id",v);if(P){console.error("Error saving score:",P),alert("Error saving score");return}alert("Score saved successfully!"),w()},k=()=>c.filter(v=>v.type==="Theory"),C=v=>k().map(P=>({questionText:P.question_text,maxMarks:P.marks,studentAnswer:v.answers[P.id]||"No answer provided"})),_=()=>k().reduce((v,R)=>v+R.marks,0);return i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Assessment Submissions"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[s.length," student",s.length!==1?"s":""," submitted"]})]}),i.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 transition-colors",children:i.jsx(Yl,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:h?i.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading submissions..."}):s.length===0?i.jsx("div",{className:"text-center py-8 text-gray-600",children:"No submissions yet for this assessment."}):i.jsx("div",{className:"space-y-6",children:s.map(v=>i.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4 pb-4 border-b border-gray-300",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:v.student_name}),i.jsx("p",{className:"text-sm text-gray-600",children:v.student_email}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Submitted: ",new Date(v.submitted_at).toLocaleString()]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-gray-600",children:"MCQ Score"}),i.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.mcq_score})]})]}),C(v).length>0?i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-gray-700",children:"Theory Answers:"}),C(v).map((R,P)=>i.jsxs("div",{className:"bg-white rounded p-4 border border-gray-200",children:[i.jsxs("div",{className:"font-medium text-gray-800 mb-2",children:["Q",P+1,": ",R.questionText,i.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(Max: ",R.maxMarks," marks)"]})]}),i.jsx("div",{className:"text-gray-700 bg-gray-50 p-3 rounded border border-gray-200",children:R.studentAnswer})]},P)),i.jsxs("div",{className:"flex items-center gap-4 mt-4 bg-blue-50 p-4 rounded border border-blue-200",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Theory Score (Max: ",_(),")"]}),i.jsx("input",{type:"number",min:"0",max:_(),value:p[v.id]!==void 0?p[v.id]:v.theory_score??"",onChange:R=>x(v.id,R.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter marks"})]}),i.jsx("button",{onClick:()=>j(v.id),className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:"Save Score"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Status: "}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${v.theory_score===null?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:v.theory_score===null?"Pending":"Graded"})]})]})]}):i.jsx("div",{className:"text-gray-600 text-sm",children:"No theory questions in this assessment."}),i.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-300 flex justify-between items-center",children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Total Score:"}),i.jsxs("span",{className:"text-xl font-bold text-blue-600",children:[v.total_score,"%"]})]})]},v.id))})})]})})},Rx=({user:n})=>{const r=Nt(),[s,o]=N.useState([]),[c,u]=N.useState([]),[h,m]=N.useState({totalAssessments:0,totalSubmissions:0,averageScore:0}),[p,y]=N.useState(!0),[w,x]=N.useState(!1),[j,k]=N.useState(null);N.useEffect(()=>{C()},[n.id]);const C=async()=>{try{const{data:v}=await J.from("assessments").select("*").eq("faculty_id",n.id).order("created_at",{ascending:!1});if(o(v||[]),v&&v.length>0){const R=v.map(z=>z.id),{data:P}=await J.from("submissions").select("*").in("assessment_id",R);u(P||[]);const O=P?.length||0,L=O>0?P.reduce((z,H)=>z+H.total_score,0)/O:0;m({totalAssessments:v.length,totalSubmissions:O,averageScore:Math.round(L*10)/10})}}catch(v){console.error("Error fetching data:",v)}finally{y(!1)}},_=v=>c.filter(R=>R.assessment_id===v).length;return p?i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("div",{className:"text-lg text-gray-600",children:"Loading..."})})]}):i.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[i.jsx(Oe,{user:n}),i.jsxs("div",{className:"flex-1 p-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Faculty Dashboard"}),i.jsx("p",{className:"text-gray-600",children:"Manage your assessments and view student performance"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Assessments"}),i.jsx("p",{className:"text-3xl font-bold text-gray-800",children:h.totalAssessments})]}),i.jsx("div",{className:"bg-primary-100 p-3 rounded-lg",children:i.jsx(Qr,{className:"w-6 h-6 text-primary-600"})})]})}),i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Submissions"}),i.jsx("p",{className:"text-3xl font-bold text-gray-800",children:h.totalSubmissions})]}),i.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:i.jsx(Is,{className:"w-6 h-6 text-green-600"})})]})}),i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Average Score"}),i.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:[h.averageScore,"%"]})]}),i.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:i.jsx(wf,{className:"w-6 h-6 text-purple-600"})})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Your Assessments"})}),s.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx("p",{className:"text-gray-500 mb-4",children:"No assessments created yet"}),i.jsx("button",{onClick:()=>r("/create-assessment"),className:"bg-primary-600 hover:bg-primary-700 text-primary-500 px-6 py-2 rounded-lg transition-colors",children:"Create Your First Assessment"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Duration"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Submissions"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(v=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-800",children:v.title}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:v.subject}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:v.unit}),i.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[v.duration_minutes," mins"]}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:_(v.id)}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(v.created_at).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4 text-sm",children:i.jsx("button",{onClick:()=>{k(v.id),x(!0)},className:"px-4 py-2 bg-blue-100 hover:bg-blue-400 text-gray-600 font-medium rounded-lg transition-colors",children:"View Submissions"})})]},v.id))})]})})]}),w&&j&&i.jsx(Tx,{assessmentId:j,onClose:()=>x(!1)})]})]})},Px=({user:n})=>{const r=Nt(),[s,o]=N.useState(""),[c,u]=N.useState(""),[h,m]=N.useState(""),[p,y]=N.useState(60),[w,x]=N.useState([]),[j,k]=N.useState(!1),C=O=>{x([...w,{type:O,question_text:"",options:O==="MCQ"?["","","",""]:[],correct_answer:"",marks:1}])},_=(O,L,z)=>{const H=[...w];H[O]={...H[O],[L]:z},x(H)},v=(O,L,z)=>{const H=[...w];H[O].options[L]=z,x(H)},R=O=>{x(w.filter((L,z)=>z!==O))},P=async O=>{if(O.preventDefault(),w.length===0){alert("Please add at least one question");return}k(!0);try{const{data:L,error:z}=await J.from("assessments").insert({faculty_id:n.id,subject:c,unit:h,title:s,duration_minutes:p}).select().single();if(z)throw z;const H=w.map(Z=>({assessment_id:L.id,type:Z.type,question_text:Z.question_text,options:Z.type==="MCQ"?Z.options:null,correct_answer:Z.type==="MCQ"?Z.correct_answer:null,marks:Z.marks})),{error:Y}=await J.from("questions").insert(H);if(Y)throw Y;alert("Assessment created successfully!"),r("/")}catch(L){console.error("Error creating assessment:",L),alert("Error creating assessment: "+L.message)}finally{k(!1)}};return i.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 p-8 overflow-y-auto",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Create Assessment"}),i.jsx("p",{className:"text-gray-600",children:"Design a new test for your students"})]}),i.jsxs("form",{onSubmit:P,className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Basic Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assessment Title *"}),i.jsx("input",{type:"text",value:s,onChange:O=>o(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"}),i.jsx("input",{type:"number",value:p,onChange:O=>y(parseInt(O.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"1",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),i.jsx("input",{type:"text",value:c,onChange:O=>u(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit *"}),i.jsx("input",{type:"text",value:h,onChange:O=>m(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Questions"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>C("MCQ"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2",children:[i.jsx(Ll,{className:"w-4 h-4"}),"Add MCQ"]}),i.jsxs("button",{type:"button",onClick:()=>C("Theory"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[i.jsx(Ll,{className:"w-4 h-4"}),"Add Theory"]})]})]}),w.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500",children:"No questions added yet. Click the buttons above to add questions."}):i.jsx("div",{className:"space-y-6",children:w.map((O,L)=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Question ",L+1," (",O.type,")"]}),i.jsx("button",{type:"button",onClick:()=>R(L),className:"text-red-600 hover:text-red-700",children:i.jsx(ui,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text *"}),i.jsx("textarea",{value:O.question_text,onChange:z=>_(L,"question_text",z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:2,required:!0})]}),O.type==="MCQ"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:O.options.map((z,H)=>i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Option ",String.fromCharCode(65+H)," *"]}),i.jsx("input",{type:"text",value:z,onChange:Y=>v(L,H,Y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]},H))}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer *"}),i.jsxs("select",{value:O.correct_answer,onChange:z=>_(L,"correct_answer",z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"",children:"Select correct answer"}),O.options.map((z,H)=>i.jsxs("option",{value:z,children:[String.fromCharCode(65+H),": ",z]},H))]})]})]}),i.jsxs("div",{className:"w-32",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marks *"}),i.jsx("input",{type:"number",value:O.marks,onChange:z=>_(L,"marks",parseInt(z.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"1",required:!0})]})]})]},L))})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:()=>r("/"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),i.jsxs("button",{type:"submit",disabled:j,className:"px-6 py-3 bg-primary-600 text-blue-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Nx,{className:"w-5 h-5"}),j?"Creating...":"Create Assessment"]})]})]})]})})]})},Ox=({onSubjectAdded:n})=>{const[r,s]=N.useState(!1),[o,c]=N.useState(!1),[u,h]=N.useState(""),[m,p]=N.useState(""),[y,w]=N.useState(1),[x,j]=N.useState(""),[k,C]=N.useState(""),_=async v=>{v.preventDefault(),c(!0);try{const{error:R}=await J.from("subjects").insert({name:u,code:m.toUpperCase(),semester:y,department:x,description:k||null});if(R)throw R;alert("Subject added successfully!"),h(""),p(""),w(1),j(""),C(""),s(!1),n()}catch(R){console.error("Error adding subject:",R),alert("Error adding subject. Please try again.")}finally{c(!1)}};return r?i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Add New Subject"}),i.jsx("button",{onClick:()=>s(!1),className:"text-gray-500 hover:text-gray-700",children:i.jsx(Yl,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:u,onChange:v=>h(v.target.value),placeholder:"e.g., Data Structures",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject Code ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:m,onChange:v=>p(v.target.value),placeholder:"e.g., CS201",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Semester ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("select",{value:y,onChange:v=>w(Number(v.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[1,2,3,4,5,6,7,8].map(v=>i.jsxs("option",{value:v,children:["Semester ",v]},v))})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Department ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:x,onChange:v=>j(v.target.value),placeholder:"e.g., Computer Science",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),i.jsx("textarea",{value:k,onChange:v=>C(v.target.value),placeholder:"Brief description of the subject...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",children:o?"Adding...":"Add Subject"}),i.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-6 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors",children:"Cancel"})]})]})]}):i.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium mb-6",children:[i.jsx(yf,{className:"w-4 h-4"}),"Add New Subject"]})},Ax=({user:n})=>{const[r,s]=N.useState([]),[o,c]=N.useState([]),[u,h]=N.useState(!0),[m,p]=N.useState(!1),[y,w]=N.useState(""),[x,j]=N.useState(""),[k,C]=N.useState(""),[_,v]=N.useState("pdf"),[R,P]=N.useState(null);N.useEffect(()=>{O()},[]);const O=async()=>{h(!0);try{const{data:K}=await J.from("subjects").select("*").order("semester",{ascending:!0});s(K||[]);const{data:he}=await J.from("course_materials").select("*").eq("faculty_id",n.id).order("created_at",{ascending:!1});c(he||[])}catch(K){console.error("Error fetching data:",K)}finally{h(!1)}},L=K=>{const he=K.target.files?.[0];if(he){if(he.type!=="application/pdf"){alert("Please upload only PDF files");return}if(he.size>10*1024*1024){alert("File size should not exceed 10MB");return}P(he)}},z=async K=>{if(K.preventDefault(),!y||!x||!R){alert("Please fill all required fields and select a file");return}p(!0);try{const he=r.find(ve=>ve.id===y);if(!he){alert("Subject not found");return}const ke=`${he.code}/${Date.now()}_${R.name}`,{error:fe}=await J.storage.from("course-materials").upload(ke,R);if(fe)throw fe;const{error:me}=await J.from("course_materials").insert({subject_id:y,faculty_id:n.id,title:x,description:k||null,file_url:ke,file_name:R.name,file_size:R.size,file_type:R.type,material_type:_,semester:he.semester});if(me)throw me;alert("Material uploaded successfully!"),w(""),j(""),C(""),v("pdf"),P(null),O()}catch(he){console.error("Error uploading material:",he),alert("Error uploading material. Please try again.")}finally{p(!1)}},H=async K=>{if(confirm("Are you sure you want to delete this material?"))try{const{error:he}=await J.storage.from("course-materials").remove([K.file_url]);if(he)throw he;const{error:ke}=await J.from("course_materials").delete().eq("id",K.id);if(ke)throw ke;alert("Material deleted successfully!"),O()}catch(he){console.error("Error deleting material:",he),alert("Error deleting material. Please try again.")}},Y=K=>{if(!K)return"Unknown";const he=K/(1024*1024);return he<1?`${(K/1024).toFixed(1)} KB`:`${he.toFixed(1)} MB`},Z=K=>{const he={syllabus:"bg-purple-100 text-purple-700",notes:"bg-blue-100 text-blue-700",assignment:"bg-orange-100 text-orange-700",pdf:"bg-gray-100 text-gray-700"};return he[K]||he.pdf};return u?i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("div",{className:"text-lg text-gray-600",children:"Loading..."})})]}):i.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[i.jsx(Oe,{user:n}),i.jsxs("div",{className:"flex-1 p-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Course Materials Management"}),i.jsx("p",{className:"text-gray-600",children:"Upload and manage study materials for your courses"})]}),i.jsx(Ox,{onSubjectAdded:O}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(Ih,{className:"w-6 h-6 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Upload New Material"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Add study materials for your courses"})]})]}),i.jsxs("form",{onSubmit:z,className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{value:y,onChange:K=>w(K.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[i.jsx("option",{value:"",children:"Select a subject"}),r.map(K=>i.jsxs("option",{value:K.id,children:[K.code," - ",K.name," (Sem ",K.semester,")"]},K.id))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Material Type ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{value:_,onChange:K=>v(K.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[i.jsx("option",{value:"pdf",children:" General PDF"}),i.jsx("option",{value:"syllabus",children:" Syllabus"}),i.jsx("option",{value:"notes",children:" Lecture Notes"}),i.jsx("option",{value:"assignment",children:" Assignment"})]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:x,onChange:K=>j(K.target.value),placeholder:"e.g., Chapter 1 - Introduction to Data Structures",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),i.jsx("textarea",{value:k,onChange:K=>C(K.target.value),placeholder:"Brief description of the material...",rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Upload PDF File ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"file",accept:".pdf",onChange:L,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!0}),R&&i.jsxs("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3",children:[i.jsx(Qr,{className:"w-5 h-5 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-green-800",children:R.name}),i.jsxs("p",{className:"text-xs text-green-600",children:[(R.size/1024/1024).toFixed(2)," MB"]})]})]}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Maximum file size: 10MB"})]}),i.jsx("button",{type:"submit",disabled:m,className:"px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ih,{className:"w-5 h-5"}),"Upload Material"]})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Your Uploaded Materials"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o.length," material",o.length!==1?"s":""," uploaded"]})]}),o.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(Gt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600 font-medium",children:"No materials uploaded yet"}),i.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Upload your first course material to get started"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"File"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Size"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Uploaded"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(K=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900",children:K.title}),K.description&&i.jsx("span",{className:"text-xs text-gray-500 mt-1",children:K.description})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`inline-flex px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ${Z(K.material_type)}`,children:K.material_type})}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:K.file_name}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Y(K.file_size)}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(K.created_at).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("button",{onClick:()=>H(K),className:"text-red-600 hover:text-red-700 p-2 hover:bg-red-50 rounded-lg transition-all",title:"Delete",children:i.jsx(ui,{className:"w-5 h-5"})})})]},K.id))})]})})]})]})]})},Ix=({assessmentTitle:n,duration:r,onAgree:s,onCancel:o})=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"bg-gradient-to-r from-yellow-600 to-purple-700 px-8 py-6 text-white",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(Gt,{className:"w-6 h-6"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Test Instructions"})]}),i.jsx("p",{className:"text-blue-100",children:"Please read carefully before starting"})]}),i.jsxs("div",{className:"p-8 space-y-6",children:[i.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-600 p-4 rounded",children:[i.jsxs("p",{className:"text-gray-700",children:[i.jsx("strong",{children:"Assessment:"})," ",i.jsx("span",{className:"text-blue-700",children:n})]}),i.jsxs("p",{className:"text-gray-700 mt-1",children:[i.jsx("strong",{children:"Duration:"})," ",i.jsxs("span",{className:"text-blue-700",children:[r," minutes"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[i.jsx(Tr,{className:"w-5 h-5 text-red-600"}),"Important Notes"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-3 p-4 bg-red-50 rounded-lg border border-red-200",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Tr,{className:"w-5 h-5 text-red-600 mt-1"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-red-900",children:"Auto-Submission"}),i.jsxs("p",{className:"text-red-800 text-sm mt-1",children:["Your test will be ",i.jsx("strong",{children:"automatically submitted"})," once the time limit is reached. You cannot submit after the timer expires."]})]})]}),i.jsxs("div",{className:"flex gap-3 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Tr,{className:"w-5 h-5 text-orange-600 mt-1"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-orange-900",children:"Score Validity"}),i.jsxs("p",{className:"text-orange-800 text-sm mt-1",children:["Your score is ",i.jsx("strong",{children:"ONLY VALID"})," if you submit before the time expires. Late submissions are not accepted and will be marked as invalid."]})]})]}),i.jsxs("div",{className:"flex gap-3 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx($n,{className:"w-5 h-5 text-yellow-600 mt-1"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-yellow-900",children:"Timer Management"}),i.jsxs("p",{className:"text-yellow-800 text-sm mt-1",children:["Your timer is ",i.jsx("strong",{children:"server-managed"})," and secure. Refreshing the page will NOT reset your time. Always keep track of remaining time."]})]})]}),i.jsxs("div",{className:"flex gap-3 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(As,{className:"w-5 h-5 text-purple-600 mt-1"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-purple-900",children:"Technical Requirements"}),i.jsx("p",{className:"text-purple-800 text-sm mt-1",children:"Ensure you have a stable internet connection. Network interruptions may affect your test. Answer carefully before submitting."})]})]}),i.jsxs("div",{className:"flex gap-3 p-4 bg-green-50 rounded-lg border border-green-200",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(As,{className:"w-5 h-5 text-green-600 mt-1"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-green-900",children:"Good Luck! "}),i.jsxs("p",{className:"text-green-800 text-sm mt-1",children:["Do your best and answer all questions carefully. You have ",r," minutes to complete this assessment."]})]})]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-6 border-t border-gray-200",children:[i.jsx("button",{onClick:o,className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"Cancel Test"}),i.jsxs("button",{onClick:s,className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[i.jsx(As,{className:"w-5 h-5"}),"I Agree & Start Test"]})]})]})]})}),Ux=({user:n})=>{const r=Nt(),[s,o]=N.useState([]),[c,u]=N.useState([]),[h,m]=N.useState(!0),[p,y]=N.useState(!1),[w,x]=N.useState(null);N.useEffect(()=>{j()},[n.id]);const j=async()=>{try{const{data:P}=await J.from("assessments").select("*").order("created_at",{ascending:!1});o(P||[]);const{data:O}=await J.from("submissions").select("*").eq("student_id",n.id);u(O||[])}catch(P){console.error("Error fetching data:",P)}finally{m(!1)}},k=P=>c.some(O=>O.assessment_id===P),C=P=>c.find(O=>O.assessment_id===P),_=P=>{x(P),y(!0)},v=()=>{w&&(y(!1),r(`/take-test/${w.id}`))},R=()=>{y(!1),x(null)};return h?i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("div",{className:"text-lg text-gray-600",children:"Loading..."})})]}):i.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[i.jsx(Oe,{user:n}),i.jsxs("div",{className:"flex-1 p-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Student Dashboard"}),i.jsx("p",{className:"text-gray-600",children:"View and attempt available assessments"})]}),i.jsx("div",{className:"mb-6 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white shadow-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(ni,{className:"w-6 h-6"}),i.jsx("h3",{className:"text-xl font-bold",children:"AI Learning Assistant"})]}),i.jsx("p",{className:"text-purple-100 mb-4",children:"Get instant help with your studies, assignments, and exam preparation"}),i.jsx("button",{onClick:()=>r("/ai-assistant"),className:"bg-white text-purple-600 px-6 py-2 rounded-lg font-medium hover:bg-purple-50 transition-colors",children:"Start Chat"})]}),i.jsx("div",{className:"hidden md:block",children:i.jsx("div",{className:"w-24 h-24 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx(ni,{className:"w-12 h-12"})})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Available Tests"}),i.jsx("p",{className:"text-3xl font-bold text-gray-800",children:s.length})]}),i.jsx("div",{className:"bg-primary-100 p-3 rounded-lg",children:i.jsx(Gt,{className:"w-6 h-6 text-primary-600"})})]})}),i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Completed"}),i.jsx("p",{className:"text-3xl font-bold text-gray-800",children:c.length})]}),i.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:i.jsx(As,{className:"w-6 h-6 text-green-600"})})]})}),i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Score"}),i.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:[c.length>0?Math.round(c.reduce((P,O)=>P+O.total_score,0)/c.length*10)/10:0,"%"]})]}),i.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:i.jsx($n,{className:"w-6 h-6 text-purple-600"})})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Available Assessments"})}),s.length===0?i.jsx("div",{className:"p-8 text-center",children:i.jsx("p",{className:"text-gray-500",children:"No assessments available at the moment"})}):i.jsx("div",{className:"divide-y divide-gray-200",children:s.map(P=>{const O=k(P.id),L=C(P.id);return i.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:P.title}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Gt,{className:"w-4 h-4"}),P.subject]}),i.jsxs("span",{children:["Unit: ",P.unit]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx($n,{className:"w-4 h-4"}),P.duration_minutes," mins"]})]}),O&&L&&i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-green-600",children:"Completed"}),i.jsxs("span",{className:"text-sm text-gray-600",children:["Score: ",L.total_score,"%"]})]})]}),i.jsx("div",{className:"ml-4",children:O?i.jsxs("button",{onClick:()=>r(`/results/${L?.id}`),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[i.jsx(As,{className:"w-4 h-4"}),"View Results"]}):i.jsxs("button",{onClick:()=>_(P),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[i.jsx(Sx,{className:"w-4 h-4"}),"Start Test"]})})]})},P.id)})})]})]}),p&&w&&i.jsx(Ix,{assessmentTitle:w.title,duration:w.duration_minutes,onAgree:v,onCancel:R})]})},$x=(n,r)=>{let s=0;return n.forEach(o=>{if(o.type==="MCQ"&&o.correct_answer){const c=r[o.id];c&&c.trim().toLowerCase()===o.correct_answer.trim().toLowerCase()&&(s+=o.marks)}}),s},Lx=async(n,r)=>{try{const{data:{user:s}}=await J.auth.getUser();if(!s)throw new Error("User not authenticated");console.log(" Checking for existing test session...");const{data:o,error:c}=await J.from("test_sessions").select("*").eq("assessment_id",n).eq("student_id",s.id).eq("is_completed",!1).maybeSingle();if(c&&c.code!=="PGRST116")throw c;if(o)return console.log(" Existing active session found, resuming..."),o;console.log(" No existing session found, creating new one...");let u=null,h=null;for(let m=1;m<=3;m++)try{console.log(` Creation attempt ${m}/3...`);const{data:p,error:y}=await J.from("test_sessions").insert([{assessment_id:n,student_id:s.id,started_at:new Date().toISOString(),duration_minutes:r,is_completed:!1}]).select("*").single();if(y){if(h=y,y.code==="23505"||y.details?.includes("duplicate")){console.warn(` Attempt ${m}: Conflict detected (another request creating session)`),await new Promise(j=>setTimeout(j,200*Math.pow(2,m-1)));const{data:w,error:x}=await J.from("test_sessions").select("*").eq("assessment_id",n).eq("student_id",s.id).eq("is_completed",!1).maybeSingle();if(!x&&w)return console.log(" Successfully retrieved session created by concurrent request"),w;continue}throw y}if(p){console.log(" New test session created successfully"),u=p;break}}catch(p){if(console.error(` Attempt ${m} failed:`,p),h=p,m<3){const y=200*Math.pow(2,m-1);console.log(` Waiting ${y}ms before retry...`),await new Promise(w=>setTimeout(w,y))}}if(!u){console.log(" Creation failed, attempting final session retrieval...");const{data:m,error:p}=await J.from("test_sessions").select("*").eq("assessment_id",n).eq("student_id",s.id).eq("is_completed",!1).maybeSingle();if(p)throw p;if(m)return console.log(" Successfully retrieved session after retries"),m;throw h||new Error("Failed to create or retrieve test session")}return u}catch(s){throw console.error(" Fatal error in getOrCreateTestSession:",s),s}},Uh=n=>{try{const r=new Date(n.started_at).getTime(),s=n.duration_minutes*60*1e3,o=r+s,c=Date.now(),u=Math.max(0,o-c);return Math.ceil(u/1e3)}catch(r){return console.error("Error calculating remaining time:",r),0}},Dx=async n=>{try{const{error:r}=await J.from("test_sessions").update({submitted_at:new Date().toISOString(),is_completed:!0}).eq("id",n);if(r)throw r;console.log(" Test session marked as completed")}catch(r){throw console.error("Error completing test session:",r),r}},Mx=({user:n})=>{const{assessmentId:r}=Vh(),s=Nt(),[o,c]=N.useState(null),[u,h]=N.useState([]),[m,p]=N.useState({}),[y,w]=N.useState(0),[x,j]=N.useState(!0),[k,C]=N.useState(!1),[_,v]=N.useState(null),[R,P]=N.useState(!1),[O,L]=N.useState(null);N.useEffect(()=>{if(!r){L("Assessment ID is missing"),j(!1);return}(async()=>{try{j(!0),console.log(" Initializing test for assessment:",r);const{data:me,error:ve}=await J.from("assessments").select("*").eq("id",r).single();if(ve||!me){console.error("Assessment fetch error:",ve),L("Failed to load assessment"),j(!1);return}c(me);const{data:Ae,error:Te}=await J.from("questions").select("*").eq("assessment_id",r).order("question_number",{ascending:!0});if(Te){console.error("Questions fetch error:",Te),L("Failed to load questions"),j(!1);return}h(Ae||[]);const _e=await Lx(r,me.duration_minutes);v(_e);const W=Uh(_e);console.log(` Time remaining: ${W}s (${Math.floor(W/60)}m ${W%60}s)`),w(W),W<=0&&(P(!0),alert(" Time expired for this assessment")),j(!1)}catch(me){console.error("Error initializing test:",me),L("Error loading test: "+(me.message||"Unknown error")),j(!1)}})()},[r,n.id]),N.useEffect(()=>{if(!_||R||k)return;const fe=setInterval(()=>{const me=Uh(_);me<=0?(P(!0),w(0),clearInterval(fe),console.warn(" Time expired!"),H()):w(me)},1e3);return()=>clearInterval(fe)},[_,R,k]);const z=(fe,me)=>{p(ve=>({...ve,[fe]:me}))},H=async()=>{_&&await Z(!0)},Y=async()=>{k||!window.confirm("Are you sure you want to submit your test?")||await Z(!1)},Z=async fe=>{if(_){C(!0);try{await Dx(_.id);const me=$x(u,m),ve=u.reduce((W,ae)=>W+ae.marks,0),Ae=ve>0?Math.round(me/ve*100):0,{data:Te,error:_e}=await J.from("submissions").insert({assessment_id:r,student_id:n.id,test_session_id:_.id,answers:m,mcq_score:me,theory_score:null,total_score:Ae,is_auto_submitted:fe,submitted_at:new Date().toISOString()}).select().single();if(_e)throw _e;console.log(" Test submitted successfully"),alert(fe?" Test auto-submitted due to time expiry!":" Test submitted successfully!"),s(`/results/${Te.id}`)}catch(me){console.error("Error submitting test:",me),L("Error submitting test: "+(me.message||"Unknown error")),alert("Error submitting test. Please try again.")}finally{C(!1)}}},K=fe=>{const me=Math.floor(fe/3600),ve=Math.floor(fe%3600/60),Ae=fe%60;return me>0?`${me}h ${ve}m ${Ae.toString().padStart(2,"0")}s`:`${ve}m ${Ae.toString().padStart(2,"0")}s`},he=()=>y<=300?"text-red-600":y<=600?"text-yellow-600":"text-green-600",ke=()=>y<=300?"bg-red-50":y<=600?"bg-yellow-50":"bg-green-50";return x?i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"text-lg text-gray-600",children:"Loading test..."})})]}):O?i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md text-center",children:[i.jsx(Tr,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Error"}),i.jsx("p",{className:"text-gray-600 mb-6",children:O}),i.jsx("button",{onClick:()=>s("/"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Dashboard"})]})})]}):!o||!_?i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"text-lg text-red-600",children:"Assessment not found"})})]}):R?i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center max-w-md",children:[i.jsx(Tr,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:" Time Expired"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Your test time has been used up. Your answers have been auto-submitted."}),i.jsx("button",{onClick:()=>s("/"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Dashboard"})]})})]}):i.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 p-8 overflow-y-auto",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:o.title}),i.jsxs("p",{className:"text-gray-600",children:[o.subject," - Unit ",o.unit]})]}),i.jsxs("div",{className:`text-right px-6 py-4 rounded-lg border-2 ${ke()} ${y<=300?"border-red-200":"border-green-200"}`,children:[i.jsxs("div",{className:`flex items-center gap-2 text-2xl font-bold ${he()}`,children:[i.jsx($n,{className:"w-6 h-6"}),K(y)]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Time Remaining"}),y<=300&&i.jsx("p",{className:"text-xs text-red-600 font-semibold mt-2 animate-pulse",children:" Time running out!"})]})]}),i.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:" Your timer is secure and server-managed. Refreshing the page will NOT reset your time."})]}),i.jsx("div",{className:"space-y-6 mb-6",children:u.map((fe,me)=>i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Question ",me+1,i.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",fe.marks," ",fe.marks===1?"mark":"marks",")"]})]}),i.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:fe.type})]}),i.jsx("p",{className:"text-gray-700 mb-4",children:fe.question_text}),fe.type==="MCQ"&&fe.options?i.jsx("div",{className:"space-y-2",children:fe.options.map((ve,Ae)=>i.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[i.jsx("input",{type:"radio",name:`question-${fe.id}`,value:ve,checked:m[fe.id]===ve,onChange:Te=>z(fe.id,Te.target.value),className:"w-4 h-4 text-blue-600",disabled:R}),i.jsxs("span",{className:"ml-3 text-gray-700",children:[String.fromCharCode(65+Ae),". ",ve]})]},Ae))}):i.jsx("textarea",{value:m[fe.id]||"",onChange:ve=>z(fe.id,ve.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:6,placeholder:"Type your answer here...",disabled:R})]},fe.id))}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("p",{className:"text-gray-600",children:[Object.keys(m).length," of ",u.length," questions answered"]}),i.jsxs("button",{onClick:Y,disabled:k||R,className:"px-6 py-3 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:[i.jsx(vf,{className:"w-5 h-5"}),k?"Submitting...":"Submit Test"]})]})})]})})]})},zx=({user:n})=>{const{submissionId:r}=Vh(),s=Nt(),[o,c]=N.useState(null),[u,h]=N.useState(null),[m,p]=N.useState([]),[y,w]=N.useState(!0);N.useEffect(()=>{x()},[r]);const x=async()=>{try{const{data:_,error:v}=await J.from("submissions").select("*").eq("id",r).single();if(v)throw v;c(_);const{data:R,error:P}=await J.from("assessments").select("*").eq("id",_.assessment_id).single();if(P)throw P;h(R);const{data:O,error:L}=await J.from("questions").select("*").eq("assessment_id",_.assessment_id);if(L)throw L;p(O||[])}catch(_){console.error("Error fetching results:",_),alert("Error loading results"),s("/")}finally{w(!1)}},j=(_,v)=>_.type==="MCQ"&&_.correct_answer?v?.trim().toLowerCase()===_.correct_answer.trim().toLowerCase():null;if(y)return i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("div",{className:"text-lg text-gray-600",children:"Loading results..."})})]});if(!o||!u)return i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("div",{className:"text-lg text-red-600",children:"Results not found"})})]});const k=m.filter(_=>_.type==="MCQ").reduce((_,v)=>_+v.marks,0),C=m.filter(_=>_.type==="Theory").reduce((_,v)=>_+v.marks,0);return i.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 p-8 overflow-y-auto",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Test Results"}),i.jsx("h3",{className:"text-xl text-gray-700 mb-4",children:u.title}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Score"}),i.jsxs("p",{className:"text-3xl font-bold text-primary-400",children:[o.total_score,"%"]})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"MCQ Score"}),i.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[o.mcq_score,"/",k]})]}),i.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Theory Score"}),i.jsx("p",{className:"text-3xl font-bold text-purple-600",children:o.theory_score!==null?`${o.theory_score}/${C}`:"Pending"})]})]}),o.theory_score===null&&C>0&&i.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-yellow-800",children:[i.jsx($n,{className:"w-4 h-4 inline mr-1"}),"Your theory answers are pending faculty review. The final score will be updated once grading is complete."]})})]}),i.jsxs("div",{className:"space-y-6 mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Question Review"}),m.map((_,v)=>{const R=o.answers[_.id],P=j(_,R);return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",v+1,i.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",_.marks," ",_.marks===1?"mark":"marks",")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-medium",children:_.type}),P!==null&&i.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 ${P?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:P?i.jsxs(i.Fragment,{children:[i.jsx(As,{className:"w-4 h-4"})," Correct"]}):i.jsxs(i.Fragment,{children:[i.jsx(Cx,{className:"w-4 h-4"})," Incorrect"]})})]})]}),i.jsx("p",{className:"text-gray-700 mb-4",children:_.question_text}),_.type==="MCQ"&&_.options?i.jsx("div",{className:"space-y-2",children:_.options.map((O,L)=>{const z=R===O,H=_.correct_answer===O;return i.jsx("div",{className:`p-3 border rounded-lg ${H?"bg-green-50 border-green-300":z?"bg-red-50 border-red-300":"border-gray-200"}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-gray-700",children:[String.fromCharCode(65+L),". ",O]}),H&&i.jsx("span",{className:"text-green-700 text-sm font-medium",children:"Correct Answer"}),z&&!H&&i.jsx("span",{className:"text-red-700 text-sm font-medium",children:"Your Answer"})]})},L)})}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Your Answer:"}),i.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:i.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:R||"No answer provided"})})]}),o.theory_score===null&&i.jsx("p",{className:"text-sm text-gray-600 italic",children:"Pending faculty review"})]})]},_.id)})]}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:()=>s("/"),className:"px-6 py-3 bg-primary-600 text-blue-900 rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2",children:[i.jsx($l,{className:"w-5 h-5"}),"Back to Dashboard"]})})]})})]})},Fx=({user:n})=>{const[r,s]=N.useState([]),[o,c]=N.useState(!0),[u,h]=N.useState(3);N.useEffect(()=>{m()},[u]);const m=async()=>{c(!0);try{const{data:x,error:j}=await J.from("subjects").select("*").eq("semester",u).order("code");if(j)throw j;const{data:k}=await J.from("course_materials").select("*").eq("semester",u).order("created_at",{ascending:!1}),C=(x||[]).map(_=>({..._,materials:(k||[]).filter(v=>v.subject_id===_.id)}));s(C)}catch(x){console.error("Error fetching courses:",x)}finally{c(!1)}},p=async x=>{try{const{data:j,error:k}=await J.storage.from("course-materials").createSignedUrl(x.file_url,60);if(k)throw k;j?.signedUrl&&window.open(j.signedUrl,"_blank")}catch(j){console.error("Error downloading material:",j),alert("Error downloading file. Please try again.")}},y=x=>{if(!x)return"Unknown size";const j=x/(1024*1024);return j<1?`${(x/1024).toFixed(1)} KB`:`${j.toFixed(1)} MB`},w=x=>{switch(x){case"syllabus":return i.jsx(Gt,{className:"w-5 h-5"});case"notes":return i.jsx(Qr,{className:"w-5 h-5"});case"assignment":return i.jsx(gf,{className:"w-5 h-5"});default:return i.jsx(Qr,{className:"w-5 h-5"})}};return o?i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("div",{className:"text-lg text-gray-600",children:"Loading courses..."})})]}):i.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[i.jsx(Oe,{user:n}),i.jsxs("div",{className:"flex-1 p-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Course Materials"}),i.jsx("p",{className:"text-gray-600",children:"Access syllabus and study materials for your courses"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Semester"}),i.jsx("select",{value:u,onChange:x=>h(Number(x.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[1,2,3,4,5,6,7,8].map(x=>i.jsxs("option",{value:x,children:["Semester ",x]},x))})]}),r.length===0?i.jsxs("div",{className:"bg-white rounded-xl p-8 text-center shadow-sm border border-gray-200",children:[i.jsx(Gt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsxs("p",{className:"text-gray-600",children:["No courses available for Semester ",u]})]}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map(x=>i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-500 p-6 text-white",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold mb-1",children:x.name}),i.jsx("p",{className:"text-blue-100 text-sm",children:x.code})]}),i.jsxs("span",{className:"bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm",children:["Sem ",x.semester]})]}),x.description&&i.jsx("p",{className:"mt-4 text-blue-50 text-sm",children:x.description})]}),i.jsx("div",{className:"p-6",children:x.materials.length===0?i.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No materials uploaded yet"}):i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-semibold text-gray-700 text-sm uppercase tracking-wide mb-3",children:"Study Materials"}),x.materials.map(j=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all",children:[i.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[i.jsx("div",{className:"text-blue-600 mt-1",children:w(j.material_type)}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h5",{className:"font-medium text-gray-800 mb-1",children:j.title}),j.description&&i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:j.description}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[i.jsx("span",{className:"capitalize",children:j.material_type}),i.jsx("span",{children:""}),i.jsx("span",{children:y(j.file_size)}),i.jsx("span",{children:""}),i.jsx("span",{children:new Date(j.created_at).toLocaleDateString()})]})]})]}),i.jsx("button",{onClick:()=>p(j),className:"ml-4 p-2 bg-indigo-400 hover:bg-blue-500 text-white rounded-lg transition-colors",title:"Download",children:i.jsx(ci,{className:"w-5 h-5"})})]},j.id))]})})]},x.id))})]})]})},Bx=({title:n,children:r,className:s})=>i.jsxs("div",{className:`bg-white rounded-lg shadow p-6 mb-4 ${s??""}`,children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:n}),r]}),qx=()=>{const[n,r]=N.useState([{id:1,score:"",maxScore:""}]),[s,o]=N.useState(null),c=()=>{r([...n,{id:Date.now(),score:"",maxScore:""}])},u=y=>{n.length>1&&r(n.filter(w=>w.id!==y))},h=(y,w,x)=>{r(n.map(j=>j.id===y?{...j,[w]:x}:j))},m=()=>{const y=n.filter(C=>C.score&&C.maxScore);if(y.length===0){alert("Please enter at least one assignment score");return}const w=y.reduce((C,_)=>C+parseFloat(_.score),0),x=y.reduce((C,_)=>C+parseFloat(_.maxScore),0),j=w/y.length,k=w/x*100;o({average:parseFloat(j.toFixed(2)),percentage:parseFloat(k.toFixed(2))})},p=()=>{r([{id:1,score:"",maxScore:""}]),o(null)};return i.jsxs(Bx,{title:"Assignment Score Calculator",children:[i.jsx("div",{className:"space-y-3 mb-4",children:n.map((y,w)=>i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsxs("span",{className:"text-gray-600 w-24",children:["Assignment ",w+1]}),i.jsx("input",{type:"number",placeholder:"Score",value:y.score,onChange:x=>h(y.id,"score",x.target.value),className:"border border-gray-300 rounded px-3 py-2 w-28 focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("span",{className:"text-gray-500",children:"out of"}),i.jsx("input",{type:"number",placeholder:"Max",value:y.maxScore,onChange:x=>h(y.id,"maxScore",x.target.value),className:"border border-gray-300 rounded px-3 py-2 w-28 focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.length>1&&i.jsx("button",{onClick:()=>u(y.id),className:"text-red-500 hover:text-red-700 font-medium",children:""})]},y.id))}),i.jsxs("div",{className:"flex gap-3 mb-6",children:[i.jsx("button",{onClick:c,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition",children:"+ Add Assignment"}),i.jsx("button",{onClick:m,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Calculate"}),i.jsx("button",{onClick:p,className:"px-4 py-2 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition",children:"Reset"})]}),s&&i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Results"}),i.jsxs("p",{className:"text-gray-700",children:[i.jsx("span",{className:"font-medium",children:"Average Score:"})," ",s.average]}),i.jsxs("p",{className:"text-gray-700",children:[i.jsx("span",{className:"font-medium",children:"Overall Percentage:"})," ",s.percentage,"%"]})]})]})},Vx=()=>{const[n,r]=N.useState(""),[s,o]=N.useState(null),c=()=>{const h=parseFloat(n);if(isNaN(h)||h<0||h>20){alert("Please enter a valid mark between 0 and 20");return}const m=h/20*100;o(parseFloat(m.toFixed(2)))},u=()=>{r(""),o(null)};return i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Mid-Exam Percentage Calculator"}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Marks Obtained (out of 20)"}),i.jsx("input",{type:"number",placeholder:"Enter marks",value:n,onChange:h=>r(h.target.value),className:"border border-gray-300 rounded px-4 py-2 w-full max-w-xs focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"20",step:"0.5"})]}),i.jsxs("div",{className:"flex gap-3 mb-6",children:[i.jsx("button",{onClick:c,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Calculate"}),i.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition",children:"Reset"})]}),s!==null&&i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Result"}),i.jsxs("p",{className:"text-gray-700 text-lg",children:[i.jsx("span",{className:"font-medium",children:"Percentage:"})," ",s,"%"]}),i.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Grade: ",s>=90?"A+":s>=80?"A":s>=70?"B":s>=60?"C":s>=50?"D":"F"]})]})]})},Wx=()=>{const[n,r]=N.useState(""),[s,o]=N.useState(""),[c,u]=N.useState(null),h=()=>{const p=parseFloat(n),y=parseFloat(s);if(isNaN(p)||isNaN(y)||p<=0||y<0||y>p){alert("Please enter valid values");return}const w=y/p*100,x=w>=75?"Good Standing":w>=65?"Warning":"At Risk";u({percentage:parseFloat(w.toFixed(2)),status:x})},m=()=>{r(""),o(""),u(null)};return i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Attendance Percentage Calculator"}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Total Classes Conducted"}),i.jsx("input",{type:"number",placeholder:"Enter total classes",value:n,onChange:p=>r(p.target.value),className:"border border-gray-300 rounded px-4 py-2 w-full max-w-xs focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Classes Attended"}),i.jsx("input",{type:"number",placeholder:"Enter attended classes",value:s,onChange:p=>o(p.target.value),className:"border border-gray-300 rounded px-4 py-2 w-full max-w-xs focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]}),i.jsxs("div",{className:"flex gap-3 mb-6",children:[i.jsx("button",{onClick:h,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Calculate"}),i.jsx("button",{onClick:m,className:"px-4 py-2 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition",children:"Reset"})]}),c&&i.jsxs("div",{className:`rounded-lg p-4 border ${c.percentage>=75?"bg-green-50 border-green-200":c.percentage>=65?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:[i.jsx("h3",{className:`font-semibold mb-2 ${c.percentage>=75?"text-green-900":c.percentage>=65?"text-yellow-900":"text-red-900"}`,children:"Attendance Result"}),i.jsxs("p",{className:"text-gray-700 text-lg",children:[i.jsx("span",{className:"font-medium",children:"Percentage:"})," ",c.percentage,"%"]}),i.jsxs("p",{className:"text-gray-700",children:[i.jsx("span",{className:"font-medium",children:"Status:"})," ",c.status]}),c.percentage<75&&i.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[" You need ",Math.ceil(.75*parseFloat(n)-parseFloat(s))," more classes to reach 75%"]})]})]})},Hx=()=>{const[n,r]=N.useState("assignment"),s=Nt();return i.jsxs("div",{className:"max-w-4xl mx-auto p-6 min-h-screen flex flex-col",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold mb-2 text-gray-800",children:"Score Calculator"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Calculate your academic performance metrics accurately"}),i.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[i.jsx("button",{onClick:()=>r("assignment"),className:`px-4 py-2 font-medium transition-colors ${n==="assignment"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Assignment Scores"}),i.jsx("button",{onClick:()=>r("midexam"),className:`px-4 py-2 font-medium transition-colors ${n==="midexam"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Mid-Exam"}),i.jsx("button",{onClick:()=>r("attendance"),className:`px-4 py-2 font-medium transition-colors ${n==="attendance"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Attendance"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n==="assignment"&&i.jsx(qx,{}),n==="midexam"&&i.jsx(Vx,{}),n==="attendance"&&i.jsx(Wx,{})]})]}),i.jsx("div",{className:"flex-1 flex flex-col justify-end items-center",children:i.jsx("button",{onClick:()=>s("/"),className:"mt-10 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium",children:"Back to Dashboard"})})]})},Kx="/api/openrouter",Gx="openai/gpt-4o",Jx=async(n,r)=>{try{const s={role:"system",content:`You are an intelligent academic assistant helping ${r} on EduVerge learning platform. Answer questions clearly, provide study tips, and help with homework. Keep responses under 250 words unless detailed explanations are needed.`};console.log("[AI] Sending request...");const o=new AbortController,c=setTimeout(()=>o.abort(),3e4),u=await fetch(Kx,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:Gx,messages:[s,...n],temperature:.7,max_tokens:800}),signal:o.signal});if(clearTimeout(c),!u.ok){const p=await u.json().catch(()=>({error:"Unknown error"}));throw console.error("[AI] Error:",u.status,p),new Error(p.error?.message||`Request failed: ${u.status}`)}const m=(await u.json())?.choices?.[0]?.message?.content;if(!m)throw console.error("[AI] No content in response"),new Error("No response generated");return console.log("[AI]  Success"),m.trim()}catch(s){return console.error("[AI] Request failed:",s),s?.name==="AbortError"?"Request timeout. Please try a shorter question.":"I'm having trouble connecting right now. Please try again in a moment."}},Qx=n=>{const r=new Date().getHours();let s="Good evening";return r<12?s="Good morning":r<17&&(s="Good afternoon"),`${s}, ${n}!  I'm your AI assistant powered by ChatGPT-4o. How can I help you today?`},Yx=({message:n,isUser:r,timestamp:s})=>i.jsxs("div",{className:`flex gap-3 mb-4 ${r?"justify-end":"justify-start"}`,children:[!r&&i.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:i.jsx(pf,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:`max-w-[70%] ${r?"order-first":""}`,children:[i.jsx("div",{className:`rounded-2xl px-4 py-3 ${r?"bg-blue-600 text-white rounded-tr-none":"bg-gray-100 text-gray-800 rounded-tl-none"}`,children:i.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:n})}),s&&i.jsx("p",{className:"text-xs text-gray-500 mt-1 px-2",children:s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),r&&i.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center",children:i.jsx(Ql,{className:"w-5 h-5 text-white"})})]}),Xx=({onSendMessage:n,disabled:r})=>{const[s,o]=N.useState(""),c=()=>{s.trim()&&!r&&(n(s.trim()),o(""))},u=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),c())};return i.jsxs("div",{className:"border-t border-gray-200 p-4 bg-white",children:[i.jsxs("div",{className:"flex gap-2 items-end",children:[i.jsx("textarea",{value:s,onChange:h=>o(h.target.value),onKeyPress:u,placeholder:"Ask me anything about your studies...",disabled:r,rows:1,className:"flex-1 resize-none border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",style:{maxHeight:"120px"}}),i.jsx("button",{onClick:c,disabled:r||!s.trim(),className:"bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex-shrink-0",children:i.jsx(vf,{className:"w-5 h-5"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Press Enter to send, Shift+Enter for new line"})]})},Zx=()=>i.jsxs("div",{className:"flex gap-3 mb-4",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:i.jsx(pf,{className:"w-5 h-5 text-white"})}),i.jsx("div",{className:"bg-gray-100 rounded-2xl rounded-tl-none px-4 py-3",children:i.jsxs("div",{className:"flex gap-1",children:[i.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),i.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),i.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),Xa="eduverge_chat_",ev=2,tv=({user:n})=>{const r=Nt(),[s,o]=N.useState([]),[c,u]=N.useState(!1),h=N.useRef(null),m=N.useRef([]);N.useEffect(()=>{p()},[n.id]),N.useEffect(()=>{h.current?.scrollIntoView({behavior:"smooth"})},[s,c]);const p=()=>{try{const C=sessionStorage.getItem(Xa+n.id);if(C){const _=JSON.parse(C);if(Date.now()<_.expiresAt){const v=_.messages||[],R=v.map((P,O)=>({id:`${Date.now()}-${O}`,content:P.content,isUser:P.role==="user",timestamp:new Date(P.timestamp)}));o(R),m.current=v.map(P=>({role:P.role,content:P.content}));return}else sessionStorage.removeItem(Xa+n.id)}}catch(C){console.error("Error loading history:",C)}y()},y=()=>{const C=Qx(n.full_name);o([{id:Date.now().toString(),content:C,isUser:!1,timestamp:new Date}])},w=C=>{try{const _={messages:C,expiresAt:Date.now()+ev*60*60*1e3};sessionStorage.setItem(Xa+n.id,JSON.stringify(_))}catch(_){console.error("Error saving to session:",_)}},x=async C=>{const _={id:Date.now().toString(),content:C,isUser:!0,timestamp:new Date};o(R=>[...R,_]),m.current.push({role:"user",content:C});const v=m.current.map(R=>({role:R.role,content:R.content,timestamp:new Date().toISOString()}));w(v),u(!0);try{const R=await Jx(m.current,n.full_name),P={id:(Date.now()+1).toString(),content:R,isUser:!1,timestamp:new Date};o(L=>[...L,P]),m.current.push({role:"assistant",content:R});const O=m.current.map(L=>({role:L.role,content:L.content,timestamp:new Date().toISOString()}));w(O)}catch(R){console.error("AI Error:",R);const P={id:(Date.now()+1).toString(),content:"Sorry, I encountered an error. Please try again.",isUser:!1,timestamp:new Date};o(O=>[...O,P])}finally{u(!1)}},j=()=>{window.confirm("Are you sure you want to clear this conversation?")&&(sessionStorage.removeItem(Xa+n.id),m.current=[],y())},k=["What is java?","How do I improve my soft skills?","Study tips for exams","Summarize a topic"];return i.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-4 shadow-lg",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>r("/"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Back to dashboard",children:i.jsx(Jl,{className:"w-5 h-5"})}),i.jsx(ni,{className:"w-6 h-6"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold",children:"AI Learning Assistant"}),i.jsx("p",{className:"text-sm text-purple-100",children:"Your 24/7 study companion"})]})]}),i.jsx("button",{onClick:j,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Clear conversation",children:i.jsx(ui,{className:"w-5 h-5"})})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 max-w-4xl mx-auto w-full",children:[s.map(C=>i.jsx(Yx,{message:C.content,isUser:C.isUser,timestamp:C.timestamp},C.id)),c&&i.jsx(Zx,{}),s.length===1&&!c&&i.jsxs("div",{className:"mt-6",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Quick suggestions:"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:k.map((C,_)=>i.jsx("button",{onClick:()=>x(C),className:"text-left text-sm bg-white border border-gray-200 rounded-lg px-4 py-3 hover:bg-blue-50 hover:border-blue-300 transition-colors",children:C},_))})]}),i.jsx("div",{ref:h})]}),i.jsx(Xx,{onSendMessage:x,disabled:c})]})},rv=()=>{const n=Nt(),[r,s]=N.useState(""),[o,c]=N.useState(""),[u,h]=N.useState(""),[m,p]=N.useState(!1),[y,w]=N.useState(!1),[x,j]=N.useState(!1),[k,C]=N.useState(!1),[_,v]=N.useState(null),[R,P]=N.useState(null),O=Y=>{let Z=0;return Y.length>=8&&Z++,Y.length>=12&&Z++,/[a-z]/.test(Y)&&Z++,/[A-Z]/.test(Y)&&Z++,/[0-9]/.test(Y)&&Z++,/[^a-zA-Z0-9]/.test(Y)&&Z++,[{score:0,label:"Too Weak",color:"bg-red-500"},{score:1,label:"Weak",color:"bg-orange-500"},{score:2,label:"Fair",color:"bg-yellow-500"},{score:3,label:"Good",color:"bg-blue-500"},{score:4,label:"Strong",color:"bg-green-500"},{score:6,label:"Very Strong",color:"bg-green-600"}][Math.min(Z,5)]},L=Y=>{const Z=Y.target.value;c(Z),Z.length>0?P(O(Z)):P(null)},z=()=>r.trim()?o.length<8?(v({type:"error",text:"New password must be at least 8 characters."}),!1):o!==u?(v({type:"error",text:"New passwords do not match."}),!1):r===o?(v({type:"error",text:"New password must be different from current password."}),!1):!0:(v({type:"error",text:"Current password is required."}),!1),H=async Y=>{if(Y.preventDefault(),v(null),!!z()){C(!0);try{const{error:Z}=await J.auth.updateUser({password:o});Z?v({type:"error",text:Z.message}):(v({type:"success",text:" Password changed successfully! Please log in again."}),s(""),c(""),h(""),P(null),setTimeout(()=>{J.auth.signOut()},2e3))}catch{v({type:"error",text:"An unexpected error occurred."})}finally{C(!1)}}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4",children:i.jsxs("div",{className:"max-w-md mx-auto mt-10",children:[i.jsxs("button",{onClick:()=>n("/"),className:"flex items-center gap-2 mb-8 px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors font-medium",children:[i.jsx(Jl,{className:"w-5 h-5"}),"Back to Dashboard"]}),i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 mb-4",children:i.jsx(Ln,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Change Password"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Secure your account with a strong password"})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 space-y-6",children:[i.jsxs("form",{onSubmit:H,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Current Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:m?"text":"password",value:r,onChange:Y=>s(Y.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter current password",required:!0}),i.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-3.5 text-gray-500 hover:text-gray-700",children:m?i.jsx(wl,{className:"w-5 h-5"}):i.jsx(bl,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:y?"text":"password",value:o,onChange:L,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter new password",minLength:8,required:!0}),i.jsx("button",{type:"button",onClick:()=>w(!y),className:"absolute right-3 top-3.5 text-gray-500 hover:text-gray-700",children:y?i.jsx(wl,{className:"w-5 h-5"}):i.jsx(bl,{className:"w-5 h-5"})})]}),R&&i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Strength:"}),i.jsx("span",{className:`text-xs font-semibold ${R.color.replace("bg-","text-")}`,children:R.label})]}),i.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full ${R.color} transition-all`,style:{width:`${R.score/6*100}%`}})}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[i.jsx("p",{children:" At least 8 characters"}),i.jsx("p",{children:" Mix of uppercase and lowercase"}),i.jsx("p",{children:" Include numbers and symbols for better security"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:x?"text":"password",value:u,onChange:Y=>h(Y.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Re-enter new password",minLength:8,required:!0}),i.jsx("button",{type:"button",onClick:()=>j(!x),className:"absolute right-3 top-3.5 text-gray-500 hover:text-gray-700",children:x?i.jsx(wl,{className:"w-5 h-5"}):i.jsx(bl,{className:"w-5 h-5"})})]}),o&&u&&i.jsx("div",{className:"mt-2",children:o===u?i.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[i.jsx(Oh,{className:"w-4 h-4"}),i.jsx("span",{children:"Passwords match"})]}):i.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[i.jsx(Tr,{className:"w-4 h-4"}),i.jsx("span",{children:"Passwords do not match"})]})})]}),i.jsx("button",{type:"submit",disabled:k,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:k?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ln,{className:"w-5 h-5"}),"Change Password"]})})]}),_&&i.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-3 ${_.type==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:[_.type==="success"?i.jsx(Oh,{className:"w-5 h-5 flex-shrink-0"}):i.jsx(Tr,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{className:"text-sm font-medium",children:_.text})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Security Tips"}),i.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[i.jsx("li",{children:" Use a unique password not used elsewhere"}),i.jsx("li",{children:" Include uppercase, lowercase, numbers & symbols"}),i.jsx("li",{children:" Never share your password with anyone"}),i.jsx("li",{children:" Change your password regularly"})]})]})]})]})})},sv=()=>{const[n,r]=N.useState(null),[s,o]=N.useState(!0),c=Nt();return N.useEffect(()=>{(async()=>{const{data:{user:h}}=await J.auth.getUser();if(h){const{data:m}=await J.from("users").select("*").eq("id",h.id).single();m&&r(m)}o(!1)})()},[]),s?i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx("div",{className:"text-gray-600",children:"Loading profile..."})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4",children:i.jsxs("div",{className:"max-w-2xl mx-auto mt-10",children:[i.jsxs("button",{onClick:()=>c("/"),className:"flex items-center gap-2 mb-8 px-4 py-2 text-blue-400 hover:bg-blue-50 rounded-lg transition-colors font-medium",children:[i.jsx(Jl,{className:"w-5 h-5"}),"Back to Dashboard"]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"My Profile"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage your account information"})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-yellow-600 px-8 py-12 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-white bg-opacity-20 mb-4",children:i.jsx(Ql,{className:"w-10 h-10 text-white"})}),i.jsx("h2",{className:"text-2xl font-bold text-white",children:n?.full_name||"User"}),i.jsx("p",{className:"text-blue-100 mt-1 capitalize",children:n?.role})]}),i.jsxs("div",{className:"p-8 space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4 pb-6 border-b border-gray-200",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx(jx,{className:"w-6 h-6 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"email"}),i.jsx("p",{className:"text-gray-800 font-medium",children:n?.email})]})]}),i.jsxs("div",{className:"flex items-center gap-4 pb-6 border-b border-gray-200",children:[i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx(xx,{className:"w-6 h-6 text-green-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Role"}),i.jsx("p",{className:"text-gray-800 font-medium capitalize",children:n?.role})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:i.jsx(gf,{className:"w-6 h-6 text-purple-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Member Since"}),i.jsx("p",{className:"text-gray-800 font-medium",children:n?.created_at?new Date(n.created_at).toLocaleDateString():"N/A"})]})]})]})]}),i.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsx("p",{className:"text-sm text-blue-800",children:" To change your password, use the options in your Settings menu."})})]})})},nv=({user:n})=>{const r=Nt(),[s,o]=N.useState({totalStudents:0,totalFaculty:0,totalAssessments:0,totalSubmissions:0,averageScore:0,completionRate:0,blockedUsers:0}),[c,u]=N.useState(!0);N.useEffect(()=>{h()},[]);const h=async()=>{try{console.log(" Fetching admin dashboard stats...");const{data:m}=await J.from("user_profiles").select("id",{count:"exact"}).eq("role","student"),{data:p}=await J.from("user_profiles").select("id",{count:"exact"}).eq("role","faculty"),{data:y}=await J.from("assessments").select("id",{count:"exact"}),{data:w}=await J.from("submissions").select("total_score",{count:"exact"}),{data:x}=await J.from("submissions").select("total_score"),{data:j}=await J.from("user_profiles").select("id",{count:"exact"}).eq("is_blocked",!0),k=m?.length||0,C=p?.length||0,_=y?.length||0,v=w?.length||0,R=j?.length||0,P=x&&x.length>0?Math.round(x.reduce((L,z)=>L+(z.total_score||0),0)/x.length*10)/10:0,O=k>0?Math.round(v/(k*_||1)*100):0;o({totalStudents:k,totalFaculty:C,totalAssessments:_,totalSubmissions:v,averageScore:P,completionRate:O,blockedUsers:R}),console.log(" Dashboard stats loaded")}catch(m){console.error(" Error fetching stats:",m)}finally{u(!1)}};return c?i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("div",{className:"text-lg text-gray-600",children:"Loading..."})})]}):i.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[i.jsx(Oe,{user:n}),i.jsxs("div",{className:"flex-1 p-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Admin Dashboard"}),i.jsx("p",{className:"text-gray-600",children:"System overview and management"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Students"}),i.jsx("p",{className:"text-3xl font-bold text-gray-800",children:s.totalStudents})]}),i.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:i.jsx(Is,{className:"w-6 h-6 text-blue-600"})})]})}),i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Faculty"}),i.jsx("p",{className:"text-3xl font-bold text-gray-800",children:s.totalFaculty})]}),i.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:i.jsx(Is,{className:"w-6 h-6 text-green-600"})})]})}),i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Assessments"}),i.jsx("p",{className:"text-3xl font-bold text-gray-800",children:s.totalAssessments})]}),i.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:i.jsx(Gt,{className:"w-6 h-6 text-purple-600"})})]})}),i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Average Score"}),i.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:[s.averageScore,"%"]})]}),i.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:i.jsx(wf,{className:"w-6 h-6 text-orange-600"})})]})})]}),s.blockedUsers>0&&i.jsxs("div",{className:"mb-8 bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[i.jsx(Tr,{className:"w-5 h-5 text-red-600"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium text-red-800",children:[s.blockedUsers," Blocked Users"]}),i.jsx("p",{className:"text-sm text-red-700",children:"Review user management to unblock if needed"})]}),i.jsx("button",{onClick:()=>r("/admin/users"),className:"ml-auto px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Review Users"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{onClick:()=>r("/admin/users"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-lg hover:border-blue-300 cursor-pointer transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:i.jsx(Is,{className:"w-6 h-6 text-blue-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Manage Users"})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"View, block, delete, and manage user roles"}),i.jsx("button",{className:"text-blue-600 font-medium text-sm hover:text-blue-700",children:"Open "})]}),i.jsxs("div",{onClick:()=>r("/admin/analytics"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-lg hover:border-green-300 cursor-pointer transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:i.jsx(si,{className:"w-6 h-6 text-green-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Analytics"})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Performance metrics and completion statistics"}),i.jsx("button",{className:"text-green-600 font-medium text-sm hover:text-green-700",children:"Open "})]}),i.jsxs("div",{onClick:()=>r("/admin/submissions"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-lg hover:border-purple-300 cursor-pointer transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:i.jsx(Qr,{className:"w-6 h-6 text-purple-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Submissions"})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"View all student submissions and detailed data"}),i.jsx("button",{className:"text-purple-600 font-medium text-sm hover:text-purple-700",children:"Open "})]}),i.jsxs("div",{onClick:()=>r("/admin/reports"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-lg hover:border-orange-300 cursor-pointer transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:i.jsx(ci,{className:"w-6 h-6 text-orange-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Export Reports"})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Generate and download CSV/PDF reports"}),i.jsx("button",{className:"text-orange-600 font-medium text-sm hover:text-orange-700",children:"Open "})]}),i.jsxs("div",{onClick:()=>r("/admin/settings"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-lg hover:border-gray-400 cursor-pointer transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:i.jsx(kx,{className:"w-6 h-6 text-gray-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Settings"})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure system parameters and policies"}),i.jsx("button",{className:"text-gray-600 font-medium text-sm hover:text-gray-700",children:"Open "})]})]}),i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:"Key Metrics"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"pb-6 border-b md:border-b-0 md:border-r border-gray-200",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Total Submissions"}),i.jsx("p",{className:"text-3xl font-bold text-gray-800",children:s.totalSubmissions}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Completed assessments"})]}),i.jsxs("div",{className:"pb-6 border-b md:border-b-0 md:border-r border-gray-200",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Completion Rate"}),i.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:[s.completionRate,"%"]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Student participation"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Blocked Users"}),i.jsx("p",{className:"text-3xl font-bold text-gray-800",children:s.blockedUsers}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Restricted accounts"})]})]})]})]})]})},av=({user:n})=>{const[r,s]=N.useState([]),[o,c]=N.useState([]),[u,h]=N.useState(!0),[m,p]=N.useState(""),[y,w]=N.useState("all"),[x,j]=N.useState("all"),[k,C]=N.useState(null),[_,v]=N.useState(!1),[R,P]=N.useState(""),[O,L]=N.useState(!1),[z,H]=N.useState({email:"",password:"",full_name:"",role:"student"}),[Y,Z]=N.useState(""),[K,he]=N.useState(1),[ke,fe]=N.useState(10);N.useEffect(()=>{me()},[]),N.useEffect(()=>{ve(),he(1)},[r,m,y,x]),N.useEffect(()=>{const D=Math.max(1,Math.ceil(o.length/ke));K>D&&he(D)},[o,ke,K]);const me=async()=>{try{console.log(" Fetching all users...");const{data:D,error:ee}=await J.from("users").select("*").order("created_at",{ascending:!1});if(ee){console.error(" Error fetching users:",ee);return}console.log(" Fetched users:",D),s(D||[])}catch(D){console.error(" Error:",D)}finally{h(!1)}},ve=()=>{let D=[...r];m&&(D=D.filter(ee=>ee.email.toLowerCase().includes(m.toLowerCase())||ee.full_name.toLowerCase().includes(m.toLowerCase()))),y!=="all"&&(D=D.filter(ee=>ee.role===y)),x==="active"?D=D.filter(ee=>!ee.is_blocked&&ee.is_active):x==="blocked"&&(D=D.filter(ee=>ee.is_blocked)),c(D)},Ae=async()=>{try{if(Z(""),v(!0),!z.email||!z.password||!z.full_name){Z(" All fields are required!"),v(!1);return}if(z.password.length<6){Z(" Password must be at least 6 characters!"),v(!1);return}console.log(" Creating new user:",z.email);const{data:D,error:ee}=await J.auth.signUp({email:z.email,password:z.password});if(ee){console.error(" Auth error:",ee),Z(` Error creating auth user: ${ee.message}`),v(!1);return}if(!D.user?.id){Z(" Failed to create user account"),v(!1);return}const ue=D.user.id;console.log(" Auth user created:",ue);const{error:De}=await J.from("user_profiles").insert({id:ue,email:z.email,full_name:z.full_name,role:z.role,is_active:!0,is_blocked:!1});if(De){console.error(" Profile error:",De),Z(` Error creating profile: ${De.message}`),v(!1);return}console.log(" Profile created");const{error:Je}=await J.from("users").insert({id:ue,email:z.email,full_name:z.full_name,role:z.role,is_active:!0,is_blocked:!1,created_at:new Date().toISOString()});if(Je){console.error(" Users table error:",Je),Z(` Error adding to users table: ${Je.message}`),v(!1);return}console.log(" Users table record created"),P(` ${z.role==="student"?"Student":"Faculty"} "${z.full_name}" created successfully!`),setTimeout(()=>P(""),3e3),H({email:"",password:"",full_name:"",role:"student"}),L(!1),me()}catch(D){console.error(" Error:",D),Z(D instanceof Error?D.message:"Something went wrong")}finally{v(!1)}},Te=async(D,ee)=>{try{v(!0);const ue=!ee;console.log(` Toggling block status for ${D}:`,ee,"",ue);const{error:De}=await J.from("user_profiles").update({is_blocked:ue}).eq("id",D),{error:Je}=await J.from("users").update({is_blocked:ue}).eq("id",D);if(De||Je){console.error(" Error updating block status:",De||Je),alert(`Failed to update: ${(De||Je)?.message}`);return}console.log(" Updated successfully in both tables"),P(`User ${ue?"blocked":"unblocked"} successfully!`),setTimeout(()=>P(""),3e3),s(r.map(kt=>kt.id===D?{...kt,is_blocked:ue}:kt)),C(null)}catch(ue){console.error(" Error:",ue),alert(ue instanceof Error?ue.message:"Something went wrong")}finally{v(!1)}},_e=async(D,ee)=>{try{v(!0),console.log(` Changing role for ${D} to:`,ee);const{error:ue}=await J.from("user_profiles").update({role:ee}).eq("id",D),{error:De}=await J.from("users").update({role:ee}).eq("id",D);if(ue||De){console.error(" Error changing role:",ue||De),alert(`Failed to change role: ${(ue||De)?.message}`);return}console.log(" Role changed successfully in both tables"),P(`User role changed to ${ee}!`),setTimeout(()=>P(""),3e3),s(r.map(Je=>Je.id===D?{...Je,role:ee}:Je)),C(null)}catch(ue){console.error(" Error:",ue),alert(ue instanceof Error?ue.message:"Something went wrong")}finally{v(!1)}},W=async(D,ee)=>{try{v(!0);const ue=!ee;console.log(` Toggling active status for ${D}:`,ee,"",ue);const{error:De}=await J.from("user_profiles").update({is_active:ue}).eq("id",D),{error:Je}=await J.from("users").update({is_active:ue}).eq("id",D);if(De||Je){console.error(" Error updating active status:",De||Je),alert(`Failed to update: ${(De||Je)?.message}`);return}console.log(" Active status updated in both tables"),P(`User ${ue?"activated":"deactivated"} successfully!`),setTimeout(()=>P(""),3e3),s(r.map(kt=>kt.id===D?{...kt,is_active:ue}:kt)),C(null)}catch(ue){console.error(" Error:",ue),alert(ue instanceof Error?ue.message:"Something went wrong")}finally{v(!1)}},ae=async D=>{if(window.confirm(" Are you sure you want to delete this user? This action cannot be undone."))try{v(!0),console.log(" Deleting user:",D);const{error:ee}=await J.from("user_profiles").delete().eq("id",D),{error:ue}=await J.from("users").delete().eq("id",D);if(ee||ue){console.error(" Error deleting user:",ee||ue),alert(`Failed to delete: ${(ee||ue)?.message}`);return}console.log(" User deleted successfully from both tables"),P("User deleted successfully!"),setTimeout(()=>P(""),3e3),s(r.filter(De=>De.id!==D)),C(null)}catch(ee){console.error(" Error:",ee),alert(ee instanceof Error?ee.message:"Something went wrong")}finally{v(!1)}};if(u)return i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("div",{className:"text-lg text-gray-600",children:"Loading..."})})]});const U=o.length,T=Math.max(1,Math.ceil(U/ke)),M=K*ke,re=M-ke,pe=o.slice(re,M),xe=D=>{D<1||D>T||he(D)},we=U===0?0:re+1,Ne=U===0?0:Math.min(M,U);return i.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[i.jsx(Oe,{user:n}),i.jsxs("div",{className:"flex-1 p-8",children:[i.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"User Management"}),i.jsx("p",{className:"text-gray-600",children:"View and manage all users in the system"})]}),i.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[i.jsx(yf,{className:"w-5 h-5"}),"Add User"]})]}),R&&i.jsx("div",{className:"mb-4 p-4 bg-green-100 border border-green-200 rounded-lg text-green-700",children:R}),i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 mb-8",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),i.jsxs("div",{className:"relative",children:[i.jsx(xf,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search by email or name...",value:m,onChange:D=>p(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),i.jsxs("select",{value:y,onChange:D=>w(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Roles"}),i.jsx("option",{value:"student",children:"Students"}),i.jsx("option",{value:"faculty",children:"Faculty"}),i.jsx("option",{value:"admin",children:"Admin"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),i.jsxs("select",{value:x,onChange:D=>j(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Users"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"blocked",children:"Blocked"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rows per page"}),i.jsxs("select",{value:ke,onChange:D=>{fe(Number(D.target.value)),he(1)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:5,children:"5"}),i.jsx("option",{value:10,children:"10"}),i.jsx("option",{value:20,children:"20"}),i.jsx("option",{value:50,children:"50"})]})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",we,"",Ne," of ",r.length," users"]}),i.jsxs("p",{className:"text-xs text-gray-400",children:["Filtered: ",o.length]})]}),o.length===0?i.jsx("div",{className:"p-8 text-center",children:i.jsx("p",{className:"text-gray-500",children:"No users found"})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Block"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Created"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:pe.map(D=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 text-sm text-gray-800 font-medium",children:D.full_name}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:D.email}),i.jsx("td",{className:"px-6 py-4 text-sm",children:i.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium capitalize",children:D.role})}),i.jsx("td",{className:"px-6 py-4 text-sm",children:D.is_active?i.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"Active"}):i.jsx("span",{className:"inline-block px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium",children:"Inactive"})}),i.jsx("td",{className:"px-6 py-4 text-sm",children:D.is_blocked?i.jsx("span",{className:"inline-block px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"Blocked"}):i.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"Allowed"})}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(D.created_at).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4 text-sm",children:i.jsx("button",{onClick:()=>C(D),className:"text-blue-600 hover:text-blue-700 font-medium hover:underline",children:"Manage"})})]},D.id))})]})}),i.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[i.jsx("button",{onClick:()=>xe(K-1),disabled:K===1,className:"px-3 py-1 text-sm border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100",children:"Previous"}),i.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:T},(D,ee)=>ee+1).map(D=>i.jsx("button",{onClick:()=>xe(D),className:`px-3 py-1 text-sm rounded-lg border ${D===K?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 hover:bg-gray-100"}`,children:D},D))}),i.jsx("button",{onClick:()=>xe(K+1),disabled:K===T||U===0,className:"px-3 py-1 text-sm border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100",children:"Next"})]})]})]})]}),O&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[i.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center",children:[i.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Add New User"}),i.jsx("button",{onClick:()=>{L(!1),Z(""),H({email:"",password:"",full_name:"",role:"student"})},className:"text-gray-500 hover:text-gray-700",children:i.jsx(Yl,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"px-8 py-6 space-y-4",children:[Y&&i.jsx("div",{className:"p-3 bg-red-100 border border-red-200 rounded-lg text-red-700 text-sm",children:Y}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:z.email,onChange:D=>H({...z,email:D.target.value}),placeholder:"student@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),i.jsx("input",{type:"text",value:z.full_name,onChange:D=>H({...z,full_name:D.target.value}),placeholder:"John Doe",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),i.jsx("input",{type:"password",value:z.password,onChange:D=>H({...z,password:D.target.value}),placeholder:"Min 6 characters",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),i.jsxs("select",{value:z.role,onChange:D=>H({...z,role:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"student",children:"Student"}),i.jsx("option",{value:"faculty",children:"Faculty"})]})]})]}),i.jsxs("div",{className:"px-8 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl flex gap-2",children:[i.jsx("button",{onClick:()=>{L(!1),Z(""),H({email:"",password:"",full_name:"",role:"student"})},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",children:"Cancel"}),i.jsx("button",{onClick:Ae,disabled:_,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Creating...":"Create User"})]})]})}),k&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[i.jsxs("div",{className:"px-8 py-6 border-b border-gray-200",children:[i.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:k.full_name}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:k.email})]}),i.jsxs("div",{className:"px-8 py-6 space-y-4",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Role:"})," ",i.jsx("span",{className:"capitalize text-gray-700",children:k.role})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Status:"})," ",i.jsx("span",{className:k.is_active?"text-green-600":"text-yellow-600",children:k.is_active?"Active":"Inactive"})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Blocked:"})," ",i.jsx("span",{className:k.is_blocked?"text-red-600":"text-green-600",children:k.is_blocked?"Yes":"No"})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Change Role"}),i.jsxs("select",{defaultValue:k.role,onChange:D=>_e(k.id,D.target.value),disabled:_,className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx("option",{value:"student",children:"Student"}),i.jsx("option",{value:"faculty",children:"Faculty"}),i.jsx("option",{value:"admin",children:"Admin"})]})]}),i.jsx("button",{onClick:()=>W(k.id,k.is_active),disabled:_,className:`w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${k.is_active?"bg-yellow-500 hover:bg-yellow-600":"bg-green-500 hover:bg-green-600"}`,children:k.is_active?i.jsxs(i.Fragment,{children:[i.jsx(Ah,{className:"w-4 h-4"}),"Deactivate User"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ln,{className:"w-4 h-4"}),"Activate User"]})}),i.jsx("button",{onClick:()=>Te(k.id,k.is_blocked),disabled:_,className:`w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${k.is_blocked?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:k.is_blocked?i.jsxs(i.Fragment,{children:[i.jsx(Ah,{className:"w-4 h-4"}),"Unblock User"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ln,{className:"w-4 h-4"}),"Block User"]})}),i.jsxs("button",{onClick:()=>ae(k.id),disabled:_,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-100 text-red-600 rounded-lg font-medium hover:bg-red-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(ui,{className:"w-4 h-4"}),"Delete User Permanently"]})]}),i.jsx("div",{className:"px-8 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl",children:i.jsx("button",{onClick:()=>C(null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",children:"Close"})})]})})]})},iv=({user:n})=>{const[r,s]=N.useState({subjectPerformance:[],roleDistribution:[],monthlySubmissions:[],assessmentDifficulty:[]}),[o,c]=N.useState(!0);N.useEffect(()=>{u()},[]);const u=async()=>{try{console.log(" Fetching analytics...");const{data:m}=await J.from("submissions").select(`
          total_score,
          assessment:assessments(subject)
        `),p=new Map;m?.forEach(v=>{const R=v.assessment?.subject||"Unknown";p.has(R)||p.set(R,{scores:[],count:0});const P=p.get(R);P.scores.push(v.total_score||0),P.count++});const y=Array.from(p.entries()).map(([v,R])=>({subject:v,avgScore:Math.round(R.scores.reduce((P,O)=>P+O,0)/R.scores.length*10)/10,submissionCount:R.count})),{data:w}=await J.from("user_profiles").select("role",{count:"exact"}),x=new Map;w?.forEach(v=>{x.set(v.role,(x.get(v.role)||0)+1)});const j=Array.from(x.entries()).map(([v,R])=>({role:v,count:R})),{data:k}=await J.from("submissions").select(`
          total_score,
          assessment:assessments(id, title)
        `),C=new Map;k?.forEach(v=>{const R=v.assessment?.id||"Unknown",P=v.assessment?.title||"Unknown";C.has(R)||C.set(R,{title:P,scores:[],count:0});const O=C.get(R);O.scores.push(v.total_score||0),O.count++});const _=Array.from(C.values()).map(v=>({title:v.title,avgScore:Math.round(v.scores.reduce((R,P)=>R+P,0)/v.scores.length*10)/10,submissionCount:v.count})).sort((v,R)=>v.avgScore-R.avgScore);s({subjectPerformance:y,roleDistribution:j,monthlySubmissions:[],assessmentDifficulty:_}),console.log(" Analytics loaded")}catch(m){console.error(" Error fetching analytics:",m)}finally{c(!1)}},h=()=>{const m=`
EduVerge - Analytics Report
Generated: ${new Date().toLocaleString()}

=== SUBJECT PERFORMANCE ===
${r.subjectPerformance.map(y=>`${y.subject}: ${y.avgScore}% avg (${y.submissionCount} submissions)`).join(`
`)}

=== ROLE DISTRIBUTION ===
${r.roleDistribution.map(y=>`${y.role}: ${y.count} users`).join(`
`)}

=== ASSESSMENT DIFFICULTY ===
${r.assessmentDifficulty.map(y=>`${y.title}: ${y.avgScore}% avg (${y.submissionCount} submissions)`).join(`
`)}
    `,p=document.createElement("a");p.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(m)),p.setAttribute("download",`analytics-report-${new Date().getTime()}.txt`),p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p)};return o?i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("div",{className:"text-lg text-gray-600",children:"Loading..."})})]}):i.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[i.jsx(Oe,{user:n}),i.jsxs("div",{className:"flex-1 p-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Analytics & Reports"}),i.jsx("p",{className:"text-gray-600",children:"System-wide performance metrics"})]}),i.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[i.jsx(ci,{className:"w-4 h-4"}),"Export Report"]})]}),i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 mb-8",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(Gt,{className:"w-5 h-5"}),"Performance by Subject"]}),i.jsx("div",{className:"space-y-4",children:r.subjectPerformance.map(m=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-800",children:m.subject}),i.jsxs("p",{className:"text-sm text-gray-600",children:[m.submissionCount," submissions"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-48 bg-gray-200 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:"bg-green-500 h-full",style:{width:`${m.avgScore}%`}})}),i.jsxs("p",{className:"font-semibold text-gray-800 min-w-fit",children:[m.avgScore,"%"]})]})]},m.subject))})]}),i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 mb-8",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(si,{className:"w-5 h-5"}),"Assessment Performance (Ranked)"]}),i.jsx("div",{className:"space-y-4",children:r.assessmentDifficulty.map((m,p)=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium text-gray-800",children:[p+1,". ",m.title]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[m.submissionCount," students"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[m.avgScore,"%"]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Average Score"})]})]},m.title))})]}),i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(Is,{className:"w-5 h-5"}),"User Distribution"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.roleDistribution.map(m=>i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-gray-800",children:m.count}),i.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[m.role,"s"]})]},m.role))})]})]})]})},ov=({user:n})=>{const[r,s]=N.useState([]),[o,c]=N.useState([]),[u,h]=N.useState(!0),[m,p]=N.useState(""),[y,w]=N.useState("all"),[x,j]=N.useState(null),[k,C]=N.useState(!1),[_,v]=N.useState({submissionId:"",mcq_score:0,theory_score:0,total_score:0,faculty_feedback:"",faculty_rating:0}),[R,P]=N.useState(!1),[O,L]=N.useState(""),[z,H]=N.useState(1),Y=10;N.useEffect(()=>{Z()},[]),N.useEffect(()=>{K(),H(1)},[r,m,y]);const Z=async()=>{try{console.log(" Fetching all submissions...");const{data:U,error:T}=await J.from("submissions").select(`
          *,
          assessments:assessment_id(title),
          users:student_id(full_name, email)
        `).order("submitted_at",{ascending:!1});if(T){console.error(" Error fetching submissions:",T);return}const M=U?.map(re=>({id:re.id,assessment_id:re.assessment_id,student_id:re.student_id,student_name:re.users?.full_name||"Unknown",student_email:re.users?.email||"Unknown",assessment_title:re.assessments?.title||"Unknown",submitted_at:re.submitted_at,answers:re.answers,test_session_id:re.test_session_id,mcq_score:re.mcq_score,theory_score:re.theory_score,total_score:re.total_score,faculty_feedback:re.faculty_feedback||"",faculty_rating:re.faculty_rating,is_auto_submitted:re.is_auto_submitted}))||[];console.log(" Fetched submissions:",M),s(M)}catch(U){console.error(" Error:",U)}finally{h(!1)}},K=()=>{let U=[...r];m&&(U=U.filter(T=>T.student_name.toLowerCase().includes(m.toLowerCase())||T.student_email.toLowerCase().includes(m.toLowerCase())||T.assessment_title.toLowerCase().includes(m.toLowerCase()))),y==="graded"?U=U.filter(T=>T.faculty_rating!==null):y==="ungraded"&&(U=U.filter(T=>T.faculty_rating===null)),c(U)},he=Math.ceil(o.length/Y),ke=(z-1)*Y,fe=ke+Y,me=o.slice(ke,fe),ve=()=>{z<he&&H(z+1)},Ae=()=>{z>1&&H(z-1)},Te=U=>{U>=1&&U<=he&&H(U)},_e=async()=>{try{if(P(!0),_.total_score<0||_.total_score>100){alert(" Total score must be between 0-100"),P(!1);return}console.log(" Submitting grade for submission:",_.submissionId);const{error:U}=await J.from("submissions").update({mcq_score:_.mcq_score,theory_score:_.theory_score,total_score:_.total_score,faculty_feedback:_.faculty_feedback,faculty_rating:_.faculty_rating}).eq("id",_.submissionId);if(U){console.error(" Error grading submission:",U),alert(`Failed to grade: ${U.message}`);return}console.log(" Grade submitted successfully"),L(" Submission graded successfully!"),setTimeout(()=>L(""),3e3),s(r.map(T=>T.id===_.submissionId?{...T,mcq_score:_.mcq_score,theory_score:_.theory_score,total_score:_.total_score,faculty_feedback:_.faculty_feedback,faculty_rating:_.faculty_rating}:T)),C(!1),j(null),v({submissionId:"",mcq_score:0,theory_score:0,total_score:0,faculty_feedback:"",faculty_rating:0})}catch(U){console.error(" Error:",U),alert(U instanceof Error?U.message:"Something went wrong")}finally{P(!1)}},W=U=>{if(!U.answers){alert(" No answers attached to this submission");return}const T=JSON.stringify(U.answers,null,2),M=new Blob([T],{type:"application/json"}),re=URL.createObjectURL(M),pe=document.createElement("a");pe.href=re,pe.download=`submission_${U.student_name}_${U.id}.json`,pe.click(),URL.revokeObjectURL(re)},ae=U=>U.faculty_rating!==null;return u?i.jsxs("div",{className:"flex",children:[i.jsx(Oe,{user:n}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("div",{className:"text-lg text-gray-600",children:"Loading submissions..."})})]}):i.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[i.jsx(Oe,{user:n}),i.jsxs("div",{className:"flex-1 p-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Student Submissions"}),i.jsx("p",{className:"text-gray-600",children:"View and grade all student submissions"})]}),O&&i.jsx("div",{className:"mb-4 p-4 bg-green-100 border border-green-200 rounded-lg text-green-700",children:O}),i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 mb-8",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),i.jsxs("div",{className:"relative",children:[i.jsx(xf,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search by student, email, or assessment...",value:m,onChange:U=>p(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter"}),i.jsxs("select",{value:y,onChange:U=>w(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Submissions"}),i.jsx("option",{value:"graded",children:"Graded Only"}),i.jsx("option",{value:"ungraded",children:"Ungraded Only"})]})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",ke+1,"-",Math.min(fe,o.length)," of ",o.length," submissions (Page ",z," of ",he,")"]})}),o.length===0?i.jsx("div",{className:"p-8 text-center",children:i.jsx("p",{className:"text-gray-500",children:"No submissions found"})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Student"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Assessment"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"MCQ"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Theory"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Total"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Rating"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Submitted"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:me.map(U=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-800",children:U.student_name}),i.jsx("p",{className:"text-gray-500 text-xs",children:U.student_email})]})}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:U.assessment_title}),i.jsx("td",{className:"px-6 py-4 text-sm",children:U.mcq_score!==null?i.jsx("span",{className:"font-medium text-blue-600",children:U.mcq_score}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-6 py-4 text-sm",children:U.theory_score!==null?i.jsx("span",{className:"font-medium text-purple-600",children:U.theory_score}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-6 py-4 text-sm",children:U.total_score!==null?i.jsxs("span",{className:"font-medium text-green-600",children:[U.total_score,"/100"]}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-6 py-4 text-sm",children:ae(U)?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ex,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),i.jsx("span",{className:"font-medium text-yellow-600",children:U.faculty_rating})]}):i.jsx("span",{className:"text-gray-400",children:"Not Graded"})}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(U.submitted_at).toLocaleDateString()}),i.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[i.jsx("button",{onClick:()=>{j(U)},className:"text-blue-600 hover:text-blue-700 font-medium hover:underline",children:"View"}),i.jsx("button",{onClick:()=>{j(U),v({submissionId:U.id,mcq_score:U.mcq_score||0,theory_score:U.theory_score||0,total_score:U.total_score||0,faculty_feedback:U.faculty_feedback||"",faculty_rating:U.faculty_rating||0}),C(!0)},className:"text-green-600 hover:text-green-700 font-medium hover:underline",children:"Grade"})]})]},U.id))})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",o.length," submissions"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:Ae,disabled:z===1,className:"flex items-center gap-1 px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[i.jsx(wx,{className:"w-4 h-4"}),"Previous"]}),i.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:he},(U,T)=>T+1).map(U=>i.jsx("button",{onClick:()=>Te(U),className:`px-3 py-2 rounded-lg transition-colors ${z===U?"bg-blue-600 text-white font-medium":"border border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:U},U))}),i.jsxs("button",{onClick:ve,disabled:z===he,className:"flex items-center gap-1 px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Next",i.jsx(bx,{className:"w-4 h-4"})]})]})]})]})]})]}),x&&!k&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-96 overflow-y-auto",children:[i.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:x.student_name}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:x.assessment_title})]}),i.jsx("button",{onClick:()=>j(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),i.jsxs("div",{className:"px-8 py-6 space-y-4",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Submitted:"}),i.jsx("span",{className:"text-gray-600",children:new Date(x.submitted_at).toLocaleString()})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Auto Submitted:"}),i.jsx("span",{className:"text-gray-600",children:x.is_auto_submitted?"Yes":"No"})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"MCQ Score"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.mcq_score!==null?x.mcq_score:"-"})]}),i.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Theory Score"}),i.jsx("p",{className:"text-2xl font-bold text-purple-600",children:x.theory_score!==null?x.theory_score:"-"})]}),i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Total"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.total_score!==null?`${x.total_score}/100`:"-"})]})]}),x.answers&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Submitted Answers"}),i.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto max-h-48 text-xs font-mono",children:i.jsx("pre",{children:JSON.stringify(x.answers,null,2)})})]}),x.faculty_feedback&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Faculty Feedback"}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-gray-700",children:x.faculty_feedback})]}),x.answers&&i.jsxs("button",{onClick:()=>W(x),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[i.jsx(ci,{className:"w-4 h-4"}),"Download Answers"]})]}),i.jsxs("div",{className:"px-8 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl flex gap-2",children:[i.jsx("button",{onClick:()=>{j(null),C(!1)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",children:"Close"}),i.jsx("button",{onClick:()=>{v({submissionId:x.id,mcq_score:x.mcq_score||0,theory_score:x.theory_score||0,total_score:x.total_score||0,faculty_feedback:x.faculty_feedback||"",faculty_rating:x.faculty_rating||0}),C(!0)},className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Grade This"})]})]})}),k&&x&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 sticky top-0 bg-white",children:[i.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Grade Submission"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:x.student_name})]}),i.jsxs("div",{className:"px-8 py-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"MCQ Score"}),i.jsx("input",{type:"number",min:"0",max:"100",value:_.mcq_score,onChange:U=>v({..._,mcq_score:parseInt(U.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter MCQ score"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theory Score"}),i.jsx("input",{type:"number",min:"0",max:"100",value:_.theory_score,onChange:U=>v({..._,theory_score:parseInt(U.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter theory score"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Score (0-100)"}),i.jsx("input",{type:"number",min:"0",max:"100",value:_.total_score,onChange:U=>v({..._,total_score:parseInt(U.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter total score"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating (1-5)"}),i.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(U=>i.jsx("button",{onClick:()=>v({..._,faculty_rating:U}),className:`p-2 rounded-lg transition-colors ${_.faculty_rating>=U?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,children:""},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Faculty Feedback"}),i.jsx("textarea",{value:_.faculty_feedback,onChange:U=>v({..._,faculty_feedback:U.target.value}),placeholder:"Enter feedback for the student...",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),i.jsxs("div",{className:"px-8 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl flex gap-2 sticky bottom-0",children:[i.jsx("button",{onClick:()=>{C(!1),v({submissionId:"",mcq_score:0,theory_score:0,total_score:0,faculty_feedback:"",faculty_rating:0})},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",children:"Cancel"}),i.jsx("button",{onClick:_e,disabled:R,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Saving...":"Save Grade"})]})]})})]})},lv=n=>({id:n.id,email:n.email,full_name:n.full_name,role:n.role,is_blocked:n.is_blocked,is_active:n.is_active,created_at:n.created_at}),cv=()=>{const[n,r]=N.useState(null),[s,o]=N.useState(!0);N.useEffect(()=>{c()},[]);const c=async()=>{try{const h=await hx();r(h)}catch(h){console.error(" Error checking user:",h),r(null)}finally{o(!1)}};if(s)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const u=n?lv(n):null;return i.jsx(kg,{children:i.jsxs(vg,{children:[i.jsx(rt,{path:"/login",element:n?i.jsx(lt,{to:"/"}):i.jsx(px,{onLogin:c})}),i.jsx(rt,{path:"/admin",element:n&&n.role==="admin"?i.jsx(nv,{user:u}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"/admin/users",element:n&&n.role==="admin"?i.jsx(av,{user:u}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"/admin/analytics",element:n&&n.role==="admin"?i.jsx(iv,{user:u}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"/admin/submissions",element:i.jsx(ov,{user:n})}),i.jsx(rt,{path:"/",element:n?n.role==="faculty"?i.jsx(Rx,{user:u}):n.role==="admin"?i.jsx(lt,{to:"/admin"}):i.jsx(Ux,{user:u}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"/create-assessment",element:n&&n.role==="faculty"?i.jsx(Px,{user:u}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"/course-materials",element:n&&n.role==="faculty"?i.jsx(Ax,{user:u}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"/take-test/:assessmentId",element:n&&n.role==="student"?i.jsx(Mx,{user:u}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"/courses",element:n&&n.role==="student"?i.jsx(Fx,{user:u}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"/ai-assistant",element:n&&n.role==="student"?i.jsx(tv,{user:u}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"/score-calculator",element:n&&n.role==="student"?i.jsx(Hx,{}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"/results/:submissionId",element:n?i.jsx(zx,{user:u}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"/profile",element:n?i.jsx(sv,{}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"/change-password",element:n?i.jsx(rv,{}):i.jsx(lt,{to:"/login"})}),i.jsx(rt,{path:"*",element:i.jsx(lt,{to:"/"})})]})})};Ep.createRoot(document.getElementById("root")).render(i.jsx(Lh.StrictMode,{children:i.jsx(cv,{})}));
